{"version":3,"sources":["../../scripts/magic_script.ts","../../scripts/items/weapon/shield/shieldEvent.ts","../../scripts/common/commonUtil.ts","../../scripts/magicItem.ts","../../scripts/common/ItemDurabilityDamage.ts","../../scripts/magicBlock.ts","../../scripts/magic/GrimoireBookComponent.ts","../../scripts/magic/MagicStoneComponet.ts","../../scripts/items/weapon/armor/magicAmorHitEvent.ts","../../scripts/items/weapon/wand/WandWeaponMagic.ts","../../scripts/common/ShooterPoints.ts","../../scripts/custom/ShooterMagicEvent.ts","../../scripts/items/weapon/shield/ShieldMagic.ts","../../scripts/items/weapon/sword/SwordWeaponMagic.ts","../../scripts/items/weapon/bow/BowWeaponMagic.ts","../../scripts/player/armorEquipment.ts","../../scripts/items/weapon/armor/MagicHelmetSurveillance.ts","../../scripts/items/weapon/armor/MagicChestSurveillance.ts","../../scripts/items/weapon/armor/MagicLeggingsSurveillance.ts","../../scripts/items/weapon/armor/MagicBootsSurveillance.ts","../../scripts/items/weapon/stick/StickWeaponMagic.ts","../../scripts/items/weapon/stick/WaterCurrentMagic.ts","../../scripts/items/weapon/stick/AtmosphereMagic.ts","../../scripts/items/weapon/stick/EarthMagic.ts","../../scripts/items/weapon/stick/LightningStrikeMagic.ts","../../scripts/items/weapon/stick/JetBlackMagic.ts","../../scripts/items/weapon/stick/SparkleMagic.ts","../../scripts/items/weapon/rod/RodWeaponMagic.ts","../../scripts/items/weapon/rod/FlameMagic.ts","../../scripts/items/weapon/rod/WaterWaveMagic.ts","../../scripts/items/weapon/rod/StormMagic.ts","../../scripts/items/weapon/rod/RockMagic.ts","../../scripts/items/weapon/rod/ThunderclapMagic.ts","../../scripts/items/weapon/rod/FreezeMagic.ts","../../scripts/items/weapon/rod/DarknessMagic.ts","../../scripts/items/weapon/rod/BrightnessMagic.ts","../../scripts/items/weapon/staff/StaffWeaponMagic.ts","../../scripts/items/weapon/staff/FirestormMagic.ts","../../scripts/items/weapon/staff/ExplosionMagic.ts","../../scripts/items/weapon/staff/FlameSparkMagic.ts","../../scripts/items/weapon/staff/MailstromMagic.ts","../../scripts/items/weapon/bread/BreadWeaponMagic.ts","../../scripts/items/weapon/bread/FireMagicBread.ts","../../scripts/items/weapon/bread/WaterMagicBread.ts","../../scripts/items/weapon/bread/WindMagicBread.ts","../../scripts/items/weapon/bread/StoneMagicBread.ts","../../scripts/items/weapon/bread/ThunderMagicBread.ts","../../scripts/items/weapon/bread/IceMagicBread.ts","../../scripts/items/weapon/bazooka/BazookaWeaponMagic.ts","../../scripts/items/weapon/gun/GunWeaponMagic.ts","../../scripts/items/weapon/grimoire/SummonGrimoireMagic.ts","../../scripts/custom/CustomComponentRegistry.ts"],"sourcesContent":["import { world,Entity, Player, EntityDamageSource, MolangVariableMap, Dimension, Vector3, ItemStack, system, EntityInventoryComponent } from \"@minecraft/server\";\r\nimport { shieldGuard, shieldCounter } from \"./items/weapon/shield/shieldEvent\";\r\nimport { home_tp, torchlight_use, ignited_use_af, ignited_use_be, water_use, flower_garden_use, growth_use, mowing_use, music_sound_use } from \"./magicItem\";\r\nimport { magic_lectern_break } from \"./magicBlock\";\r\nimport { hitMagicAmor } from \"./items/weapon/armor/magicAmorHitEvent\";\r\nimport { initRegisterCustom, initStateChangeMonitor } from \"./custom/CustomComponentRegistry\";\r\nimport { magicBowShot } from \"./items/weapon/bow/BowWeaponMagic\";\r\nimport { grimoire_summon_Release } from \"./items/weapon/grimoire/SummonGrimoireMagic\";\r\n\r\nconst guards = [\"anvil\", \"blockExplosion\", \"entityAttack\", \"entityExplosion\", \"sonicBoom\", \"projectile\"];\r\n\r\n// ワールド接続時\r\nworld.beforeEvents.worldInitialize.subscribe(initEvent => {\r\n    initRegisterCustom(initEvent);\r\n    initStateChangeMonitor(initEvent);\r\n});\r\n\r\n// エンティティを右クリック\r\n// world.afterEvents.playerInteractWithEntity.subscribe(event => {\r\n//     var player = event.player;\r\n//     var target = event.target;\r\n//     var item = event.itemStack;\r\n//     if (item) {\r\n//         if (item.typeId == \"kurokumaft:repatriation_fruit\" && target.typeId == \"kurokumaft:home_gate\") {\r\n//             homeSetDialog(player, item, target);\r\n//         }\r\n//     }\r\n//     if (target.typeId == \"kurokumaft:fire_magic_sword\") {\r\n//         // print(target.typeId);\r\n//     }\r\n\r\n// });\r\n\r\n// 近接hit後\r\nworld.afterEvents.entityHitEntity.subscribe(event => {\r\n    var dameger = event.damagingEntity as Entity;\r\n    var hitEn = event.hitEntity as Entity;\r\n    if (hitEn.typeId == \"minecraft:player\") {\r\n        shieldGuard(hitEn as Player, true);\r\n        shieldCounter(hitEn as Player, dameger);\r\n        hitMagicAmor(hitEn as Player, dameger, undefined, undefined);\r\n    }\r\n    // let equ = dameger.getComponent(EntityComponentTypes.Equippable) as EntityEquippableComponent;\r\n    // let mainItem = equ.getEquipment(EquipmentSlot.Mainhand);\r\n    // if (mainItem && mainItem.typeId.indexOf(\"magic_sword\")) {\r\n\r\n    // }\r\n\r\n});\r\n// 遠距離hit後\r\nworld.afterEvents.projectileHitEntity.subscribe(event => {\r\n    var projectileEn = event.projectile;\r\n    var hitEn = event.getEntityHit().entity as Entity;\r\n    var dameger = event.source as Entity;\r\n    var hitVector = event.hitVector;\r\n    if (hitEn != undefined && hitEn.typeId == \"minecraft:player\") {\r\n        shieldGuard(hitEn as Player, false);\r\n        shieldCounter(hitEn as Player, dameger);\r\n        hitMagicAmor(hitEn as Player,dameger,projectileEn, hitVector);\r\n    }\r\n    if (projectileEn) {\r\n    }\r\n});\r\n\r\n// ブロックhit後\r\nworld.afterEvents.projectileHitBlock.subscribe(event => {\r\n    var projectileEn = event.projectile;\r\n    if (projectileEn) {\r\n    }\r\n});\r\n\r\n// ダメージ\r\nworld.afterEvents.entityHurt.subscribe(event => {\r\n    var damageSource = event.damageSource as EntityDamageSource;\r\n    var hitEn = event.hurtEntity as Entity;\r\n    // print(hitEn, damageSource.cause + \"=\" + damage);\r\n    if (hitEn != undefined && hitEn.typeId == \"minecraft:player\" && damageSource.cause != \"void\") {\r\n        if (guards.indexOf(damageSource.cause) != -1) {\r\n            shieldGuard(hitEn as Player, false);\r\n        }\r\n    }\r\n});\r\n\r\n// アイテム使用完了\r\nworld.afterEvents.itemCompleteUse.subscribe(event => {\r\n    var en = event.source;\r\n    var item = event.itemStack;\r\n    if (en != undefined && en.typeId == \"minecraft:player\" && item != undefined ) {\r\n        if (item.typeId === \"kurokumaft:repatriation_fruit\") {\r\n            home_tp(en, item)\r\n        }\r\n    }\r\n});\r\n\r\n// ブロックアイテム右クリック後\r\n// world.afterEvents.playerInteractWithBlock.subscribe(event => {\r\n//     var player = event.player;\r\n//     var item = event.itemStack;\r\n//     var block = event.block;\r\n//     // print(\"playerInteractWithBlock\");\r\n//     if (player != undefined) {\r\n//         if (block.typeId == \"kurokumaft:magic_lectern\") {\r\n//             magic_lectern(player, item, block);\r\n//         }\r\n//     }\r\n// });\r\n\r\n// アイテム右クリック後\r\nworld.afterEvents.itemUse.subscribe(event => {\r\n    var player = event.source;\r\n    var item = event.itemStack;\r\n    // print(\"itemUse\");\r\n    if (item != undefined) {\r\n        // print(item.typeId);\r\n        if (item.typeId == \"kurokumaft:grimoire_mowing\") {\r\n            mowing_use(player, item);\r\n        } else if (item.typeId == \"kurokumaft:grimoire_music_sound\") {\r\n            music_sound_use(player, item);\r\n        }\r\n    }\r\n});\r\n\r\n// アイテム右クリックリリース後\r\nworld.afterEvents.itemReleaseUse.subscribe(event => {\r\n    var player = event.source;\r\n    var item = event.itemStack;\r\n    var duration = event.useDuration;\r\n    // print(\"itemReleaseUse\");\r\n    if (item != undefined) {\r\n        // print(item.typeId);\r\n        world.sendMessage(\"残り使用時間:\" + duration);\r\n        if (player.getDynamicProperty(\"summon_grimoire\")) {\r\n            grimoire_summon_Release(player, item, duration);\r\n        }\r\n        if (player.getDynamicProperty(\"BowShotMagicCharge\")) {\r\n            magicBowShot(player, item, duration);\r\n        }\r\n        if (player.getDynamicProperty(\"gunCharge\") == \"full\") {\r\n            player.setDynamicProperty(\"gunCharge\", \"release\");\r\n        }\r\n    }\r\n\r\n});\r\n\r\n// ブロック右クリック後\r\nworld.afterEvents.itemUseOn.subscribe(event => {\r\n    var player = event.source;\r\n    var item = event.itemStack;\r\n    var block = event.block;\r\n    var blockFace = event.blockFace;\r\n    // print(\"itemUseOnAf\");\r\n    // print(block.typeId);\r\n    if (item != undefined) {\r\n        if (item.typeId == \"kurokumaft:grimoire_torchlight\") {\r\n            torchlight_use(player, block, item);\r\n        } else if (item.typeId == \"kurokumaft:grimoire_ignited\") {\r\n            ignited_use_af(player, block, blockFace, item);\r\n        } else if (item.typeId == \"kurokumaft:grimoire_water\") {\r\n            water_use(player, block, blockFace, item);\r\n        } else if (item.typeId == \"kurokumaft:grimoire_flower_garden\") {\r\n            flower_garden_use(player, block, blockFace, item);\r\n        } else if (item.typeId == \"kurokumaft:grimoire_growth\") {\r\n            growth_use(player, block, blockFace, item);\r\n        }\r\n    }\r\n});\r\n\r\n// ブロック右クリック前\r\nworld.beforeEvents.itemUseOn.subscribe(event => {\r\n    var player = event.source;\r\n    var item = event.itemStack;\r\n    var block = event.block;\r\n    var blockFace = event.blockFace;\r\n    // print(\"itemUseOnBe\");\r\n    // print(block.typeId);\r\n    // print(item.typeId);\r\n    if (item != undefined) {\r\n        if (block.typeId != \"minecraft:tnt\" && item.typeId == \"kurokumaft:grimoire_ignited\") {\r\n            ignited_use_be(player, block, blockFace, item);\r\n        }\r\n    }\r\n});\r\n\r\n// ブロック破壊前\r\nworld.beforeEvents.playerBreakBlock.subscribe(event => {\r\n    var player = event.player;\r\n    var block = event.block;\r\n    // print(\"playerBreakBlock\");\r\n    if (player != undefined) {\r\n        // print(block.typeId);\r\n        if (block.typeId == \"kurokumaft:magic_lectern\") {\r\n            magic_lectern_break(player, block);\r\n        }\r\n    }\r\n});\r\n\r\n// エンティティ読み込み\r\nworld.afterEvents.entityLoad.subscribe(event => {\r\n    var entity = event.entity;\r\n});\r\n\r\n// エンティティスポーン\r\nworld.afterEvents.entitySpawn.subscribe(event => {\r\n    // print(\"entitySpawn\");\r\n    var entity = event.entity;\r\n    var cause = event.cause;\r\n    // print(entity.typeId);\r\n    // print(cause);\r\n});\r\n\r\n","import { system,Player,Entity,EntityComponentTypes,ItemComponentTypes,EntityEquippableComponent,EquipmentSlot,\r\n    ItemDurabilityComponent,EntityApplyDamageOptions\r\n } from \"@minecraft/server\";\r\nimport { playsound, durabilityDamage, breakItem } from \"../../../common/commonUtil\"\r\n\r\n// シールドガード\r\n/**\r\n * @param {Player} player\r\n * @param {Boolean} range\r\n */\r\nfunction shieldGuard(player:Player, range:Boolean) {\r\n    let equ = player.getComponent(EntityComponentTypes.Equippable) as EntityEquippableComponent;\r\n    let offhand = equ.getEquipment(EquipmentSlot.Offhand);\r\n    let mainhand = equ.getEquipment(EquipmentSlot.Mainhand);\r\n    if (player.isSneaking) {\r\n        // シールド耐久\r\n        if (offhand != undefined && (offhand.typeId.indexOf(\"_shield\") != -1)) {\r\n            let dur = offhand.getComponent(ItemComponentTypes.Durability) as ItemDurabilityComponent;\r\n            if (dur.maxDurability > (dur.damage + 1)) {\r\n                durabilityDamage(player, offhand, \"slot.weapon.offhand\", EquipmentSlot.Offhand, 1);\r\n                playsound(player, \"item.shield.block\");\r\n            } else {\r\n                breakItem(player, \"slot.weapon.offhand\");\r\n            }\r\n        } else if (mainhand != undefined && (mainhand.typeId.indexOf(\"_shield\") != -1)) {\r\n            let dur = mainhand.getComponent(ItemComponentTypes.Durability) as ItemDurabilityComponent;\r\n            if (dur.maxDurability > (dur.damage + 1)) {\r\n                durabilityDamage(player, mainhand, \"slot.weapon.mainhand\", EquipmentSlot.Mainhand, 1);\r\n                playsound(player, \"item.shield.block\");\r\n            } else {\r\n                breakItem(player, \"slot.weapon.mainhand\");\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n// シールドカウンター\r\n/**\r\n * @param {Player} player\r\n * @param {Entity} damager\r\n */\r\nfunction shieldCounter(player:Player, damager:Entity) {\r\n    let equ = player.getComponent(EntityComponentTypes.Equippable) as EntityEquippableComponent;\r\n    let offhand = equ.getEquipment(EquipmentSlot.Offhand);\r\n    let mainhand = equ.getEquipment(EquipmentSlot.Mainhand);\r\n    if (player.isSneaking) {\r\n        // 火の盾\r\n        if (offhand != undefined && offhand.typeId == \"kurokumaft:fire_magic_shield\") {\r\n            damager.applyDamage(3,{\"cause\":\"lava\"} as EntityApplyDamageOptions);\r\n            damager.runCommand(\"particle kurokumaft:mobflame_firing ~~~\");\r\n            let intervalNum = system.runInterval(() => {\r\n                if (damager) {\r\n                    let health = damager.getComponent(EntityComponentTypes.Health);\r\n                    if (health) {\r\n                        damager.applyDamage(3,{\"cause\":\"lava\"} as EntityApplyDamageOptions);\r\n                        damager.runCommand(\"particle kurokumaft:mobflame_firing ~~~\");\r\n                    }\r\n                }\r\n            }, 5);\r\n            system.runTimeout(() => {\r\n                system.clearRun(intervalNum);\r\n            }, 15);\r\n        } else if (mainhand != undefined && mainhand.typeId == \"kurokumaft:fire_magic_shield\") {\r\n            damager.applyDamage(3,{\"cause\":\"lava\"} as EntityApplyDamageOptions);\r\n            damager.runCommand(\"particle kurokumaft:mobflame_firing ~~~\");\r\n            let intervalNum = system.runInterval(() => {\r\n                if (damager) {\r\n                    let health = damager.getComponent(EntityComponentTypes.Health);\r\n                    if (health) {\r\n                        damager.applyDamage(3,{\"cause\":\"lava\"} as EntityApplyDamageOptions);\r\n                        damager.runCommand(\"particle kurokumaft:mobflame_firing ~~~\");\r\n                    }\r\n                }\r\n            }, 5);\r\n            system.runTimeout(() => {\r\n                system.clearRun(intervalNum);\r\n            }, 15);\r\n        }\r\n        // 水の盾\r\n        if (offhand != undefined && offhand.typeId == \"kurokumaft:water_magic_shield\") {\r\n            damager.applyDamage(1,{\"cause\":\"drowning\"} as EntityApplyDamageOptions);\r\n            damager.runCommand(\"particle kurokumaft:water_sword_particle ~~~\");\r\n            damager.addEffect(\"weakness\",600,{\"amplifier\":1,\"showParticles\":true});\r\n        } else if (mainhand != undefined && mainhand.typeId == \"kurokumaft:water_magic_shield\") {\r\n            damager.applyDamage(1,{\"cause\":\"drowning\"} as EntityApplyDamageOptions);\r\n            damager.runCommand(\"particle kurokumaft:water_sword_particle ~~~\");\r\n            damager.addEffect(\"weakness\",600,{\"amplifier\":1,\"showParticles\":true});\r\n        }\r\n        // 風の盾\r\n        if (offhand != undefined && offhand.typeId == \"kurokumaft:wind_magic_shield\") {\r\n            let view = player.getViewDirection();\r\n            damager.applyDamage(1,{\"cause\":\"fall\"} as EntityApplyDamageOptions);\r\n            damager.runCommand(\"particle kurokumaft:aero_bomb_short_particle ~~~\");\r\n            damager.applyKnockback(Math.round(view.x)*10,Math.round(view.z)*10,10,1);\r\n        } else if (mainhand != undefined && mainhand.typeId == \"kurokumaft:wind_magic_shield\") {\r\n            let view = player.getViewDirection();\r\n            damager.applyDamage(1,{\"cause\":\"fall\"} as EntityApplyDamageOptions);\r\n            damager.runCommand(\"particle kurokumaft:aero_bomb_short_particle ~~~\");\r\n            damager.applyKnockback(Math.round(view.x)*10,Math.round(view.z)*10,10,1);\r\n        }\r\n        // 雷の盾\r\n        if (offhand != undefined && offhand.typeId == \"kurokumaft:thunder_magic_shield\") {\r\n            damager.applyDamage(3,{\"cause\":\"lightning\"} as EntityApplyDamageOptions);\r\n            damager.runCommand(\"particle minecraft:snowflake_particle ~~~\");\r\n            let intervalNum = system.runInterval(() => {\r\n                if (damager) {\r\n                    let health = damager.getComponent(EntityComponentTypes.Health);\r\n                    if (health) {\r\n                        damager.applyDamage(3,{\"cause\":\"lightning\"} as EntityApplyDamageOptions);\r\n                        damager.runCommand(\"particle minecraft:snowflake_particle ~~~\");\r\n                    }\r\n                }\r\n            }, 5);\r\n            system.runTimeout(() => {\r\n                system.clearRun(intervalNum);\r\n            }, 15);\r\n        } else if (mainhand != undefined && mainhand.typeId == \"kurokumaft:thunder_magic_shield\") {\r\n            damager.applyDamage(3,{\"cause\":\"lightning\"} as EntityApplyDamageOptions);\r\n            damager.runCommand(\"particle kurokumaft:thunder_sword_particle ~~~\");\r\n            let intervalNum = system.runInterval(() => {\r\n                if (damager) {\r\n                    let health = damager.getComponent(EntityComponentTypes.Health);\r\n                    if (health) {\r\n                        damager.applyDamage(3,{\"cause\":\"lightning\"} as EntityApplyDamageOptions);\r\n                        damager.runCommand(\"particle kurokumaft:thunder_sword_particle ~~~\");\r\n                    }\r\n                }\r\n            }, 5);\r\n            system.runTimeout(() => {\r\n                system.clearRun(intervalNum);\r\n            }, 15);\r\n        }\r\n        // 岩の盾\r\n        if (offhand != undefined && offhand.typeId == \"kurokumaft:stone_magic_shield\") {\r\n            let view = player.getViewDirection();\r\n            damager.applyDamage(1,{\"cause\":\"piston\"} as EntityApplyDamageOptions);\r\n            damager.runCommand(\"particle kurokumaft:grey_bomb_short_particle ~~~\");\r\n            damager.applyKnockback(Math.round(view.x)*10,Math.round(view.z)*10,10,1);\r\n        } else if (mainhand != undefined && mainhand.typeId == \"kurokumaft:stone_magic_shield\") {\r\n            let view = player.getViewDirection();\r\n            damager.applyDamage(1,{\"cause\":\"piston\"} as EntityApplyDamageOptions);\r\n            damager.runCommand(\"particle kurokumaft:grey_bomb_short_particle ~~~\");\r\n            damager.applyKnockback(Math.round(view.x)*10,Math.round(view.z)*10,10,1);\r\n        }\r\n        // 氷の盾\r\n        if (offhand != undefined && offhand.typeId == \"kurokumaft:ice_magic_shield\") {\r\n            damager.applyDamage(1,{\"cause\":\"freezing\"} as EntityApplyDamageOptions);\r\n            damager.runCommand(\"particle kurokumaft:ice_sword_particle ~~~\");\r\n            damager.addEffect(\"slowness\",200,{\"amplifier\":1,\"showParticles\":false});\r\n        } else if (mainhand != undefined && mainhand.typeId == \"kurokumaft:ice_magic_shield\") {\r\n            damager.applyDamage(1,{\"cause\":\"freezing\"} as EntityApplyDamageOptions);\r\n            damager.runCommand(\"particle kurokumaft:ice_sword_particle ~~~\");\r\n            damager.addEffect(\"slowness\",200,{\"amplifier\":1,\"showParticles\":false});\r\n        }\r\n    }\r\n};\r\n\r\nexport { shieldGuard, shieldCounter };\r\n","import { world,system,Player,Entity,ItemStack,EntityComponentTypes,ItemComponentTypes,EntityEquippableComponent,EquipmentSlot,ItemEnchantableComponent,ItemDurabilityComponent, Vector2, Vector3} from \"@minecraft/server\";\r\n\r\nconst CraftBlocks = [\"minecraft:crafting_table\",\"minecraft:anvil\",\"minecraft:smithing_table\",\"minecraft:cartography_table\",\"minecraft:loom\",\"minecraft:barrel\"\r\n                    ,\"minecraft:smoker\",\"minecraft:blast_furnace\",\"minecraft:furnace\",\"kurokumaft:magic_lectern\"];\r\n\r\n// デバッグ用\r\n/**\r\n * @param {Object} text\r\n */\r\nfunction print(text:Object) {\r\n    world.sendMessage(text + \"\");\r\n};\r\n\r\n// 制限\r\n/**\r\n * @param {number} min\r\n * @param {number} max\r\n */\r\nfunction clamp(value:number, min:number, max:number) {\r\n    return Math.min(Math.max(value, min), max);\r\n};\r\n\r\n// 乱数\r\n/**\r\n * @param {number} min\r\n * @param {number} max\r\n */\r\nfunction getRandomInRange(min:number, max:number) {\r\n    return Math.random() * (max - min) + min;\r\n}\r\n\r\n// サウンド再生\r\n/**\r\n * @param {Entity} entity\r\n * @param {String} sound\r\n */\r\nfunction playsound(entity:Entity, sound:String) {\r\n    let commandText =  \"playsound \" + sound + \" @s\";\r\n    entity.runCommandAsync(commandText);\r\n};\r\n\r\n// 耐久値減少\r\n/**\r\n * @param {Player} player\r\n * @param {ItemStack} item\r\n * @param {String} slotName\r\n * @param {EquipmentSlot} slot\r\n * @param {number} damage\r\n */\r\nfunction durabilityDamage(player:Player, item:ItemStack, slotName:String, slot:EquipmentSlot, damage:number) {\r\n    let dur = item.getComponent(ItemComponentTypes.Durability) as ItemDurabilityComponent;\r\n    let enc = item.getComponent(ItemComponentTypes.Enchantable) as ItemEnchantableComponent;\r\n    let encs = null;\r\n    if (enc) {\r\n        encs = enc.getEnchantments();\r\n    }\r\n    let commandText =  \"replaceitem entity @s \" + slotName + \" 0 \" + item.typeId + \" 1 \" + (dur.damage + damage);\r\n    player.runCommand(commandText);\r\n\r\n    if (encs) {\r\n        let intervalNum = system.runInterval(() => {\r\n            let reEqu = player.getComponent(EntityComponentTypes.Equippable) as EntityEquippableComponent;\r\n            let reItem = reEqu.getEquipment(slot) as ItemStack ;\r\n            let reEnc = reItem.getComponent(ItemComponentTypes.Enchantable) as ItemEnchantableComponent;\r\n            for (let i=0;i<encs.length;i++) {\r\n                reEnc.addEnchantment(encs[i]);\r\n            }\r\n        \r\n            reEqu.setEquipment(slot, reItem);\r\n        \r\n        }, 2);\r\n        system.runTimeout(() => {\r\n            system.clearRun(intervalNum);\r\n        }, 3);\r\n    }\r\n};\r\n\r\n// アイテム破壊\r\n/**\r\n * @param {Player} player\r\n * @param {String} slotName\r\n */\r\nfunction breakItem(player:Player, slotName:String) {\r\n    let commandText =  \"replaceitem entity @s \" + slotName + \" 0 destroy air\";\r\n    player.runCommand(commandText);\r\n};\r\n\r\n// ミュージックレコード\r\nconst MusicRecodes = Object.freeze([\r\n    \"record.5\",\r\n    \"record.relic\",\r\n    \"record.13\",\r\n    \"record.cat\",\r\n    \"record.blocks\",\r\n    \"record.chirp\",\r\n    \"record.far\",\r\n    \"record.mall\",\r\n    \"record.mellohi\",\r\n    \"record.stal\",\r\n    \"record.strad\",\r\n    \"record.ward\",\r\n    \"record.11\",\r\n    \"record.wait\",\r\n    \"record.pigstep\",\r\n    \"record.otherside\"\r\n]);\r\n\r\n/**\r\n * 視線位置\r\n * @param {Vector2} rotation\r\n * @param {Vector3} location\r\n * @param {number} point\r\n */\r\nfunction getLookPoints(rotation:Vector2, location:Vector3, point:number) {\r\n    let piNum = 90;\r\n    let xlocation;\r\n    let ylocation;\r\n    let zlocation;\r\n\r\n    // 西～北\r\n    if (rotation.y >= -90 && rotation.y < 0) {\r\n        let yRotax = -rotation.y / piNum;\r\n        let yRotaz = (rotation.y + 90) / piNum;\r\n        let yRota = -(rotation.x / piNum);\r\n        // 上～正面\r\n        if (rotation.x >= -90 && rotation.x < 0) {\r\n            let xRota = (rotation.x + 90) / piNum;\r\n            xlocation = location.x + (yRotax * xRota) * point;\r\n            ylocation = (location.y + 1.5) + (yRota) * point;\r\n            zlocation = location.z + (yRotaz * xRota) * point;\r\n\r\n        // 正面～下\r\n        } else if (rotation.x >= 0 && rotation.x <= 90) {\r\n            let xRota = -(rotation.x - 90) / piNum;\r\n            xlocation = location.x + (yRotax * xRota) * point;\r\n            ylocation = (location.y + 1.5) + (yRota) * point;\r\n            zlocation = location.z + (yRotaz * xRota) * point;\r\n        }\r\n\r\n    // 北～東\r\n    } else if (rotation.y >= 0 && rotation.y <= 90) {\r\n\r\n        let yRotax = rotation.y / piNum;\r\n        let yRotaz = -(rotation.y - 90) / piNum;\r\n        let yRota = -(rotation.x / piNum);\r\n        // 上～正面\r\n        if (rotation.x >= -90 && rotation.x < 0) {\r\n            let xRota = (rotation.x + 90) / piNum;\r\n            xlocation = location.x - (yRotax * xRota) * point;\r\n            ylocation = (location.y + 1.5) + (yRota) * point;\r\n            zlocation = location.z + (yRotaz * xRota) * point;\r\n        // 正面～下\r\n        } else if (rotation.x >= 0 && rotation.x <= 90) {\r\n            let xRota = -(rotation.x - 90) / piNum;\r\n            xlocation = location.x - (yRotax * xRota) * point;\r\n            ylocation = (location.y + 1.5) + (yRota) * point;\r\n            zlocation = location.z + (yRotaz * xRota) * point;\r\n        }\r\n\r\n    // 西～南\r\n    } else if (rotation.y < -90 && rotation.y > -180) {\r\n\r\n        let yRotax = (rotation.y + 180) / piNum;\r\n        let yRotaz = (rotation.y + 90) / piNum;\r\n        let yRota = -(rotation.x / piNum);\r\n        // 上～正面\r\n        if (rotation.x >= -90 && rotation.x < 0) {\r\n            let xRota = (rotation.x + 90) / piNum;\r\n            xlocation = location.x + (yRotax * xRota) * point;\r\n            ylocation = (location.y + 1.5) + (yRota) * point;\r\n            zlocation = location.z + (yRotaz * xRota) * point;\r\n\r\n        // 正面～下\r\n        } else if (rotation.x >= 0 && rotation.x <= 90) {\r\n            let xRota = -(rotation.x - 90) / piNum;\r\n            xlocation = location.x + (yRotax * xRota) * point;\r\n            ylocation = (location.y + 1.5) + (yRota) * point;\r\n            zlocation = location.z + (yRotaz * xRota) * point;\r\n        }\r\n\r\n    // 東～南\r\n    } else if (rotation.y > 90 && rotation.y <= 180) {\r\n        let yRotax = -(rotation.y - 180) / piNum;\r\n        let yRotaz = -(rotation.y - 90) / piNum;\r\n        let yRota = -(rotation.x / piNum);\r\n        // 上～正面\r\n        if (rotation.x >= -90 && rotation.x < 0) {\r\n            let xRota = (rotation.x + 90) / piNum;\r\n            xlocation = location.x - (yRotax * xRota) * point;\r\n            ylocation = (location.y + 1.5) + (yRota) * point;\r\n            zlocation = location.z + (yRotaz * xRota) * point;\r\n        // 正面～下\r\n        } else if (rotation.x >= 0 && rotation.x <= 90) {\r\n            let xRota = -(rotation.x - 90) / piNum;\r\n            xlocation = location.x - (yRotax * xRota) * point;\r\n            ylocation = (location.y + 1.5) + (yRota) * point;\r\n            zlocation = location.z + (yRotaz * xRota) * point;\r\n        }\r\n\r\n    }\r\n    return { xlocation, ylocation, zlocation };\r\n}\r\n\r\nexport { print, clamp, getRandomInRange, playsound, durabilityDamage, breakItem, getLookPoints, CraftBlocks, MusicRecodes };\r\n","import { world,system,Player,Block,Entity,EntityComponentTypes,ItemStack,Direction,ItemComponentTypes,Dimension\r\n    ,EntityInventoryComponent,\r\n    ItemCooldownComponent,\r\n    Container\r\n } from \"@minecraft/server\";\r\nimport { print, CraftBlocks, MusicRecodes } from \"./common/commonUtil\";\r\nimport { ModalFormData } from \"@minecraft/server-ui\";\r\nimport { decrimentGrimoireCount } from \"./common/ItemDurabilityDamage\";\r\n\r\n// 帰還の実で転移\r\n/**\r\n * @param {Player} player\r\n * @param {ItemStack} item\r\n */\r\nfunction home_tp(player:Player, item:ItemStack) {\r\n    let lores = item.getLore();\r\n    if (lores.length > 0 && lores[0].indexOf(\"拠点\") != -1) {\r\n        let entity = world.getEntity(lores[4].substr(3));\r\n        // if (entity != undefined && entity.typeId == \"kurokumaft:home_gate\") {\r\n            let text = \"tp @s \" + lores[1].substr(2) + \" \" + lores[2].substr(2) + \" \" + lores[3].substr(2);\r\n            player.runCommand(text);\r\n        // } else {\r\n        //     print(\"登録した拠点は使用出来ません。\");\r\n        // }\r\n    }\r\n};\r\n\r\n// ホームゲートに転移場所設定\r\n/**\r\n * @param {Player} player\r\n * @param {ItemStack} item\r\n * @param {Entity} target\r\n */\r\nfunction homeSetDialog(player:Player, item:ItemStack, target:Entity) {\r\n\r\n    let modalForm = new ModalFormData().title(\"拠点名を入力\");\r\n    modalForm.textField('拠点名', '');\r\n    modalForm\r\n        .show(player)\r\n        .then(formData => {\r\n            // player.sendMessage(`Modal form results: ${JSON.stringify(formData.formValues, undefined, 2)}`);\r\n            if (!formData.formValues) {\r\n                return;\r\n            }\r\n            item.setLore([\"拠点:\" + formData.formValues[0],\"x:\"+target.location.x,\"y:\"+target.location.y,\"x:\"+target.location.z,\"id:\"+target.id]);\r\n            let inventory = player.getComponent(EntityComponentTypes.Inventory) as EntityInventoryComponent;\r\n            if (inventory && inventory.container) {\r\n                inventory.container.setItem(player.selectedSlotIndex, item);\r\n                target.addTag(\"home_gate_set\");\r\n                player.sendMessage(`拠点を登録しました。`)\r\n            }\r\n        })\r\n        .catch((error) => {\r\n            return -1;\r\n        });\r\n};\r\n\r\n// 魔導書（トーチ）使用\r\n/**\r\n * @param {Player} player\r\n * @param {Block} block\r\n * @param {ItemStack} item\r\n */\r\nfunction torchlight_use(player:Player, block:Block, item:ItemStack) {\r\n    // print(block.typeId);\r\n    if ((block.typeId.indexOf(\"chest\") == -1) && (block.typeId.indexOf(\"boat\") == -1) && (CraftBlocks.indexOf(block.typeId) == -1)) {\r\n        decrimentGrimoireCount(player, item);\r\n \r\n    }\r\n};\r\n\r\nconst BlockLocationList = Object.freeze([\r\n    {\r\n        direction: Direction.Up,\r\n        location: {x:0,y:1,z:0}\r\n    },\r\n    {\r\n        direction: Direction.Down,\r\n        location: {x:0,y:-1,z:0}\r\n    },\r\n    {\r\n        direction: Direction.South,\r\n        location: {x:0,y:0,z:1}\r\n    },\r\n    {\r\n        direction: Direction.North,\r\n        location: {x:0,y:0,z:-1}\r\n    },\r\n    {\r\n        direction: Direction.East,\r\n        location: {x:1,y:0,z:0}\r\n    },\r\n    {\r\n        direction: Direction.West,\r\n        location: {x:-1,y:0,z:0}\r\n    }\r\n\r\n]);\r\n\r\n// 魔導書（イグナイテッド）使用\r\n/**\r\n * @param {Player} player\r\n * @param {Block} block\r\n * @param {Direction} direction\r\n * @param {ItemStack} item\r\n */\r\nfunction ignited_use_af(player:Player, block:Block, direction:Direction, item:ItemStack) {\r\n\r\n    // print(item.typeId);\r\n    // print(block.typeId);\r\n    let blockPer = block.permutation;\r\n    let extinguished = blockPer.getState(\"extinguished\");\r\n    let lit = blockPer.getState(\"lit\");\r\n    let blockDim = block.dimension as Dimension;\r\n    let bx = block.location.x;\r\n    let by = block.location.y;\r\n    let bz = block.location.z;\r\n\r\n    let setFireF = false;\r\n    let setLocation = \"\";\r\n\r\n    if ((CraftBlocks.indexOf(block.typeId) != -1)) {\r\n        return;\r\n    }\r\n    if (extinguished) {\r\n        block.setPermutation(blockPer.withState(\"extinguished\", false));\r\n        setFireF = true;\r\n    } else if (lit != undefined && !lit) {\r\n        block.setPermutation(blockPer.withState(\"lit\", true));\r\n        setFireF = true;\r\n    } else {\r\n        BlockLocationList.forEach(obj => {\r\n            if (obj.direction == direction) {\r\n                let vec = {\"x\":bx+obj.location.x,\"y\":by+obj.location.y,\"z\":bz+obj.location.z};\r\n                // print(blockDim.getBlock(vec));\r\n                let dimeBlock = blockDim.getBlock(vec) as Block;\r\n                if(dimeBlock.isAir) {\r\n                    setLocation = (bx+obj.location.x) + \" \" + (by+obj.location.y) + \" \" + (bz+obj.location.z);\r\n                    player.runCommand(\"setblock \" + setLocation + \" minecraft:fire [\\\"age\\\"=0]\");\r\n                    setFireF = true;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    if (setFireF) {\r\n        decrimentGrimoireCount(player, item);\r\n    }\r\n\r\n};\r\n\r\n// 魔導書（イグナイテッド）使用(tnt着火用)\r\n/**\r\n * @param {Player} player\r\n * @param {Block} block\r\n * @param {Direction} direction\r\n * @param {ItemStack} item\r\n */\r\nfunction ignited_use_be(player:Player, block:Block, direction:Direction, item:ItemStack) {\r\n\r\n    // print(item.typeId);\r\n    // print(block.typeId);\r\n    let bx = block.location.x;\r\n    let by = block.location.y;\r\n    let bz = block.location.z;\r\n\r\n    if ((CraftBlocks.indexOf(block.typeId) != -1)) {\r\n        return;\r\n    }\r\n\r\n    if (block.typeId == \"minecraft:tnt\") {\r\n        // print(\"tnt spawn\");\r\n        player.runCommand(\"setblock \" + bx + \" \" + by + \" \" + bz + \" minecraft:air\");\r\n        player.runCommand(\"summon minecraft:tnt \" + bx + \" \" + by + \" \" + bz + \" ~ ~ from_explosion\");\r\n\r\n        decrimentGrimoireCount(player, item);\r\n    \r\n    }\r\n\r\n};\r\n\r\n// 魔導書（ウォーター）使用\r\n/**\r\n * @param {Player} player\r\n * @param {Block} block\r\n * @param {Direction} direction\r\n * @param {ItemStack} item\r\n */\r\nfunction water_use(player:Player, block:Block, direction:Direction, item:ItemStack) {\r\n\r\n    // print(item.typeId);\r\n    // print(block.typeId);\r\n    let blockPer = block.permutation;\r\n    let cauldron = blockPer.getState(\"cauldron_liquid\");\r\n    let blockDim = block.dimension;\r\n    let bx = block.location.x;\r\n    let by = block.location.y;\r\n    let bz = block.location.z;\r\n\r\n    let setFireF = false;\r\n    let setLocation = \"\";\r\n\r\n    if ((CraftBlocks.indexOf(block.typeId) != -1)) {\r\n        return;\r\n    }\r\n    if (cauldron) {\r\n        block.setPermutation(blockPer.withState(\"cauldron_liquid\", \"water\"));\r\n        block.setPermutation(blockPer.withState(\"fill_level\", 6));\r\n        setFireF = true;\r\n    } else {\r\n        BlockLocationList.forEach(obj => {\r\n            if (obj.direction == direction) {\r\n                let vec = {\"x\":bx+obj.location.x,\"y\":by+obj.location.y,\"z\":bz+obj.location.z};\r\n                // print(blockDim.getBlock(vec));\r\n                let dimeBlock = blockDim.getBlock(vec) as Block;\r\n                if(dimeBlock.isAir) {\r\n                    setLocation = (bx+obj.location.x) + \" \" + (by+obj.location.y) + \" \" + (bz+obj.location.z);\r\n                    setFireF = true;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    if (setFireF) {\r\n        player.runCommand(\"setblock \" + setLocation + \" minecraft:flowing_water [\\\"liquid_depth\\\"=0]\");\r\n        decrimentGrimoireCount(player, item);\r\n    }\r\n\r\n};\r\n\r\nconst FlowerBlockS = Object.freeze([\r\n    \"\",\r\n    \"\",\r\n    \"\",\r\n    \"\",\r\n    \"\",\r\n    \"\",\r\n    \"\",\r\n    \"minecraft:tallgrass\",\r\n    \"minecraft:poppy\",\r\n    \"minecraft:blue_orchid\",\r\n    \"minecraft:allium\",\r\n    \"minecraft:azure_bluet\",\r\n    \"minecraft:red_tulip\",\r\n    \"minecraft:orange_tulip\",\r\n    \"minecraft:white_tulip\",\r\n    \"minecraft:pink_tulip\",\r\n    \"minecraft:oxeye_daisy\",\r\n    \"minecraft:cornflower\",\r\n    \"minecraft:lily_of_the_valley\",\r\n    \"minecraft:yellow_flower\",\r\n    \"minecraft:double_plant [\\\"double_plant_type\\\"=\\\"sunflower\\\", \\\"upper_block_bit\\\"=false]\",\r\n    \"minecraft:double_plant [\\\"double_plant_type\\\"=\\\"syringa\\\", \\\"upper_block_bit\\\"=false]\",\r\n    \"minecraft:double_plant [\\\"double_plant_type\\\"=\\\"grass\\\", \\\"upper_block_bit\\\"=false]\",\r\n    \"minecraft:double_plant [\\\"double_plant_type\\\"=\\\"fern\\\", \\\"upper_block_bit\\\"=false]\",\r\n    \"minecraft:double_plant [\\\"double_plant_type\\\"=\\\"rose\\\", \\\"upper_block_bit\\\"=false]\",\r\n    \"minecraft:double_plant [\\\"double_plant_type\\\"=\\\"paeonia\\\", \\\"upper_block_bit\\\"=false]\"\r\n]);\r\n\r\n// 魔導書（フラワーガーデン）使用\r\n/**\r\n * @param {Player} player\r\n * @param {Block} block\r\n * @param {Direction} direction\r\n * @param {ItemStack} item\r\n */\r\nfunction flower_garden_use(player:Player, block:Block, direction:Direction, item:ItemStack) {\r\n\r\n    // print(item.typeId);\r\n    // print(block.typeId);\r\n    let blockPer = block.permutation;\r\n    let blockDim = block.dimension;\r\n    let bx = block.location.x;\r\n    let by = block.location.y;\r\n    let bz = block.location.z;\r\n\r\n    let itemCool = item.getComponent(ItemComponentTypes.Cooldown) as ItemCooldownComponent;\r\n\r\n    let setFireF = false;\r\n\r\n    if (itemCool.getCooldownTicksRemaining(player) != 0) {\r\n        return;\r\n    }\r\n    if ((CraftBlocks.indexOf(block.typeId) != -1)) {\r\n        return;\r\n    }\r\n    if (block.typeId == \"minecraft:grass_block\") {\r\n        if (direction == Direction.Up) {\r\n            player.runCommand(\"particle kurokumaft:flower_garden_growth_emitter ~~~\");\r\n            itemCool.startCooldown(player);\r\n            let xpcount1 = 0;\r\n            let intervalNumXP = system.runInterval(() => {\r\n                for (let z=0; z<8;z++) {\r\n                    let vec = {\"x\":bx+xpcount1,\"y\":by,\"z\":bz+z};\r\n                    let upvec = {\"x\":bx+xpcount1,\"y\":by+1,\"z\":bz+z};\r\n                    let dupvec = {\"x\":bx+xpcount1,\"y\":by+2,\"z\":bz+z};\r\n\r\n                    let dimeBlock = blockDim.getBlock(vec) as Block;\r\n                    let updimeBlock = blockDim.getBlock(upvec) as Block;\r\n                    if(dimeBlock.typeId == \"minecraft:grass_block\" && updimeBlock.isAir) {\r\n                        let randomBlock = FlowerBlockS[Math.floor(Math.random() * FlowerBlockS.length)];\r\n                        if (randomBlock == \"\") {\r\n                            continue;\r\n                        }\r\n                        let dupdimeBlock = blockDim.getBlock(dupvec) as Block;\r\n                        while (randomBlock.indexOf(\"double\") != -1 && !dupdimeBlock.isAir) {\r\n                            randomBlock = FlowerBlockS[Math.floor(Math.random() * FlowerBlockS.length)];\r\n                        }\r\n                        player.runCommand(\"setblock \" + (bx+xpcount1) + \" \" + (by+1) + \" \" + (bz+z) + \" \" + randomBlock);\r\n                        setFireF = true;\r\n                    }\r\n                }\r\n\r\n                xpcount1++;\r\n\r\n            }, 1);\r\n\r\n            let xmcount1 = 0;\r\n            let intervalNumXM = system.runInterval(() => {\r\n                for (let z=0; z<8;z++) {\r\n                    let vec = {\"x\":bx+xmcount1,\"y\":by,\"z\":bz+z};\r\n                    let upvec = {\"x\":bx+xmcount1,\"y\":by+1,\"z\":bz+z};\r\n                    let dupvec = {\"x\":bx+xmcount1,\"y\":by+2,\"z\":bz+z};\r\n\r\n                    let dimeBlock = blockDim.getBlock(vec) as Block;\r\n                    let updimeBlock = blockDim.getBlock(upvec) as Block;\r\n                    if(dimeBlock.typeId == \"minecraft:grass_block\" && updimeBlock.isAir) {\r\n                        let randomBlock = FlowerBlockS[Math.floor(Math.random() * FlowerBlockS.length)];\r\n                        if (randomBlock == \"\") {\r\n                            continue;\r\n                        }\r\n                        let dupdimeBlock = blockDim.getBlock(dupvec) as Block;\r\n                        while (randomBlock.indexOf(\"double\") != -1 && !dupdimeBlock.isAir) {\r\n                            randomBlock = FlowerBlockS[Math.floor(Math.random() * FlowerBlockS.length)];\r\n                        }\r\n                        player.runCommand(\"setblock \" + (bx+xmcount1) + \" \" + (by+1) + \" \" + (bz+z) + \" \" + randomBlock);\r\n                        setFireF = true;\r\n                    }\r\n                }\r\n                xmcount1--;\r\n\r\n            }, 1);\r\n\r\n            let xpcount2 = 0;\r\n            let intervalNumZP = system.runInterval(() => {\r\n                for (let z=-1; z>-8;z--) {\r\n                    let vec = {\"x\":bx+xpcount2,\"y\":by,\"z\":bz+z};\r\n                    let upvec = {\"x\":bx+xpcount2,\"y\":by+1,\"z\":bz+z};\r\n                    let dupvec = {\"x\":bx+xpcount2,\"y\":by+2,\"z\":bz+z};\r\n\r\n                    let dimeBlock = blockDim.getBlock(vec) as Block;\r\n                    let updimeBlock = blockDim.getBlock(upvec) as Block;\r\n                    if(dimeBlock.typeId == \"minecraft:grass_block\" && updimeBlock.isAir) {\r\n                        let randomBlock = FlowerBlockS[Math.floor(Math.random() * FlowerBlockS.length)];\r\n                        if (randomBlock == \"\") {\r\n                            continue;\r\n                        }\r\n                        let dupdimeBlock = blockDim.getBlock(dupvec) as Block;\r\n                        while (randomBlock.indexOf(\"double\") != -1 && !dupdimeBlock.isAir) {\r\n                            randomBlock = FlowerBlockS[Math.floor(Math.random() * FlowerBlockS.length)];\r\n                        }\r\n                        player.runCommand(\"setblock \" + (bx+xpcount2) + \" \" + (by+1) + \" \" + (bz+z) + \" \" + randomBlock);\r\n                        setFireF = true;\r\n                    }\r\n                }\r\n\r\n                xpcount2++;\r\n\r\n            }, 1);\r\n\r\n            let xmcount2 = 0;\r\n            let intervalNumZM = system.runInterval(() => {\r\n                for (let z=-1; z>-8;z--) {\r\n                    let vec = {\"x\":bx+xmcount2,\"y\":by,\"z\":bz+z};\r\n                    let upvec = {\"x\":bx+xmcount2,\"y\":by+1,\"z\":bz+z};\r\n                    let dupvec = {\"x\":bx+xmcount2,\"y\":by+2,\"z\":bz+z};\r\n\r\n                    let dimeBlock = blockDim.getBlock(vec) as Block;\r\n                    let updimeBlock = blockDim.getBlock(upvec) as Block;\r\n                    if(dimeBlock.typeId == \"minecraft:grass_block\" && updimeBlock.isAir) {\r\n                        let randomBlock = FlowerBlockS[Math.floor(Math.random() * FlowerBlockS.length)];\r\n                        if (randomBlock == \"\") {\r\n                            continue;\r\n                        }\r\n                        let dupdimeBlock = blockDim.getBlock(dupvec) as Block;\r\n                        while (randomBlock.indexOf(\"double\") != -1 && !dupdimeBlock.isAir) {\r\n                            randomBlock = FlowerBlockS[Math.floor(Math.random() * FlowerBlockS.length)];\r\n                        }\r\n                        player.runCommand(\"setblock \" + (bx+xmcount2) + \" \" + (by+1) + \" \" + (bz+z) + \" \" + randomBlock);\r\n                        setFireF = true;\r\n                    }\r\n                }\r\n\r\n                xmcount2--;\r\n\r\n            }, 1);\r\n\r\n            system.runTimeout(() => {\r\n                system.clearRun(intervalNumXP);\r\n                system.clearRun(intervalNumZP);\r\n                system.clearRun(intervalNumXM);\r\n                system.clearRun(intervalNumZM);\r\n\r\n                if (setFireF) {\r\n                    decrimentGrimoireCount(player, item);\r\n                }\r\n            }, 15);\r\n        }\r\n    }\r\n\r\n};\r\n\r\nconst wood_sapling = Object.freeze([\r\n    \"minecraft:oak_sapling\",\r\n    \"minecraft:spruce_sapling\",\r\n    \"minecraft:birch_sapling\",\r\n    \"minecraft:jungle_sapling\",\r\n    \"minecraft:acacia_sapling\",\r\n    \"minecraft:dark_oak_sapling\"\r\n]);\r\n\r\n// 魔導書（グロウス）使用\r\n/**\r\n * @param {Player} player\r\n * @param {Block} block\r\n * @param {Direction} direction\r\n * @param {ItemStack} item\r\n */\r\nfunction growth_use(player:Player, block:Block, direction:Direction, item:ItemStack) {\r\n\r\n    let blockPer = block.permutation;\r\n    let blockDim = block.dimension;\r\n    let bx = block.location.x;\r\n    let by = block.location.y;\r\n    let bz = block.location.z;\r\n\r\n    let setFireF = false;\r\n    let setLocation = \"\";\r\n\r\n    if ((CraftBlocks.indexOf(block.typeId) != -1)) {\r\n        return;\r\n    } else if (block.typeId == \"minecraft:bamboo\" || block.typeId == \"minecraft:bamboo_sapling\") {\r\n        if (block.typeId == \"minecraft:bamboo_sapling\") {\r\n            player.runCommand(\"setblock \" + (bx) + \" \" + (by) + \" \" + (bz) + \" minecraft:bamboo\");\r\n        }\r\n        let count = 1;\r\n        let demBlock = blockDim.getBlock({\"x\":bx,\"y\":by+count,\"z\":bz}) as Block;\r\n        while (count <= 15 && (demBlock.typeId == \"minecraft:bamboo\" || demBlock.isAir)) {\r\n            let blockCom = \"minecraft:bamboo [\\\"bamboo_leaf_size\\\"=\\\"no_leaves\\\", \\\"bamboo_stalk_thickness\\\" = \\\"thick\\\"]\";\r\n            if (count > 10) {\r\n                blockCom = \"minecraft:bamboo [\\\"bamboo_leaf_size\\\"=\\\"large_leaves\\\", \\\"bamboo_stalk_thickness\\\" = \\\"thick\\\"]\";\r\n            } else if (count > 5) {\r\n                blockCom = \"minecraft:bamboo [\\\"bamboo_leaf_size\\\"=\\\"small_leaves\\\", \\\"bamboo_stalk_thickness\\\" = \\\"thick\\\"]\";\r\n            }\r\n            player.runCommand(\"setblock \" + (bx) + \" \" + (by+count) + \" \" + (bz) + \" \" + blockCom);\r\n            count++;\r\n        }\r\n        player.runCommand(\"particle minecraft:crop_growth_emitter \" + (bx) + \" \" + (by) + \" \" + (bz));\r\n    } else if (block.typeId == \"minecraft:twisting_vines\") {\r\n        let vin_count = 1;\r\n        let vinBlock = blockDim.getBlock({\"x\":bx,\"y\":by+vin_count,\"z\":bz}) as Block;\r\n        while ((vinBlock.typeId == \"minecraft:twisting_vines\")) {\r\n            vin_count++;\r\n        }\r\n        let air_count = vin_count + 1;\r\n        let air_last = (air_count+15);\r\n        let airBlock = blockDim.getBlock({\"x\":bx,\"y\":by+air_count,\"z\":bz}) as Block;\r\n        while (air_count <= air_last && airBlock.isAir) {\r\n            air_count++;\r\n        }\r\n        player.runCommand(\"fill \" + (bx) + \" \" + (by+vin_count) + \" \" + (bz) + \" \" + (bx) + \" \" + (by+air_count) + \" \" + (bz) + \" minecraft:twisting_vines\");\r\n        player.runCommand(\"particle minecraft:crop_growth_emitter \" + (bx) + \" \" + (by) + \" \" + (bz));\r\n    } else if (block.typeId == \"minecraft:cave_vines\") {\r\n        let up_count = 1;\r\n        let upBlock = blockDim.getBlock({\"x\":bx,\"y\":by+up_count,\"z\":bz}) as Block;\r\n        while ((upBlock.typeId == \"minecraft:cave_vines\")) {\r\n            up_count++;\r\n        }\r\n        let down_count = 0;\r\n        let downBlock = blockDim.getBlock({\"x\":bx,\"y\":by+down_count,\"z\":bz}) as Block;\r\n        while ((downBlock.typeId == \"minecraft:cave_vines\")) {\r\n            down_count--;\r\n        }\r\n        player.runCommand(\"fill \" + (bx) + \" \" + (by+down_count+2) + \" \" + (bz) + \" \" + (bx) + \" \" + (by+up_count-1) + \" \" + (bz) + \" minecraft:cave_vines_body_with_berries\");\r\n        player.runCommand(\"setblock \" + (bx) + \" \" + (by+down_count+1) + \" \" + (bz) + \" minecraft:cave_vines_head_with_berries\");\r\n        player.runCommand(\"particle minecraft:crop_growth_emitter \" + (bx) + \" \" + (by) + \" \" + (bz));\r\n\r\n    } else if (block.typeId == \"minecraft:reeds\") {\r\n        let vin_count = 1;\r\n        let vinBlock = blockDim.getBlock({\"x\":bx,\"y\":by+vin_count,\"z\":bz}) as Block;\r\n        while ((vinBlock.typeId == \"minecraft:reeds\")) {\r\n            vin_count++;\r\n        }\r\n        let air_count = vin_count + 1;\r\n        let air_last = (air_count+15);\r\n        let airBlock = blockDim.getBlock({\"x\":bx,\"y\":by+air_count,\"z\":bz}) as Block;\r\n        while (air_count <= air_last && airBlock.isAir) {\r\n            air_count++;\r\n        }\r\n        player.runCommand(\"fill \" + (bx) + \" \" + (by+vin_count) + \" \" + (bz) + \" \" + (bx) + \" \" + (by+air_count) + \" \" + (bz) + \" minecraft:reeds\");\r\n        player.runCommand(\"particle minecraft:crop_growth_emitter \" + (bx) + \" \" + (by) + \" \" + (bz));\r\n    } else if ((wood_sapling.indexOf(block.typeId) != -1)) {\r\n        let age_bit = blockPer.getState(\"age_bit\");\r\n        if (age_bit) {\r\n\r\n        }\r\n    }\r\n\r\n    if (setFireF) {\r\n        decrimentGrimoireCount(player, item);\r\n    }\r\n\r\n};\r\n\r\nconst MowingBlocks = Object.freeze([\r\n    \"minecraft:bamboo\",\r\n    \"minecraft:bamboo_sapling\",\r\n    \"minecraft:acacia_leaves\",\r\n    \"minecraft:dark_oak_leaves\",\r\n    \"minecraft:oak_leaves\",\r\n    \"minecraft:spruce_leaves\",\r\n    \"minecraft:birch_leaves\",\r\n    \"minecraft:jungle_leaves\",\r\n    \"minecraft:azalea_leaves\",\r\n    \"minecraft:azalea_leaves_flowered\",\r\n    \"minecraft:cherry_leaves\",\r\n    \"minecraft:mangrove_leaves\",\r\n    \"minecraft:reeds\",\r\n    \"minecraft:cave_vines\",\r\n    \"minecraft:cave_vines_body_with_berries\",\r\n    \"minecraft:cave_vines_head_with_berries\",\r\n    \"minecraft:twisting_vines\",\r\n    \"minecraft:wheat\",\r\n    \"minecraft:vine\",\r\n    \"minecraft:pumpkin_stem\",\r\n    \"minecraft:pumpkin\",\r\n    \"minecraft:warped_stem\",\r\n    \"minecraft:crimson_stem\",\r\n    \"minecraft:melon_stem\",\r\n    \"minecraft:melon\",\r\n    \"minecraft:cocoa\",\r\n    \"minecraft:potatoes\",\r\n    \"minecraft:carrots\",\r\n    \"minecraft:sweet_berry_bush\",\r\n    \"minecraft:kelp\",\r\n    \"minecraft:brown_mushroom\",\r\n    \"minecraft:brown_mushroom_block\",\r\n    \"minecraft:red_mushroom\",\r\n    \"minecraft:red_mushroom_block\",\r\n    \"minecraft:crimson_fungus\",\r\n    \"minecraft:warped_fungus\",\r\n    \"minecraft:tallgrass\",\r\n    \"minecraft:poppy\",\r\n    \"minecraft:blue_orchid\",\r\n    \"minecraft:allium\",\r\n    \"minecraft:azure_bluet\",\r\n    \"minecraft:red_tulip\",\r\n    \"minecraft:orange_tulip\",\r\n    \"minecraft:white_tulip\",\r\n    \"minecraft:pink_tulip\",\r\n    \"minecraft:oxeye_daisy\",\r\n    \"minecraft:cornflower\",\r\n    \"minecraft:lily_of_the_valley\",\r\n    \"minecraft:yellow_flower\",\r\n    \"minecraft:lilac\",\r\n    \"minecraft:large_fern\",\r\n    \"minecraft:rose_bush\",\r\n    \"minecraft:tall_grass\",\r\n    \"minecraft:short_grass\",\r\n    \"minecraft:sunflower\",\r\n    \"minecraft:peony\",\r\n    \"minecraft:double_plant\"\r\n]);\r\n\r\n// 魔導書（モーヴィング）使用\r\n/**\r\n * @param {Player} player\r\n * @param {ItemStack} item\r\n */\r\nfunction mowing_use(player:Player, item:ItemStack) {\r\n\r\n    let playerDim = player.dimension;\r\n    let bx = player.location.x;\r\n    let by = player.location.y;\r\n    let bz = player.location.z;\r\n\r\n    let setFireF = false;\r\n    let xpcount1 = 0;\r\n    let intervalNumXP = system.runInterval(() => {\r\n        for (let z=0; z<10;z++) {\r\n            for (let y=0; y<10;y++) {\r\n                let vec = {\"x\":bx+xpcount1,\"y\":by+y,\"z\":bz+z};\r\n                let dimBlock = playerDim.getBlock(vec) as Block;\r\n                if(!dimBlock.isAir && MowingBlocks.indexOf(dimBlock.typeId) != -1) {\r\n                    player.runCommand(\"setblock \" + (bx+xpcount1) + \" \" + (by+y) + \" \" + (bz+z) + \" air destroy\");\r\n                    setFireF = true;\r\n                }\r\n            }\r\n            for (let y=-1; y>-3;y--) {\r\n                let vec = {\"x\":bx+xpcount1,\"y\":by+y,\"z\":bz+z};\r\n                let dimBlock = playerDim.getBlock(vec) as Block;\r\n                if(!dimBlock.isAir && MowingBlocks.indexOf(dimBlock.typeId) != -1) {\r\n                    player.runCommand(\"setblock \" + (bx+xpcount1) + \" \" + (by+y) + \" \" + (bz+z) + \" air destroy\");\r\n                    setFireF = true;\r\n                }\r\n            }\r\n        }\r\n        xpcount1++;\r\n    }, 1);\r\n\r\n    let xmcount1 = 0;\r\n    let intervalNumXM = system.runInterval(() => {\r\n        for (let z=0; z<10;z++) {\r\n            for (let y=0; y<10;y++) {\r\n                let vec = {\"x\":bx+xmcount1,\"y\":by+y,\"z\":bz+z};\r\n                let dimBlock = playerDim.getBlock(vec) as Block;\r\n                if(!dimBlock.isAir && MowingBlocks.indexOf(dimBlock.typeId) != -1) {\r\n                    player.runCommand(\"setblock \" + (bx+xmcount1) + \" \" + (by+y) + \" \" + (bz+z) + \" air destroy\");\r\n                    setFireF = true;\r\n                }\r\n            }\r\n            for (let y=-1; y>-3;y--) {\r\n                let vec = {\"x\":bx+xmcount1,\"y\":by+y,\"z\":bz+z};\r\n                let dimBlock = playerDim.getBlock(vec) as Block;\r\n                if(!dimBlock.isAir && MowingBlocks.indexOf(dimBlock.typeId) != -1) {\r\n                    player.runCommand(\"setblock \" + (bx+xmcount1) + \" \" + (by+y) + \" \" + (bz+z) + \" air destroy\");\r\n                    setFireF = true;\r\n                }\r\n            }\r\n        }\r\n        xmcount1--;\r\n    }, 1);\r\n\r\n    let xpcount2 = 0;\r\n    let intervalNumZP = system.runInterval(() => {\r\n        for (let z=-1; z>-10;z--) {\r\n            for (let y=0; y<10;y++) {\r\n                let vec = {\"x\":bx+xpcount2,\"y\":by+y,\"z\":bz+z};\r\n                let dimBlock = playerDim.getBlock(vec) as Block;\r\n                if(!dimBlock.isAir && MowingBlocks.indexOf(dimBlock.typeId) != -1) {\r\n                    player.runCommand(\"setblock \" + (bx+xpcount2) + \" \" + (by+y) + \" \" + (bz+z) + \" air destroy\");\r\n                    setFireF = true;\r\n                }\r\n            }\r\n            for (let y=-1; y>-3;y--) {\r\n                let vec = {\"x\":bx+xpcount2,\"y\":by+y,\"z\":bz+z};\r\n                let dimBlock = playerDim.getBlock(vec) as Block;\r\n                if(!dimBlock.isAir && MowingBlocks.indexOf(dimBlock.typeId) != -1) {\r\n                    player.runCommand(\"setblock \" + (bx+xpcount2) + \" \" + (by+y) + \" \" + (bz+z) + \" air destroy\");\r\n                    setFireF = true;\r\n                }\r\n            }\r\n        }\r\n        xpcount2++;\r\n    }, 1);\r\n\r\n    let xmcount2 = 0;\r\n    let intervalNumZM = system.runInterval(() => {\r\n        for (let z=-1; z>-10;z--) {\r\n            for (let y=0; y<10;y++) {\r\n                let vec = {\"x\":bx+xmcount2,\"y\":by+y,\"z\":bz+z};\r\n                let dimBlock = playerDim.getBlock(vec) as Block;\r\n                if(!dimBlock.isAir && MowingBlocks.indexOf(dimBlock.typeId) != -1) {\r\n                    player.runCommand(\"setblock \" + (bx+xmcount2) + \" \" + (by+y) + \" \" + (bz+z) + \" air destroy\");\r\n                    setFireF = true;\r\n                }\r\n            }\r\n            for (let y=-1; y>-3;y--) {\r\n                let vec = {\"x\":bx+xmcount2,\"y\":by+y,\"z\":bz+z};\r\n                let dimBlock = playerDim.getBlock(vec) as Block;\r\n                if(!dimBlock.isAir && MowingBlocks.indexOf(dimBlock.typeId) != -1) {\r\n                    player.runCommand(\"setblock \" + (bx+xmcount2) + \" \" + (by+y) + \" \" + (bz+z) + \" air destroy\");\r\n                    setFireF = true;\r\n                }\r\n            }\r\n        }\r\n        xmcount2--;\r\n    }, 1);\r\n\r\n    player.runCommand(\"particle kurokumaft:mowing_particle \" + (bx) + \" \" + (by) + \" \" + (bz));\r\n\r\n    system.runTimeout(() => {\r\n        system.clearRun(intervalNumXP);\r\n        system.clearRun(intervalNumZP);\r\n        system.clearRun(intervalNumXM);\r\n        system.clearRun(intervalNumZM);\r\n\r\n        if (setFireF) {\r\n            decrimentGrimoireCount(player, item);\r\n        }\r\n    }, 15);\r\n\r\n};\r\n\r\n// 魔導書（プレイングサウンド）使用\r\n/**\r\n * @param {Player} player\r\n * @param {ItemStack} item\r\n */\r\nfunction music_sound_use(player:Player, item:ItemStack) {\r\n    player.runCommand(\"music play \" + MusicRecodes[Math.floor(Math.random() * MusicRecodes.length)] + \" 1 5\");\r\n    decrimentGrimoireCount(player, item);\r\n};\r\n\r\nexport { home_tp, homeSetDialog, torchlight_use, ignited_use_af, ignited_use_be, water_use, flower_garden_use, growth_use, \r\n    mowing_use, music_sound_use };\r\n","import { ItemCustomComponent,ItemComponentBeforeDurabilityDamageEvent, ItemComponentUseEvent, ItemStack, Player, ItemComponent, ItemComponentTypes, ItemDurabilityComponent, Entity, EntityEquippableComponent, EntityComponentTypes, EquipmentSlot, EntityInventoryComponent, Container } from \"@minecraft/server\";\r\nimport { print,getRandomInRange } from \"./commonUtil\";\r\n\r\n/**\r\n * アイテムダメージ\r\n * @param {Entity} entity\r\n * @param {ItemStack} item\r\n * @param {EquipmentSlot} slot\r\n */\r\nasync function ItemDurabilityDamage(entity:Entity, item:ItemStack, slot:EquipmentSlot) {\r\n\r\n    let equ = entity.getComponent(EntityComponentTypes.Equippable) as EntityEquippableComponent;\r\n\r\n    let durability = item.getComponent(ItemComponentTypes.Durability) as ItemDurabilityComponent;\r\n    let dChange = durability.getDamageChance(Math.ceil(getRandomInRange(0, 3)));\r\n\r\n    if ((durability.damage + dChange) >= durability.maxDurability) {\r\n        equ.setEquipment(slot, undefined);\r\n    } else {\r\n\r\n        durability.damage = durability.damage + dChange;\r\n        equ.setEquipment(slot, item);\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * 魔導書（召喚）ダメージ\r\n * @param {Entity} entity\r\n * @param {ItemStack} item\r\n * @param {EquipmentSlot} slot\r\n */\r\nasync function SummonGrimoireDurabilityDamage(entity:Entity, item:ItemStack, slot:EquipmentSlot) {\r\n\r\n    let equ = entity.getComponent(EntityComponentTypes.Equippable) as EntityEquippableComponent;\r\n\r\n    let durability = item.getComponent(ItemComponentTypes.Durability) as ItemDurabilityComponent;\r\n    if ((durability.damage + 1) >= durability.maxDurability) {\r\n        equ.setEquipment(slot, undefined);\r\n    } else {\r\n        durability.damage = durability.damage + 1;\r\n        equ.setEquipment(slot, item);\r\n    }\r\n\r\n}\r\n\r\n// 魔導書耐久減少\r\n/**\r\n * @param {Player} player\r\n * @param {ItemStack} item\r\n */\r\nasync function decrimentGrimoireCount(player:Player, item:ItemStack) {\r\n    let lore = item.getLore();\r\n    if (lore.length > 0) {\r\n        let cont = Number(lore[0].substr(3));\r\n        cont--;\r\n        let inventory = player.getComponent(EntityComponentTypes.Inventory) as EntityInventoryComponent;\r\n        let con = inventory.container as Container;\r\n        if (cont == 0) {\r\n            let grimoire_damage = new ItemStack(\"kurokumaft:grimoire_damage\", 1);\r\n            con.setItem(player.selectedSlotIndex, grimoire_damage);\r\n        } else {\r\n            item.setLore([\"残数：\" + cont]);\r\n            con.setItem(player.selectedSlotIndex, item);\r\n        }\r\n    }\r\n}\r\n\r\nexport {ItemDurabilityDamage, SummonGrimoireDurabilityDamage, decrimentGrimoireCount};","import { system,world,Player,Entity,EntityComponentTypes,EntityInventoryComponent,ItemStack,Block,Dimension,BlockPermutation, Container, EntityEquippableComponent, EquipmentSlot, EntityHealthComponent, EntityApplyDamageOptions } from \"@minecraft/server\";\r\nimport { print, playsound, durabilityDamage, breakItem } from \"./common/commonUtil\";\r\nimport { getGrimoireObjectId, isGrimoireItemsObject, isGrimoireAllItemsObject, getGrimoireItemsMultiValue, \r\n    getGrimoireAllItemsMultiValue, getGrimoireAllItemsId, isGrimoireAllItemsId, getGrimoireAllObjectsId, getGrimoireAllItemsEvent, \r\n    GrimoireBook} from \"./magic/GrimoireBookComponent\";\r\nimport { getMagicStoneOjectByName, isMagicStoneOject, MagicStoneOjects } from \"./magic/MagicStoneComponet\";\r\nimport { ActionFormData } from \"@minecraft/server-ui\";\r\n\r\n// 魔導書見台\r\n/**\r\n * @param {Player} player\r\n * @param {ItemStack} item\r\n * @param {Block} block\r\n */\r\nfunction magic_lectern(player:Player, item:ItemStack, block:Block) {\r\n    let blockPer = block.permutation;\r\n    // print(\"book_set:\" + blockPer.getState(\"kurokumaft:book_set\"));\r\n    // print(\"stone_set:\" + blockPer.getState(\"kurokumaft:stone_set\"));\r\n    if (item != undefined) {\r\n        // print(\"アイテムあり\");\r\n        // print(item.typeId);\r\n        if (isGrimoireAllItemsId(item.typeId)) {\r\n            // print(\"魔導書\");\r\n            if (block.matches(block.typeId,{\"kurokumaft:book_set\":0})) {\r\n                block.setPermutation(blockPer.withState(\"kurokumaft:book_set\", 1));\r\n                let grimoire_book_entity = block.dimension.spawnEntity(\"kurokumaft:grimoire_book_entity\", {x:block.location.x+0.5,y:block.location.y+1,z:block.location.z+0.5});\r\n                grimoire_book_entity.nameTag = \"grimoire_book_table\";\r\n                let bookObj = getGrimoireAllObjectsId(item.typeId) as GrimoireBook;\r\n                grimoire_book_entity.triggerEvent(bookObj.event);\r\n                let invent = grimoire_book_entity.getComponent(EntityComponentTypes.Inventory) as EntityInventoryComponent;\r\n                let container = invent.container as Container;\r\n                let grimoire_empty = item.clone();\r\n                grimoire_empty.amount = 1;\r\n                container.addItem(grimoire_empty);\r\n\r\n                let direction = blockPer.getState(\"minecraft:cardinal_direction\");\r\n                if (direction == \"north\") {\r\n                    grimoire_book_entity.triggerEvent(\"kurokumaft:north\");\r\n                } else if (direction == \"south\") {\r\n                    grimoire_book_entity.triggerEvent(\"kurokumaft:south\");\r\n                } else if (direction == \"east\") {\r\n                    grimoire_book_entity.triggerEvent(\"kurokumaft:east\");\r\n                } else {\r\n                    grimoire_book_entity.triggerEvent(\"kurokumaft:west\");\r\n                }\r\n   \r\n            }\r\n        } else if (isMagicStoneOject(item.typeId)) {\r\n            // print(\"魔法石\");\r\n            let magic_stone_entitys = block.dimension.getEntitiesAtBlockLocation({x:block.location.x,y:block.location.y+1,z:block.location.z});\r\n            for (let i=0; i<magic_stone_entitys.length; i++) {\r\n                if (magic_stone_entitys[i].typeId == \"kurokumaft:magic_stone_entity\") {\r\n                    magic_stone_entitys[i].triggerEvent(\"on_breaking\");\r\n                }\r\n            }\r\n            let magic_stone_entity = block.dimension.spawnEntity(\"kurokumaft:magic_stone_entity\", {x:block.location.x+0.5,y:block.location.y+1,z:block.location.z+0.5});\r\n            let stoneComp = getMagicStoneOjectByName(item.typeId) as MagicStoneOjects;\r\n\r\n            block.setPermutation(blockPer.withState(\"kurokumaft:stone_set\", stoneComp.state));\r\n            // print(\"stoneState:\" + stoneComp.state);\r\n            // print(\"stoneEvent:\" + stoneComp.event);\r\n            magic_stone_entity.triggerEvent(stoneComp.event);\r\n\r\n            let direction = blockPer.getState(\"minecraft:cardinal_direction\");\r\n            if (direction == \"north\") {\r\n                magic_stone_entity.triggerEvent(\"kurokumaft:north\");\r\n            } else if (direction == \"south\") {\r\n                magic_stone_entity.triggerEvent(\"kurokumaft:south\");\r\n            } else if (direction == \"east\") {\r\n                magic_stone_entity.triggerEvent(\"kurokumaft:east\");\r\n            } else {\r\n                magic_stone_entity.triggerEvent(\"kurokumaft:west\");\r\n            }\r\n\r\n            let invent = magic_stone_entity.getComponent(EntityComponentTypes.Inventory) as EntityInventoryComponent;\r\n            let container = invent.container as Container;\r\n            let magic_stone = item.clone();\r\n            magic_stone.amount = 1;\r\n            container.addItem(magic_stone);\r\n\r\n        } else {\r\n            // 魔導書セット済み\r\n            if (!block.matches(block.typeId,{\"kurokumaft:book_set\":0})) {\r\n                let grimoire_entity;\r\n                let block_entitys = block.dimension.getEntitiesAtBlockLocation({x:block.location.x,y:block.location.y+1,z:block.location.z});\r\n                for (let i=0; i<block_entitys.length; i++) {\r\n                    if (block_entitys[i].typeId == \"kurokumaft:grimoire_book_entity\") {\r\n                        grimoire_entity = block_entitys[i];\r\n                        break;\r\n                    }\r\n                }\r\n                if (grimoire_entity == undefined) {\r\n                    // print(\"grimoire_entityなし\");\r\n                    return;\r\n                }\r\n                let invent = grimoire_entity.getComponent(EntityComponentTypes.Inventory) as EntityInventoryComponent;\r\n                let container = invent.container as Container;\r\n                let grimoire_book = container.getItem(0);\r\n                if (grimoire_book == undefined) {\r\n                    return;\r\n                }\r\n                grimoire_entity.triggerEvent(\"on_breaking\");\r\n\r\n                let new_grimoire_book_entity = block.dimension.spawnEntity(\"kurokumaft:grimoire_book_entity\", {x:block.location.x+0.5,y:block.location.y+1,z:block.location.z+0.5});\r\n                let new_invent = new_grimoire_book_entity.getComponent(EntityComponentTypes.Inventory) as EntityInventoryComponent;\r\n                let new_container = new_invent.container as Container;\r\n                let direction = blockPer.getState(\"minecraft:cardinal_direction\");\r\n                if (direction == \"north\") {\r\n                    new_grimoire_book_entity.triggerEvent(\"kurokumaft:north\");\r\n                } else if (direction == \"south\") {\r\n                    new_grimoire_book_entity.triggerEvent(\"kurokumaft:south\");\r\n                } else if (direction == \"east\") {\r\n                    new_grimoire_book_entity.triggerEvent(\"kurokumaft:east\");\r\n                } else {\r\n                    new_grimoire_book_entity.triggerEvent(\"kurokumaft:west\");\r\n                }\r\n\r\n                let new_grimoire_book;\r\n\r\n                let lore = grimoire_book.getLore();\r\n                let remainingNum = 0;\r\n                if (lore.length > 0) {\r\n                    remainingNum = Number(lore[0].substr(3));\r\n                }\r\n\r\n                // 魔法石セット済み\r\n                if (!block.matches(block.typeId,{\"kurokumaft:stone_set\": 0})) {\r\n                    let grimoireObject = getGrimoireObjectId(grimoire_book.typeId);\r\n                    // 空以外の魔導書がセットされている場合\r\n                    if (grimoireObject != undefined) {\r\n                        let grimoireItems = grimoireObject[\"items\"];\r\n                        // 魔導書に対応するアイテムでない場合は終了\r\n                        if (!isGrimoireItemsObject(grimoireItems, item.typeId)) {\r\n                            noBookItem();\r\n                            return;\r\n                        }\r\n                        let mulVal = getGrimoireItemsMultiValue(grimoireItems, item.typeId);\r\n                        new_grimoire_book = grimoire_book;\r\n                        remainingNum = remainingNum + (item.amount * mulVal);\r\n\r\n                    // 空の魔導書の場合\r\n                    } else {\r\n                        // すべての魔導書に対応するアイテムでない場合は終了\r\n                        if (!isGrimoireAllItemsObject(item.typeId)) {\r\n                            noBookItem();\r\n                            return;\r\n                        }\r\n                        let mulVal = getGrimoireAllItemsMultiValue(item.typeId);\r\n                        remainingNum = remainingNum + (item.amount * mulVal);\r\n                        let bookId = getGrimoireAllItemsId(item.typeId);\r\n                        new_grimoire_book = new ItemStack(bookId, 1);\r\n                        let event = getGrimoireAllItemsEvent(bookId);\r\n                        new_grimoire_book_entity.triggerEvent(event);\r\n                    }\r\n\r\n                    new_grimoire_book.setLore([\"残数：\" + remainingNum]);\r\n\r\n                    new_container.setItem(0, new_grimoire_book);\r\n\r\n                    let equ = player.getComponent(EntityComponentTypes.Equippable) as EntityEquippableComponent;\r\n                    equ.setEquipment(EquipmentSlot.Mainhand);\r\n\r\n                    let magic_stone_entitys = block.dimension.getEntitiesAtBlockLocation({x:block.location.x,y:block.location.y+1,z:block.location.z});\r\n                    for (let i=0; i<magic_stone_entitys.length; i++) {\r\n                        if (magic_stone_entitys[i].typeId == \"kurokumaft:magic_stone_entity\") {\r\n                            let magic_stone_en = magic_stone_entitys[i];\r\n                            let sotne_health = magic_stone_en.getComponent(EntityComponentTypes.Health) as EntityHealthComponent;\r\n                            if(sotne_health.currentValue == 1) {\r\n                                magic_stone_en.triggerEvent(\"on_breaking\");\r\n                            } else {\r\n                                magic_stone_en.applyDamage(1,{\"cause\":\"none\"} as EntityApplyDamageOptions);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        if (blockPer.getState(\"kurokumaft:book_set\") == 1) {\r\n            let grimoire_book_entity = block.dimension.getEntitiesAtBlockLocation({x:block.location.x,y:block.location.y+1,z:block.location.z});\r\n            for (let i=0; i<grimoire_book_entity.length; i++) {\r\n                if (grimoire_book_entity[i].typeId == \"kurokumaft:grimoire_book_entity\") {\r\n                    block.setPermutation(blockPer.withState(\"kurokumaft:book_set\", 0));\r\n                    let pinvent = player.getComponent(EntityComponentTypes.Inventory) as EntityInventoryComponent;\r\n                    let pcontainer = pinvent.container as Container;\r\n                    let invent = grimoire_book_entity[i].getComponent(EntityComponentTypes.Inventory) as EntityInventoryComponent;\r\n                    let gcontainer = invent.container as Container;\r\n                    pcontainer.setItem(player.selectedSlotIndex, gcontainer.getItem(0));\r\n                    gcontainer.clearAll();\r\n                    // print(grimoire_book_entity[i].typeId);\r\n                    grimoire_book_entity[i].triggerEvent(\"on_breaking\");\r\n                    break;\r\n                }\r\n            }\r\n        } else {\r\n\r\n            let actionForm = new ActionFormData()\r\n            .title({ translate: \"tile.kurokumaft:magic_lectern.name\" })\r\n            .body({rawtext: [\r\n                { translate: \"magic_lectern.mess.title\" },\r\n                {text : \"\\n\\n\"},\r\n                { translate: \"magic_lectern.mess.body1\" },\r\n                {text : \"\\n\\n\"},\r\n                { translate: \"magic_lectern.mess.errorInfo\" },\r\n                {text : \"\\n\"}\r\n            ]})\r\n            .button({ translate: \"magic_lectern.mess.confirm\"});\r\n\r\n            actionForm.show(player);\r\n\r\n        }\r\n        // if (blockPer.getState(\"kurokumaft:stone_set\") != 0) {\r\n        //     let magic_stone = block.dimension.getEntitiesAtBlockLocation({x:block.location.x,y:block.location.y+1,z:block.location.z});\r\n        //     for (let i=0; i<magic_stone.length; i++) {\r\n        //         if (magic_stone[i].typeId == \"kurokumaft:magic_stone_entity\") {\r\n        //             let intervalNum = system.runInterval(() => {\r\n        //                 block.setPermutation(blockPer.withState(\"kurokumaft:stone_set\", 0));\r\n        //                 let pinvent = player.getComponent(EntityComponentTypes.Inventory);\r\n        //                 let pcontainer = pinvent.container;\r\n        //                 let invent = magic_stone[i].getComponent(EntityComponentTypes.Inventory);\r\n        //                 let container = invent.container;\r\n        //                 //pcontainer.setItem(player.selectedSlot, container.getItem(0));\r\n        //                 print(magic_stone[i].typeId);\r\n        //                 magic_stone[i].kill();\r\n        //             }, 2);\r\n        //             system.runTimeout(() => {\r\n        //                 system.clearRun(intervalNum);\r\n        //             }, 3);\r\n        //             break;\r\n        //         }\r\n        //     }\r\n        // }\r\n    }\r\n};\r\n\r\n// 魔導書見台破壊\r\n/**\r\n * @param {Player} player\r\n * @param {Block} block\r\n */\r\nfunction magic_lectern_break(player:Player, block:Block) {\r\n    let intervalNum = system.runInterval(() => {\r\n        let lectern_entity = block.dimension.getEntitiesAtBlockLocation({x:block.location.x,y:block.location.y+1,z:block.location.z});\r\n        for (let i=0; i<lectern_entity.length; i++) {\r\n            if (lectern_entity[i].typeId == \"kurokumaft:grimoire_book_entity\") {\r\n                lectern_entity[i].runCommand(\"kill @s\");\r\n            }\r\n            if (lectern_entity[i].typeId == \"kurokumaft:magic_stone_entity\") {\r\n                lectern_entity[i].triggerEvent(\"on_breaking\");\r\n            }\r\n        }\r\n    }, 2);\r\n    system.runTimeout(() => {\r\n        system.clearRun(intervalNum);\r\n    }, 4);\r\n\r\n};\r\n\r\nfunction noBookItem() {\r\n    world.sendMessage(\"このアイテムは対応していません\");\r\n};\r\n\r\nexport { magic_lectern, magic_lectern_break };\r\n","import {print} from \"../common/commonUtil\"\r\n\r\ninterface GrimoireBook extends Map<string, Object> {\r\n    typeId: string,\r\n    event: string,\r\n    items: Items\r\n}\r\n\r\ninterface Items extends Array<Items> {\r\n    name: string,\r\n    multiValue: number,\r\n}[]\r\n\r\n// 魔導書オブジェクト\r\nconst GrimoireBookOjects = Object.freeze({\r\n    empty: {\r\n        typeId: \"kurokumaft:grimoire_empty\",\r\n        event : \"kurokumaft:none\",\r\n        items : [\r\n            {name: \"\", multiValue: 0},\r\n        ]\r\n    },\r\n    torch: {\r\n        typeId: \"kurokumaft:grimoire_torchlight\",\r\n        event : \"kurokumaft:fire\",\r\n        items : [\r\n            {name: \"minecraft:coal\", multiValue: 1},\r\n            {name: \"minecraft:coal_block\", multiValue: 9},\r\n            {name: \"minecraft:charcoal\", multiValue: 1}\r\n        ]\r\n    },\r\n    ignited: {\r\n        typeId: \"kurokumaft:grimoire_ignited\",\r\n        event : \"kurokumaft:fire\",\r\n        items : [\r\n            {name: \"minecraft:flint\", multiValue: 1}\r\n        ]\r\n    },\r\n    water: {\r\n        typeId: \"kurokumaft:grimoire_water\",\r\n        event : \"kurokumaft:water\",\r\n        items : [\r\n            {name: \"minecraft:water_bucket\", multiValue: 10}\r\n        ]\r\n    },\r\n    mowing: {\r\n        typeId: \"kurokumaft:grimoire_mowing\",\r\n        event : \"kurokumaft:wind\",\r\n        items : [\r\n            {name: \"minecraft:shears\", multiValue: 9}\r\n        ]\r\n    },\r\n    music_sound: {\r\n        typeId: \"kurokumaft:grimoire_music_sound\",\r\n        event : \"kurokumaft:wind\",\r\n        items : [\r\n            {name: \"minecraft:music_disc_11\", multiValue: 10},\r\n            {name: \"minecraft:music_disc_13\", multiValue: 10},\r\n            {name: \"minecraft:music_disc_5\", multiValue: 10},\r\n            {name: \"minecraft:music_disc_blocks\", multiValue: 10},\r\n            {name: \"minecraft:music_disc_cat\", multiValue: 10},\r\n            {name: \"minecraft:music_disc_chirp\", multiValue: 10},\r\n            {name: \"minecraft:music_disc_far\", multiValue: 10},\r\n            {name: \"minecraft:music_disc_mall\", multiValue: 10},\r\n            {name: \"minecraft:music_disc_mellohi\", multiValue: 10},\r\n            {name: \"minecraft:music_disc_otherside\", multiValue: 10},\r\n            {name: \"minecraft:music_disc_pigstep\", multiValue: 10},\r\n            {name: \"minecraft:music_disc_relic\", multiValue: 10},\r\n            {name: \"minecraft:music_disc_stal\", multiValue: 10},\r\n            {name: \"minecraft:music_disc_strad\", multiValue: 10},\r\n            {name: \"minecraft:music_disc_wait\", multiValue: 10},\r\n            {name: \"minecraft:music_disc_ward\", multiValue: 10},\r\n            {name: \"minecraft:disc_fragment\", multiValue: 3},\r\n            {name: \"minecraft:disc_fragment_5\", multiValue: 5},\r\n            {name: \"minecraft:jukebox\", multiValue: 20},\r\n            {name: \"minecraft:noteblock\", multiValue: 10}\r\n        ]\r\n    },\r\n    growth: {\r\n        typeId: \"kurokumaft:grimoire_growth\",\r\n        event : \"kurokumaft:stone\",\r\n        items : [\r\n            {name: \"minecraft:bone_meal\", multiValue: 1},\r\n            {name: \"minecraft:bone_block\", multiValue: 9},\r\n            {name: \"minecraft:bone\", multiValue: 3}\r\n        ]\r\n    },\r\n    flower_garden: {\r\n        typeId: \"kurokumaft:grimoire_flower_garden\",\r\n        event : \"kurokumaft:stone\",\r\n        items : [\r\n            {name: \"minecraft:poppy\", multiValue: 1},\r\n            {name: \"minecraft:blue_orchid\", multiValue: 1},\r\n            {name: \"minecraft:allium\", multiValue: 1},\r\n            {name: \"minecraft:azure_bluet\", multiValue: 1},\r\n            {name: \"minecraft:red_tulip\", multiValue: 1},\r\n            {name: \"minecraft:orange_tulip\", multiValue: 1},\r\n            {name: \"minecraft:white_tulip\", multiValue: 1},\r\n            {name: \"minecraft:pink_tulip\", multiValue: 1},\r\n            {name: \"minecraft:oxeye_daisy\", multiValue: 1},\r\n            {name: \"minecraft:cornflower\", multiValue: 1},\r\n            {name: \"minecraft:lily_of_the_valley\", multiValue: 1},\r\n            {name: \"minecraft:double_plant\", multiValue: 4}\r\n        ]\r\n    }\r\n});\r\n\r\n/**\r\n * 魔導書名の魔導書アイテムオブジェクトを返す\r\n * @param {string} bookId\r\n */\r\nfunction getGrimoireObjectId(bookId:string) {\r\n    let grimoireKeys = Object.keys(GrimoireBookOjects) as (keyof typeof GrimoireBookOjects)[];\r\n    return grimoireKeys.find(obj => GrimoireBookOjects[obj].typeId == bookId) as unknown as GrimoireBook;\r\n};\r\n\r\n/**\r\n * 魔導書アイテムオブジェクトに対応するアイテムか判定する\r\n * @param {Items} grimoireItems\r\n * @param {String} itemName\r\n */\r\nfunction isGrimoireItemsObject(grimoireItems:Items, itemName:String) {\r\n    return grimoireItems.find(items => items.name == itemName) != undefined;\r\n};\r\n\r\n/**\r\n * 魔導書オブジェクトの中から魔導書アイテムオブジェクトに対応するアイテムか判定する\r\n * @param {string} itemName\r\n */\r\nfunction isGrimoireAllItemsObject(itemName:string) {\r\n    let items = (Object.values(GrimoireBookOjects).find(obj => {\r\n        return obj.items.find(itemObj => {\r\n            return itemObj.name == itemName;\r\n        });\r\n    }));\r\n    return items != undefined;\r\n};\r\n\r\n/**\r\n * 魔導書アイテムオブジェクトに対応するアイテムの乗算値を返す\r\n * @param {Items} grimoireItems\r\n * @param {string} itemName\r\n */\r\nfunction getGrimoireItemsMultiValue(grimoireItems:Items, itemName:string) {\r\n    let item = grimoireItems.find(items => items.name == itemName) as Items;\r\n    return item.multiValue;\r\n};\r\n\r\n/**\r\n * 魔導書オブジェクトの中から魔導書アイテムオブジェクトに対応するアイテムの乗算値を返す\r\n * @param {string} itemName\r\n */\r\nfunction getGrimoireAllItemsMultiValue(itemName:string) {\r\n    let retVal = 1;\r\n    Object.values(GrimoireBookOjects).forEach(obj => {\r\n        obj.items.forEach(itemObj => {\r\n            if (itemObj.name == itemName) {\r\n                retVal = itemObj.multiValue;\r\n            }\r\n        });\r\n    });\r\n    return retVal;\r\n};\r\n\r\n/**\r\n * 魔導書オブジェクトの中から魔導書アイテムオブジェクトに対応するアイテムを持つIDを返す\r\n * @param {string} itemName\r\n */\r\nfunction getGrimoireAllItemsId(itemName:string) {\r\n    let obj = Object.values(GrimoireBookOjects).find(obj => {\r\n        let filObj = obj.items.find(itemObj => {\r\n            return itemObj.name == itemName;\r\n        });\r\n        return filObj;\r\n    }) as GrimoireBook;\r\n    return obj.typeId as string;\r\n};\r\n\r\n/**\r\n * 魔導書オブジェクトの中からIDに対応するアイテムを持つイベントを返す\r\n * @param {string} typeId\r\n */\r\nfunction getGrimoireAllItemsEvent(typeId:string) {\r\n    let obj = Object.values(GrimoireBookOjects).find(obj => {\r\n        return obj.typeId == typeId;\r\n    }) as GrimoireBook;\r\n    return obj.event as string;\r\n};\r\n\r\n/**\r\n * 魔導書オブジェクトIDに一致する魔導書名かどうか\r\n * @param {string} bookName;\r\n */\r\nfunction isGrimoireAllItemsId(bookName:string) {\r\n    return Object.values(GrimoireBookOjects).find(obj => {\r\n        return obj.typeId == bookName;\r\n    }) != undefined;\r\n};\r\n\r\n/**\r\n * 魔導書オブジェクトIDに一致する魔導書名かどうか\r\n * @param {string} bookName;\r\n */\r\nfunction getGrimoireAllObjectsId(bookName:string) {\r\n    return Object.values(GrimoireBookOjects).find(obj => {\r\n        return obj.typeId == bookName;\r\n    }) as unknown as GrimoireBook;\r\n};\r\n\r\nexport { getGrimoireObjectId, isGrimoireItemsObject, isGrimoireAllItemsObject, getGrimoireItemsMultiValue, getGrimoireAllItemsMultiValue, getGrimoireAllItemsId\r\n    , isGrimoireAllItemsId, getGrimoireAllObjectsId, getGrimoireAllItemsEvent, GrimoireBook };\r\n","import {print} from \"../common/commonUtil\"\r\n\r\ninterface MagicStoneOjects {\r\n    name: string,\r\n    state: number,\r\n    event: string\r\n}\r\n\r\n// 魔法石オブジェクト\r\nconst MagicStoneOjects = Object.freeze([\r\n    {\r\n        name: \"kurokumaft:fire_magic_stone\",\r\n        state: 1,\r\n        event : \"kurokumaft:fire\"\r\n    },\r\n    {\r\n        name: \"kurokumaft:water_magic_stone\",\r\n        state: 2,\r\n        event : \"kurokumaft:water\"\r\n    },\r\n    {\r\n        name: \"kurokumaft:stone_magic_stone\",\r\n        state: 3,\r\n        event : \"kurokumaft:stone\"\r\n    },\r\n    {\r\n        name: \"kurokumaft:wind_magic_stone\",\r\n        state: 4,\r\n        event : \"kurokumaft:wind\"\r\n    },\r\n    {\r\n        name: \"kurokumaft:lightning_magic_stone\",\r\n        state: 5,\r\n        event : \"kurokumaft:lightning\"\r\n    },\r\n    {\r\n        name: \"kurokumaft:ice_magic_stone\",\r\n        state: 6,\r\n        event : \"kurokumaft:ice\"\r\n    },\r\n    {\r\n        name: \"kurokumaft:ligh_magic_stone\",\r\n        state: 7,\r\n        event : \"kurokumaft:ligh\"\r\n    },\r\n    {\r\n        name: \"kurokumaft:dark_magic_stone\",\r\n        state: 8,\r\n        event : \"kurokumaft:dark\"\r\n    }\r\n]);\r\n\r\n/**\r\n * 魔法石名に一致する魔法石オブジェクトを返す\r\n * @param {string} stoneName\r\n */\r\nfunction getMagicStoneOjectByName(stoneName:string) {\r\n    return MagicStoneOjects.find(obj => obj.name == stoneName) as MagicStoneOjects;\r\n};\r\n\r\n/**\r\n * 魔法石名に一致する魔法石オブジェクトがあるか判定する\r\n * @param {string} stoneName\r\n */\r\nfunction isMagicStoneOject(stoneName:string) {\r\n    return MagicStoneOjects.find(obj => obj.name == stoneName) != undefined;\r\n};\r\n\r\nexport { getMagicStoneOjectByName, isMagicStoneOject, MagicStoneOjects };","import { system,Player,Entity,EntityComponentTypes,Vector3,EntityEquippableComponent,EquipmentSlot,EntityApplyDamageOptions } from \"@minecraft/server\";\r\n\r\n/**\r\n * 魔法防具反撃効果\r\n * \r\n * @param {Player} player\r\n * @param {Entity} damager\r\n * @param {Entity} projectile\r\n * @param {Vector3} hitVector\r\n */\r\nasync function hitMagicAmor(player:Player, damager:Entity, projectile:Entity | undefined, hitVector:Vector3 | undefined) {\r\n    let equ = player.getComponent(EntityComponentTypes.Equippable) as EntityEquippableComponent;\r\n    if (!equ) {\r\n        return;\r\n    }\r\n    let chest = equ.getEquipment(EquipmentSlot.Chest);\r\n    let legs = equ.getEquipment(EquipmentSlot.Legs);\r\n    let head = equ.getEquipment(EquipmentSlot.Head);\r\n    if (chest != undefined) {\r\n        if (damager != undefined && projectile == undefined) {\r\n            if (chest.typeId == \"kurokumaft:stone_magic_chestplate\" || chest.typeId == \"kurokumaft:nether_stone_magic_chestplate\") {\r\n                let view = player.getViewDirection();\r\n                damager.applyDamage(5,{\"cause\":\"entityExplosion\"} as EntityApplyDamageOptions);\r\n                damager.runCommandAsync(\"particle minecraft:large_explosion  ~~~\");\r\n                damager.applyKnockback(Math.round(view.x)*10,Math.round(view.z)*10,10,1);\r\n            }\r\n            if (chest.typeId == \"kurokumaft:lightning_magic_chestplate\" || chest.typeId == \"kurokumaft:nether_lightning_magic_chest\") {\r\n                damager.applyDamage(5,{\"cause\":\"lightning\"} as EntityApplyDamageOptions);\r\n                damager.runCommandAsync(\"particle kurokumaft:lightning_arrow_particle ~~~\");\r\n            }\r\n        }\r\n    }\r\n    if (legs != undefined) {\r\n        if (damager != undefined && projectile == undefined) {\r\n            if (legs.typeId == \"kurokumaft:lightning_magic_leggings\" || legs.typeId == \"kurokumaft:nether_lightning_magic_leggings\") {\r\n                let location = damager.location;\r\n                // 5から15の範囲のランダムな数値を取得\r\n                let randomNum1 = Math.floor(Math.random() * (15 - 5 + 1)) + 5;\r\n                let randomNum2 = Math.floor(Math.random() * (15 - 5 + 1)) + 5;\r\n                let randomInRange1 = Math.floor(Math.random()*2) == 1 ? -randomNum1 : randomNum1;\r\n                let randomInRange2 = Math.floor(Math.random()*2) == 1 ? -randomNum2 : randomNum2;\r\n                damager.teleport({x:location.x + randomInRange1, y:location.y, z:location.z + randomInRange2},undefined);\r\n            }\r\n        }\r\n    }\r\n    if (head != undefined) {\r\n        if ((head.typeId == \"kurokumaft:lightning_magic_helmet\" || head.typeId == \"kurokumaft:nether_lightning_magic_helmet\") && projectile != undefined) {\r\n            try {\r\n                projectile.clearVelocity();\r\n                projectile.runCommand(\"particle kurokumaft:lightning_arrow_particle ~~~\");\r\n                let intervalNum = system.runInterval(() => {\r\n                    projectile.clearVelocity();\r\n                }, 5);\r\n                system.runTimeout(() => {\r\n                    system.clearRun(intervalNum);\r\n                }, 30);\r\n            } catch (error) {\r\n            }\r\n        }\r\n        if ((head.typeId == \"kurokumaft:wind_magic_helmet\" || head.typeId == \"kurokumaft:nether_wind_magic_helmet\") && projectile != undefined) {\r\n            try {\r\n                projectile.clearVelocity();\r\n                projectile.runCommand(\"particle kurokumaft:wind_arrow_particle ~~~\");\r\n                projectile.applyImpulse({x:hitVector!.x,y:hitVector!.y,z:-hitVector!.z});\r\n            } catch (error) {\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nexport { hitMagicAmor }\r\n","import { Entity, EquipmentSlot, GameMode, ItemComponent, ItemComponentHitEntityEvent, ItemComponentTypes, ItemComponentUseEvent, ItemComponentUseOnEvent, ItemCooldownComponent, ItemCustomComponent, ItemStack, Player, world } from \"@minecraft/server\";\r\nimport { throwing } from \"../../../custom/ShooterMagicEvent\";\r\nimport { print, getRandomInRange } from \"../../../common/commonUtil\";\r\nimport { ItemDurabilityDamage } from \"../../../common/ItemDurabilityDamage\";\r\n\r\ninterface WandMagicObject {\r\n    itemName:string,\r\n    event:string\r\n    sendMsg:string\r\n}\r\n\r\nconst WandHitObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:fire_wand\",\r\n        event: \"fire/burst_rondo\",\r\n        sendMsg: \"§cバーストロンド\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:water_wand\",\r\n        event: \"water/splash\",\r\n        sendMsg: \"§bスプラッシュ\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:wind_wand\",\r\n        event: \"wind/wind_edge\",\r\n        sendMsg: \"§aウィンドエッジ\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:stone_wand\",\r\n        event: \"stone/sand_blast\",\r\n        sendMsg: \"§7サンドブラスト\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:lightning_wand\",\r\n        event: \"lightning/spark\",\r\n        sendMsg: \"§6スパーク\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:snow_wand\",\r\n        event: \"ice/powdered_snow\",\r\n        sendMsg: \"§fパウダースノー\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:dark_wand\",\r\n        event: \"dark/dark_bread\",\r\n        sendMsg: \"§8ダークブレード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:light_wand\",\r\n        event: \"light/light_bread\",\r\n        sendMsg: \"§eライトブレード\"\r\n    }\r\n\r\n]);\r\n\r\nconst BallMagicObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:fire_wand\",\r\n        event: \"kurokumaft:fireballmagic\",\r\n        sendMsg: \"§cファイヤーボール\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:water_wand\",\r\n        event: \"kurokumaft:waterballmagic\",\r\n        sendMsg: \"§bウォーターボール\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:wind_wand\",\r\n        event: \"kurokumaft:windcuttermagic\",\r\n        sendMsg: \"§aウィンドカッター\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:stone_wand\",\r\n        event: \"kurokumaft:stonebarrettemagic\",\r\n        sendMsg: \"§7ストーンバレット\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:lightning_wand\",\r\n        event: \"kurokumaft:lightningboltmagic\",\r\n        sendMsg: \"§6ライトニングボルト\"\r\n    }\r\n\r\n]);\r\n\r\nconst WallMagicObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:fire_wand\",\r\n        event: \"fire/firewall\",\r\n        sendMsg: \"§cファイアウォール\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:water_wand\",\r\n        event: \"water/waterwall\",\r\n        sendMsg: \"§bウォーターウォール\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:wind_wand\",\r\n        event: \"wind/windwall\",\r\n        sendMsg: \"§aウィンドウォール\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:stone_wand\",\r\n        event: \"stone/stonewall\",\r\n        sendMsg: \"§7ストーンウォール\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:lightning_wand\",\r\n        event: \"lightning/lightningwall\",\r\n        sendMsg: \"§6ライトニングウォール\"\r\n    }\r\n\r\n]);\r\n\r\nconst OtherUpMagicObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:snow_wand\",\r\n        event: \"ice/deep_snow\",\r\n        sendMsg: \"§fディープスノー\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:dark_wand\",\r\n        event: \"dark/absorption\",\r\n        sendMsg: \"§8アブソープション\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:light_wand\",\r\n        event: \"light/healing\",\r\n        sendMsg: \"§eヒーリング\"\r\n    }\r\n\r\n]);\r\n\r\nconst OtherDownMagicObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:snow_wand\",\r\n        event: \"ice/deep_snow\",\r\n        sendMsg: \"§fディープスノー\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:dark_wand\",\r\n        event: \"dark/invisibility\",\r\n        sendMsg: \"§8インビジブル\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:light_wand\",\r\n        event: \"light/recovery\",\r\n        sendMsg: \"§eリカバリー\"\r\n    }\r\n\r\n]);\r\n\r\n/**\r\n * ワンド系魔法\r\n */\r\nexport class WandWeaponMagic implements ItemCustomComponent {\r\n\r\n    // 通常攻撃\r\n    onHitEntity(event:ItemComponentHitEntityEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let attackEntity = event.attackingEntity as Entity;\r\n        let hitEntity = event.hitEntity as Entity;\r\n        let effect = event.hadEffect as boolean;\r\n\r\n        if (!itemStack || (hitEntity instanceof Player && !world.gameRules.pvp)) {\r\n            return;\r\n        }\r\n        let wandMagicObject = WandHitObjects.find(obj => obj.itemName == itemStack.typeId) as WandMagicObject;\r\n        attackEntity.runCommand(\"/function magic/\" + wandMagicObject.event);\r\n        attackEntity.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + wandMagicObject.sendMsg + \"\\\"}]}\");\r\n\r\n    }\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n\r\n        let xran = parseFloat(getRandomInRange(-0.1, 0.5).toFixed(3));\r\n        let yran = parseFloat(getRandomInRange(-0.1, 0.1).toFixed(3));\r\n        let zran = parseFloat(getRandomInRange(-0.1, 0.1).toFixed(3));\r\n\r\n        if (player.getGameMode() != GameMode.creative) {\r\n            ItemDurabilityDamage(player, itemStack, EquipmentSlot.Mainhand);\r\n        }\r\n\r\n        // pvp用\r\n        if (world.gameRules.pvp) {\r\n            let ballMagicObject = BallMagicObjects.find(obj => obj.itemName == itemStack.typeId) as WandMagicObject;\r\n            if (ballMagicObject) {\r\n                throwing(player, itemStack, ballMagicObject.event, {x:xran,y:yran,z:zran});\r\n                player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + ballMagicObject.sendMsg + \"\\\"}]}\");\r\n            } else {\r\n                if (player.isSneaking) {\r\n                    let otherDownMagicObject = OtherDownMagicObjects.find(obj => obj.itemName == itemStack.typeId) as WandMagicObject;\r\n                    if (otherDownMagicObject) {\r\n                        player.runCommand(\"/function magic/\" + otherDownMagicObject.event);\r\n                        player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + otherDownMagicObject.sendMsg + \"\\\"}]}\");\r\n                    }\r\n                } else {\r\n                    let otherUpMagicObject = OtherUpMagicObjects.find(obj => obj.itemName == itemStack.typeId) as WandMagicObject;\r\n                    if (otherUpMagicObject) {\r\n                        player.runCommand(\"/function magic/\" + otherUpMagicObject.event);\r\n                        player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + otherUpMagicObject.sendMsg + \"\\\"}]}\");\r\n                    } \r\n                }\r\n            }\r\n\r\n        } else {\r\n            let ballMagicObject = BallMagicObjects.find(obj => obj.itemName == itemStack.typeId) as WandMagicObject;\r\n            if (ballMagicObject) {\r\n                throwing(player, itemStack, ballMagicObject.event, {x:xran,y:yran,z:zran});\r\n                player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + ballMagicObject.sendMsg + \"\\\"}]}\");\r\n            } else {\r\n                if (player.isSneaking) {\r\n                    let otherDownMagicObject = OtherDownMagicObjects.find(obj => obj.itemName == itemStack.typeId) as WandMagicObject;\r\n                    if (otherDownMagicObject) {\r\n                        player.runCommand(\"/function magic/\" + otherDownMagicObject.event);\r\n                        player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + otherDownMagicObject.sendMsg + \"\\\"}]}\");\r\n                    }\r\n                } else {\r\n                    let otherUpMagicObject = OtherUpMagicObjects.find(obj => obj.itemName == itemStack.typeId) as WandMagicObject;\r\n                    if (otherUpMagicObject) {\r\n                        player.runCommand(\"/function magic/\" + otherUpMagicObject.event);\r\n                        player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + otherUpMagicObject.sendMsg + \"\\\"}]}\");\r\n                    } \r\n                }\r\n            }\r\n   \r\n        }\r\n        let cool = itemStack.getComponent(ItemComponentTypes.Cooldown) as ItemCooldownComponent;\r\n        cool.startCooldown(player);\r\n    }\r\n\r\n}","import { Vector2, Vector3 } from \"@minecraft/server\";\r\nimport { print } from \"./commonUtil\";\r\n\r\n/**\r\n * 投擲発射位置\r\n * @param {Vector2} rotation\r\n * @param {Vector3} location\r\n */\r\nfunction getAdjacentSphericalPoints(rotation:Vector2, location:Vector3) {\r\n    let r = 1;  // 半径\r\n\r\n    let piNum = 75;\r\n    let xapply;\r\n    let yapply;\r\n    let zapply;\r\n    let xlocation;\r\n    let ylocation;\r\n    let zlocation;\r\n\r\n    // 西～北\r\n    if (rotation.y >= -90 && rotation.y < 0) {\r\n        let yRotax = -rotation.y / piNum;\r\n        let yRotaz = (rotation.y + 90) / piNum;\r\n        let yRota = -(rotation.x / piNum);\r\n        // 上～正面\r\n        if (rotation.x >= -90 && rotation.x < 0) {\r\n            let xRota = (rotation.x + 90) / piNum;\r\n            xlocation = location.x + (yRotax * xRota) * 1.75;\r\n            xapply = yRotax * xRota;\r\n\r\n            if (rotation.x <= -45) {\r\n                ylocation = (location.y + 1.25) + (yRota) * 1.5;\r\n            } else {\r\n                ylocation = (location.y + 1.5) + (yRota) * 1.25;\r\n            }\r\n            yapply = (yRota);\r\n\r\n            zlocation = location.z + (yRotaz * xRota) * 1.75;\r\n            zapply = yRotaz * xRota;\r\n\r\n        // 正面～下\r\n        } else if (rotation.x >= 0 && rotation.x <= 90) {\r\n            let xRota = -(rotation.x - 90) / piNum;\r\n            xlocation = location.x + (yRotax * xRota) * 1.75;\r\n            xapply = yRotax * xRota;\r\n\r\n            if (rotation.x >= 45) {\r\n                ylocation = (location.y + 1.25) + (yRota) * 1.5;\r\n            } else {\r\n                ylocation = (location.y + 1.25) + (yRota) * 1.25;\r\n            }\r\n            yapply = (yRota);\r\n\r\n            zlocation = location.z + (yRotaz * xRota) * 1.75;\r\n            zapply = yRotaz * xRota;\r\n\r\n        }\r\n\r\n    // 北～東\r\n    } else if (rotation.y >= 0 && rotation.y <= 90) {\r\n\r\n        let yRotax = rotation.y / piNum;\r\n        let yRotaz = -(rotation.y - 90) / piNum;\r\n        let yRota = -(rotation.x / piNum);\r\n        // 上～正面\r\n        if (rotation.x >= -90 && rotation.x < 0) {\r\n            let xRota = (rotation.x + 90) / piNum;\r\n\r\n            if (rotation.y >= 45) {\r\n                xlocation = location.x - (yRotax * xRota) * 1.75;\r\n            } else {\r\n                xlocation = location.x - (yRotax * xRota + 0.5) * 1.75;\r\n            }\r\n            xapply = -(yRotax * xRota);\r\n\r\n            if (rotation.x <= -45) {\r\n                ylocation = (location.y + 1.75) + (yRota) * 1.25;\r\n            } else {\r\n                ylocation = (location.y + 1.5) + (yRota) * 1.25;\r\n            }\r\n            yapply = (yRota);\r\n\r\n            if (rotation.y >= 45) {\r\n                zlocation = location.z + (yRotaz * xRota - 0.5) * 1.75;\r\n            } else {\r\n                zlocation = location.z + (yRotaz * xRota) * 1.75;\r\n            }\r\n\r\n            zapply = yRotaz * xRota;\r\n\r\n        // 正面～下\r\n        } else if (rotation.x >= 0 && rotation.x <= 90) {\r\n            let xRota = -(rotation.x - 90) / piNum;\r\n            if (rotation.y >= 45) {\r\n                xlocation = location.x - (yRotax * xRota) * 1.75;\r\n            } else {\r\n                xlocation = location.x - (yRotax * xRota + 0.5) * 1.75;\r\n            }\r\n            xapply = -(yRotax * xRota);\r\n\r\n            if (rotation.x >= 45) {\r\n                ylocation = (location.y + 1.75) + (yRota) * 1.25;\r\n            } else {\r\n                ylocation = (location.y + 1.25) + (yRota) * 1.25;\r\n            }\r\n            yapply = (yRota);\r\n\r\n            if (rotation.y >= 45) {\r\n                zlocation = location.z + (yRotaz * xRota - 0.5) * 1.75;\r\n            } else {\r\n                zlocation = location.z + (yRotaz * xRota) * 1.75;\r\n            }\r\n            zapply = yRotaz * xRota;\r\n\r\n        }\r\n\r\n    // 西～南\r\n    } else if (rotation.y < -90 && rotation.y > -180) {\r\n\r\n        let yRotax = (rotation.y + 180) / piNum;\r\n        let yRotaz = (rotation.y + 90) / piNum;\r\n        let yRota = -(rotation.x / piNum);\r\n        // 上～正面\r\n        if (rotation.x >= -90 && rotation.x < 0) {\r\n            let xRota = (rotation.x + 90) / piNum;\r\n            xlocation = location.x + (yRotax * xRota) * 1.75;\r\n            xapply = yRotax * xRota;\r\n\r\n            if (rotation.x <= -45) {\r\n                ylocation = (location.y + 1.25) + (yRota) * 1.5;\r\n            } else {\r\n                ylocation = (location.y + 1.5) + (yRota) * 1.25;\r\n            }\r\n            yapply = (yRota);\r\n\r\n            zlocation = location.z + (yRotaz * xRota) * 1.75;\r\n            zapply = yRotaz * xRota;\r\n\r\n        // 正面～下\r\n        } else if (rotation.x >= 0 && rotation.x <= 90) {\r\n            let xRota = -(rotation.x - 90) / piNum;\r\n            xlocation = location.x + (yRotax * xRota) * 1.75;\r\n            xapply = yRotax * xRota;\r\n\r\n            if (rotation.x >= 45) {\r\n                ylocation = (location.y + 1.25) + (yRota) * 1.5;\r\n            } else {\r\n                ylocation = (location.y + 1.25) + (yRota) * 1.25;\r\n            }\r\n            yapply = (yRota);\r\n\r\n            zlocation = location.z + (yRotaz * xRota) * 1.75;\r\n            zapply = yRotaz * xRota;\r\n\r\n        }\r\n\r\n    // 東～南\r\n    } else if (rotation.y > 90 && rotation.y <= 180) {\r\n        let yRotax = -(rotation.y - 180) / piNum;\r\n        let yRotaz = -(rotation.y - 90) / piNum;\r\n        let yRota = -(rotation.x / piNum);\r\n        // 上～正面\r\n        if (rotation.x >= -90 && rotation.x < 0) {\r\n            let xRota = (rotation.x + 90) / piNum;\r\n            xlocation = location.x - (yRotax * xRota) * 1.75;\r\n            xapply = -(yRotax * xRota);\r\n\r\n            if (rotation.x <= -45) {\r\n                ylocation = (location.y + 1.25) + (yRota) * 1.5;\r\n            } else {\r\n                ylocation = (location.y + 1.5) + (yRota) * 1.25;\r\n            }\r\n            yapply = (yRota);\r\n\r\n            if (rotation.y <= 135) {\r\n                zlocation = location.z + (yRotaz * xRota - 0.5) * 1.75;\r\n            } else {\r\n                zlocation = location.z + (yRotaz * xRota) * 1.75;\r\n            }\r\n\r\n            zapply = yRotaz * xRota;\r\n\r\n        // 正面～下\r\n        } else if (rotation.x >= 0 && rotation.x <= 90) {\r\n            let xRota = -(rotation.x - 90) / piNum;\r\n            xlocation = location.x - (yRotax * xRota) * 1.75;\r\n            xapply = -(yRotax * xRota);\r\n\r\n            if (rotation.x >= 45) {\r\n                ylocation = (location.y + 1.25) + (yRota) * 1.5;\r\n            } else {\r\n                ylocation = (location.y + 1.25) + (yRota) * 1.25;\r\n            }\r\n            yapply = (yRota);\r\n\r\n            if (rotation.y <= 135) {\r\n                zlocation = location.z + (yRotaz * xRota - 0.5) * 1.75;\r\n            } else {\r\n                zlocation = location.z + (yRotaz * xRota) * 1.75;\r\n            }\r\n            zapply = yRotaz * xRota;\r\n\r\n        }\r\n\r\n    }\r\n    return { xapply, yapply, zapply, xlocation, ylocation, zlocation };\r\n}\r\n\r\nexport { getAdjacentSphericalPoints }\r\n","import { ItemComponentTypes, ItemCooldownComponent, ItemStack, Player, Vector3 } from \"@minecraft/server\"\r\nimport { getAdjacentSphericalPoints } from \"../common/ShooterPoints\";\r\nimport { print, getRandomInRange } from \"../common/commonUtil\";\r\n\r\n/**\r\n * 投擲系魔法\r\n * @param {Player} player\r\n * @param {ItemStack} item\r\n * @param {string} throwItem\r\n * @param {Vector3} ranNum\r\n */\r\nfunction throwing(player:Player, item:ItemStack, throwItem:string, ranNum:Vector3) {\r\n\r\n    let {xapply, yapply, zapply, xlocation, ylocation, zlocation} = getAdjacentSphericalPoints(player.getRotation(), player.location);\r\n\r\n    let bulet = player.dimension.spawnEntity(throwItem, \r\n        {\r\n            x:xlocation! + ranNum.x,\r\n            y:ylocation! + ranNum.y,\r\n            z:zlocation! + ranNum.z\r\n        }\r\n    );\r\n    item.amount++;\r\n    bulet.setRotation({x:0,y:player.getRotation().y});\r\n    bulet.applyImpulse({x:xapply! * 1.5,y:yapply! * 1.5,z:zapply! * 1.5});\r\n\r\n}\r\n\r\n/**\r\n * 投射系魔法\r\n * @param {Player} player\r\n * @param {ItemStack} item\r\n * @param {string} throwItem\r\n * @param {Vector3} ranNum\r\n * @param {string} event\r\n */\r\nfunction shooting(player:Player, throwItem:string, ranNum:Vector3, seepd:number, event:string | undefined) {\r\n\r\n    let {xapply, yapply, zapply, xlocation, ylocation, zlocation} = getAdjacentSphericalPoints(player.getRotation(), player.location);\r\n\r\n    let bulet = player.dimension.spawnEntity(throwItem, \r\n        {\r\n            x:xlocation! + ranNum.x,\r\n            y:ylocation! + ranNum.y,\r\n            z:zlocation! + ranNum.z\r\n        }\r\n    );\r\n    \r\n    if (event) {\r\n        bulet.triggerEvent(event);\r\n    }\r\n\r\n    bulet.applyImpulse({x:xapply! * seepd,y:yapply! * seepd,z:zapply! * seepd});\r\n\r\n}\r\nexport {throwing, shooting};","import { Entity, ItemComponent, ItemComponentBeforeDurabilityDamageEvent, ItemComponentHitEntityEvent, ItemComponentTypes, ItemComponentUseEvent, ItemCooldownComponent, ItemCustomComponent, ItemStack, Player } from \"@minecraft/server\";\r\nimport { throwing } from \"../../../custom/ShooterMagicEvent\";\r\nimport { print, getRandomInRange } from \"../../../common/commonUtil\";\r\nimport { ItemDurabilityDamage } from \"../../../common/ItemDurabilityDamage\";\r\n\r\ninterface ShieldMagicObject {\r\n    itemName:string,\r\n    event:string\r\n    sendMsg:string\r\n}\r\n\r\nconst ShieldMagicObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:fire_wand\",\r\n        event: \"kurokumaft:fireballmagic\",\r\n        sendMsg: \"§cファイヤーボール\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:water_wand\",\r\n        event: \"kurokumaft:waterballmagic\",\r\n        sendMsg: \"§bウォーターボール\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:wind_wand\",\r\n        event: \"kurokumaft:windcuttermagic\",\r\n        sendMsg: \"§aウィンドカッター\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:stone_wand\",\r\n        event: \"kurokumaft:stonebarrettemagic\",\r\n        sendMsg: \"§7ストーンバレット\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:lightning_wand\",\r\n        event: \"kurokumaft:lightningboltmagic\",\r\n        sendMsg: \"§6ライトニングボルト\"\r\n    }\r\n\r\n]);\r\n\r\n/**\r\n * シールド\r\n */\r\nexport class ShieldMagic implements ItemCustomComponent {\r\n\r\n    // 通常攻撃\r\n    onBeforeDurabilityDamage(event:ItemComponentBeforeDurabilityDamageEvent) {\r\n        print(\"onBeforeDurabilityDamage\");\r\n        let attackEntity = event.attackingEntity as Entity;\r\n        let damage = event.durabilityDamage as number;\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let hitEntity = event.hitEntity as Entity;\r\n\r\n    }\r\n\r\n}","import { ItemCustomComponent, ItemComponentHitEntityEvent, ItemStack, Entity, world, ItemComponentUseEvent, Player, GameMode, EquipmentSlot, ItemComponentTypes, ItemCooldownComponent, ItemComponentUseOnEvent, ItemComponentCompleteUseEvent } from \"@minecraft/server\";\r\nimport { getRandomInRange } from \"../../../common/commonUtil\";\r\nimport { ItemDurabilityDamage } from \"../../../common/ItemDurabilityDamage\";\r\nimport { throwing } from \"../../../custom/ShooterMagicEvent\";\r\n\r\ninterface SwordMagicObject {\r\n    itemName:string,\r\n    event:string\r\n    sendMsg:string\r\n}\r\n\r\nconst SwordHitObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:fire_magic_sword\",\r\n        event: \"fire/fire_sword\",\r\n        sendMsg: \"§cフレイムソード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:water_magic_sword\",\r\n        event: \"water/water_sword\",\r\n        sendMsg: \"§bウォーターソード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:wind_magic_sword\",\r\n        event: \"wind/wind_sword\",\r\n        sendMsg: \"§aウィンドソード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:stone_magic_sword\",\r\n        event: \"stone/stone_sword\",\r\n        sendMsg: \"§7ストーンソード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:thunder_magic_sword\",\r\n        event: \"lightning/thunder_sword\",\r\n        sendMsg: \"§6サンダーソード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:ice_magic_sword\",\r\n        event: \"ice/ice_sword\",\r\n        sendMsg: \"§fアイスソード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:dark_magic_sword\",\r\n        event: \"dark/dark_sword\",\r\n        sendMsg: \"§8ダークソード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:holly_magic_sword\",\r\n        event: \"light/holly_sword\",\r\n        sendMsg: \"§eホーリーソード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:rainbow_magic_sword\",\r\n        event: \"rainbow/rainbow_sword\",\r\n        sendMsg: \"§5レ§1イ§9ン§aボー§eソ§6ー§4ド\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:phoenix_sword\",\r\n        event: \"fire/fire_sword\",\r\n        sendMsg: \"§cフレイムソード\"\r\n    }\r\n]);\r\n\r\nconst SwordHitMonsObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:fire_magic_sword\",\r\n        event: \"fire/fire_sword\",\r\n        sendMsg: \"§cフレイムソード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:water_magic_sword\",\r\n        event: \"water/water_sword\",\r\n        sendMsg: \"§bウォーターソード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:wind_magic_sword\",\r\n        event: \"wind/wind_sword\",\r\n        sendMsg: \"§aウィンドソード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:stone_magic_sword\",\r\n        event: \"stone/stone_sword\",\r\n        sendMsg: \"§7ストーンソード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:thunder_magic_sword\",\r\n        event: \"lightning/thunder_sword\",\r\n        sendMsg: \"§6サンダーソード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:ice_magic_sword\",\r\n        event: \"ice/ice_sword\",\r\n        sendMsg: \"§fアイスソード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:dark_magic_sword\",\r\n        event: \"dark/dark_sword\",\r\n        sendMsg: \"§8ダークソード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:holly_magic_sword\",\r\n        event: \"light/holly_sword\",\r\n        sendMsg: \"§eホーリーソード\"\r\n    }\r\n\r\n]);\r\n\r\nconst SwordChargeObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:phoenix_sword\",\r\n        event: \"fire/blaze_burst\",\r\n        sendMsg: \"§cブレイズバースト\"\r\n    }\r\n]);\r\n\r\n/**\r\n * ソード系魔法\r\n */\r\nexport class SwordWeaponMagic implements ItemCustomComponent {\r\n\r\n    // 通常攻撃\r\n    onHitEntity(event:ItemComponentHitEntityEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let attackEntity = event.attackingEntity as Entity;\r\n        let hitEntity = event.hitEntity as Entity;\r\n        let effect = event.hadEffect as boolean;\r\n\r\n        if (!itemStack) {\r\n            return;\r\n        }\r\n        let swordMagicObject = SwordHitObjects.find(obj => obj.itemName == itemStack.typeId) as SwordMagicObject;\r\n        hitEntity.runCommand(\"/function magic/\" + swordMagicObject.event);\r\n        if (attackEntity instanceof Player && attackEntity.getGameMode() != GameMode.creative) {\r\n            ItemDurabilityDamage(attackEntity, itemStack, EquipmentSlot.Mainhand);\r\n        }\r\n\r\n    }\r\n\r\n    // チャージ完了\r\n    onCompleteUse(event:ItemComponentCompleteUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        if (!itemStack) {\r\n            return;\r\n        }\r\n        let swordChargeMagicObject = SwordChargeObjects.find(obj => obj.itemName == itemStack.typeId) as SwordMagicObject;\r\n        player.runCommand(\"/function magic/\" + swordChargeMagicObject.event);\r\n        if (player.getGameMode() != GameMode.creative) {\r\n            ItemDurabilityDamage(player, itemStack, EquipmentSlot.Mainhand);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * ソード系魔法（モンスター）\r\n */\r\nexport class SwordWeaponMagicMons implements ItemCustomComponent {\r\n\r\n    // 通常攻撃\r\n    onHitEntity(event:ItemComponentHitEntityEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let attackEntity = event.attackingEntity as Entity;\r\n        let hitEntity = event.hitEntity as Entity;\r\n        let effect = event.hadEffect as boolean;\r\n\r\n        if (!itemStack) {\r\n            return;\r\n        }\r\n        let swordMagicObject = SwordHitMonsObjects.find(obj => obj.itemName == itemStack.typeId) as SwordMagicObject;\r\n        hitEntity.runCommand(\"/function monster/\" + swordMagicObject.event);\r\n        attackEntity.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + swordMagicObject.sendMsg + \"\\\"}]}\");\r\n        ItemDurabilityDamage(attackEntity, itemStack, EquipmentSlot.Mainhand);\r\n\r\n    }\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n    }\r\n\r\n    // ブロッククリック\r\n    onUseOn(event:ItemComponentUseOnEvent) {\r\n    }\r\n}","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player, GameMode, EquipmentSlot, ItemComponentUseOnEvent, system, ItemComponentCompleteUseEvent } from \"@minecraft/server\";\r\nimport { getRandomInRange, clamp } from \"../../../common/commonUtil\";\r\nimport { ItemDurabilityDamage } from \"../../../common/ItemDurabilityDamage\";\r\nimport { shooting } from \"../../../custom/ShooterMagicEvent\";\r\n\r\ninterface BowMagicObject {\r\n    itemName:string,\r\n    event:string\r\n    sendMsg:string,\r\n    maxduration:number,\r\n    addition:number\r\n}\r\n\r\nconst BowChargeObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:fire_magic_bow\",\r\n        event: \"kurokumaft:fire_magic_arrow\",\r\n        sendMsg: \"§cフレイムアロー\",\r\n        maxduration: 30,\r\n        addition: 1.5\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:water_magic_bow\",\r\n        event: \"kurokumaft:water_magic_arrow\",\r\n        sendMsg: \"§bウォーターアロー\",\r\n        maxduration: 10,\r\n        addition: 1.5\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:wind_magic_bow\",\r\n        event: \"kurokumaft:wind_magic_arrow\",\r\n        sendMsg: \"§aウィンドアロー\",\r\n        maxduration: 1,\r\n        addition: 2.5\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:stone_magic_bow\",\r\n        event: \"kurokumaft:stone_magic_arrow\",\r\n        sendMsg: \"§7ロックアロー\",\r\n        maxduration: 20,\r\n        addition: 0.75\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:lightning_magic_bow\",\r\n        event: \"kurokumaft:lightning_magic_arrow\",\r\n        sendMsg: \"§6ライトニングアロー\",\r\n        maxduration: 20,\r\n        addition: 2.0\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:ice_magic_bow\",\r\n        event: \"kurokumaft:ice_magic_arrow\",\r\n        sendMsg: \"§fアイスアロー\",\r\n        maxduration: 15,\r\n        addition: 1.5\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:dark_magic_bow\",\r\n        event: \"kurokumaft:dark_magic_arrow\",\r\n        sendMsg: \"§8ダークアロー\",\r\n        maxduration: 10,\r\n        addition: 1.5\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:holly_magic_bow\",\r\n        event: \"kurokumaft:holly_magic_arrow\",\r\n        sendMsg: \"§eホーリーアロー\",\r\n        maxduration: 10,\r\n        addition: 1.5\r\n    }\r\n]);\r\n\r\n\r\n/**\r\n * 弓系魔法\r\n */\r\nexport class BowShotMagic implements ItemCustomComponent {\r\n\r\n    // チャージ完了\r\n    onCompleteUse(event:ItemComponentCompleteUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n    }\r\n    \r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n\r\n        if (!itemStack) {\r\n            return;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * 右クリックリリース後に矢を発射する\r\n * \r\n * @param {Player} player\r\n * @param {ItemStack} itemStack\r\n * @param {number} duration\r\n */\r\nasync function magicBowShot(player:Player, itemStack:ItemStack, duration:number) {\r\n\r\n    player.setDynamicProperty(\"BowShotMagicCharge\", false);\r\n\r\n    let bowMagicObject = BowChargeObjects.find(obj => obj.itemName == itemStack.typeId) as BowMagicObject;\r\n    if (bowMagicObject) {\r\n\r\n        let xran = parseFloat(getRandomInRange(-0.1, 0.1).toFixed(3));\r\n        let yran = parseFloat(getRandomInRange(-0.1, 0.1).toFixed(3));\r\n        let zran = parseFloat(getRandomInRange(-0.1, 0.1).toFixed(3));\r\n\r\n        let speed = Math.ceil(clamp((-duration) / bowMagicObject.maxduration, 0.0, 3.0) * bowMagicObject.addition);\r\n        if (itemStack.typeId == \"kurokumaft:wind_magic_bow\") {\r\n            let intervalNum = system.runInterval(() => {\r\n                shooting(player, bowMagicObject.event, {x:xran,y:yran,z:zran}, speed, undefined);\r\n            }, 2);\r\n            system.runTimeout(() => {\r\n                system.clearRun(intervalNum);\r\n            }, 10);\r\n        } else {\r\n            shooting(player, bowMagicObject.event, {x:xran,y:yran,z:zran}, speed, undefined);\r\n        }\r\n        if (player.getGameMode() != GameMode.creative) {\r\n            ItemDurabilityDamage(player, itemStack, EquipmentSlot.Mainhand);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport {magicBowShot}\r\n","import { EntityComponentTypes, EntityEquippableComponent, EquipmentSlot, Player, system, world } from \"@minecraft/server\";\r\nimport { MagicHelmetSurveillance } from \"../items/weapon/armor/MagicHelmetSurveillance\";\r\nimport { MagicChestSurveillance } from \"../items/weapon/armor/MagicChestSurveillance\";\r\nimport { MagicLeggingsSurveillance } from \"../items/weapon/armor/MagicLeggingsSurveillance\";\r\nimport { MagicBootsSurveillance } from \"../items/weapon/armor/MagicBootsSurveillance\";\r\n\r\nasync function checkPlayerEquTick() {\r\n\r\n    let players = world.getPlayers() as Player[];\r\n\r\n    for (let i = 0; i < players.length; i++) {\r\n        let player = players[i];\r\n        let equ = player.getComponent(EntityComponentTypes.Equippable) as EntityEquippableComponent;\r\n        let offHand = equ.getEquipment(EquipmentSlot.Offhand);\r\n        if (offHand) {\r\n            if (offHand.hasTag(\"kurokumaft:magic_shield\") && player.isSneaking) {\r\n                if (!player.hasTag(\"off_shield_guard\")) {\r\n                    player.addTag(\"off_shield_guard\");\r\n                }\r\n            } else {\r\n                if (player.hasTag(\"off_shield_guard\")) {\r\n                    player.removeTag(\"off_shield_guard\");\r\n                }\r\n            }\r\n        }\r\n        let mainHand = equ.getEquipment(EquipmentSlot.Mainhand);\r\n        if (mainHand) {\r\n            if (mainHand.hasTag(\"kurokumaft:magic_shield\") && player.isSneaking) {\r\n                if (!player.hasTag(\"main_shield_guard\")) {\r\n                    player.addTag(\"main_shield_guard\");\r\n                }\r\n            } else {\r\n                if (player.hasTag(\"main_shield_guard\")) {\r\n                    player.removeTag(\"main_shield_guard\");\r\n                }\r\n            }\r\n        }\r\n        let head = equ.getEquipment(EquipmentSlot.Head);\r\n        if (head) {\r\n            if (!player.getDynamicProperty(\"magic_helmet_equ\")) {\r\n                new MagicHelmetSurveillance(player, head).checkMagicHelmetTick();\r\n            }\r\n        } else {\r\n            player.setDynamicProperty(\"magic_helmet_equ\", false);\r\n        }\r\n        let chest = equ.getEquipment(EquipmentSlot.Chest);\r\n        if (chest) {\r\n            if (!player.getDynamicProperty(\"magic_chest_equ\")) {\r\n                new MagicChestSurveillance(player, chest).checkMagicChestTick();\r\n            }\r\n        } else {\r\n            player.setDynamicProperty(\"magic_chest_equ\", false);\r\n        }\r\n        let legs = equ.getEquipment(EquipmentSlot.Legs);\r\n        if (legs) {\r\n            if (!player.getDynamicProperty(\"magic_leg_equ\")) {\r\n                new MagicLeggingsSurveillance(player, legs).checkMagicLeggingsTick();\r\n            }\r\n        } else {\r\n            player.setDynamicProperty(\"magic_leg_equ\", false);\r\n        }\r\n        let feet = equ.getEquipment(EquipmentSlot.Feet);\r\n        if (feet) {\r\n            if (!player.getDynamicProperty(\"magic_boot_equ\")) {\r\n                new MagicBootsSurveillance(player, feet).checkMagicBootsTick();\r\n            }\r\n        } else {\r\n            player.setDynamicProperty(\"magic_boot_equ\", false);\r\n        }\r\n    }\r\n\r\n    system.run(checkPlayerEquTick);\r\n}\r\n\r\nexport {checkPlayerEquTick}","import { Player, ItemStack, EntityComponentTypes, EntityEquippableComponent, EquipmentSlot, system, world, BlockPermutation, ButtonPushAfterEvent, DimensionLocation, TicksPerSecond} from \"@minecraft/server\";\r\n\r\ninterface MagicHelmetObject {\r\n    itemName:string,\r\n    func: any,\r\n    delay: number,\r\n    removeFunc: any\r\n}\r\n\r\nconst MagicHelmetObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:fire_magic_helmet\",\r\n        func: fireResistanceEffect,\r\n        delay: TicksPerSecond * 10,\r\n        removeFunc: fireResistanceEffectReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:water_magic_helmet\",\r\n        func: waterBreathingEffect,\r\n        delay: TicksPerSecond * 10,\r\n        removeFunc: waterBreathingEffectReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:stone_magic_helmet\",\r\n        func: resistanceEffect,\r\n        delay: TicksPerSecond * 10,\r\n        removeFunc: resistanceEffectReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:ice_magic_helmet\",\r\n        func: nightVisionEffect,\r\n        delay: TicksPerSecond * 10,\r\n        removeFunc: nightVisionEffectReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:nether_fire_magic_helmet\",\r\n        func: fireResistanceEffect,\r\n        delay: TicksPerSecond * 10,\r\n        removeFunc: fireResistanceEffectReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:nether_water_magic_helmet\",\r\n        func: waterBreathingEffect,\r\n        delay: TicksPerSecond * 10,\r\n        removeFunc: waterBreathingEffectReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:nether_stone_magic_helmet\",\r\n        func: resistanceEffect,\r\n        delay: TicksPerSecond * 10,\r\n        removeFunc: resistanceEffectReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:nether_ice_magic_helmet\",\r\n        func: nightVisionEffect,\r\n        delay: TicksPerSecond * 10,\r\n        removeFunc: nightVisionEffectReset\r\n    }\r\n\r\n]);\r\n\r\n/**\r\n * 頭装備状態チェック監視クラス\r\n */\r\nexport class MagicHelmetSurveillance {\r\n    player: Player;\r\n    itemStack:ItemStack;\r\n\r\n    constructor(player: Player, itemStack:ItemStack) {\r\n        this.player = player;\r\n        this.itemStack = itemStack;\r\n    }\r\n\r\n    /**\r\n     * 頭装備状態チェック\r\n     */\r\n    checkMagicHelmetTick() {\r\n        this.checkJob();\r\n    };\r\n\r\n    private async checkJob() {\r\n\r\n        let equItem = MagicHelmetObjects.find(obj => obj.itemName == this.itemStack.typeId) as MagicHelmetObject;\r\n        let equ = this.player.getComponent(EntityComponentTypes.Equippable) as EntityEquippableComponent;\r\n        let head = equ.getEquipment(EquipmentSlot.Head) as ItemStack;\r\n\r\n        if (head != null && head.typeId == equItem.itemName) {\r\n            this.player.setDynamicProperty(\"magic_helmet_equ\", true);\r\n            equItem.func(this.player);\r\n            system.runTimeout(() => {\r\n                system.run(this.checkJob.bind(this));\r\n            }, equItem.delay);\r\n        } else {\r\n            equItem.removeFunc(this.player);\r\n            this.player.setDynamicProperty(\"magic_helmet_equ\", false);\r\n        }\r\n    };\r\n}\r\n\r\nasync function fireResistanceEffect(player:Player) {\r\n    player.addEffect(\"fire_resistance\", TicksPerSecond * 60, {\r\n        amplifier: 5,\r\n        showParticles: false\r\n    });\r\n}\r\n\r\nasync function waterBreathingEffect(player:Player) {\r\n    player.addEffect(\"water_breathing\", TicksPerSecond * 60, {\r\n        amplifier: 5,\r\n        showParticles: false\r\n    });\r\n}\r\n\r\nasync function resistanceEffect(player:Player) {\r\n    player.addEffect(\"resistance\", TicksPerSecond * 60, {\r\n        amplifier: 3,\r\n        showParticles: false\r\n    });\r\n}\r\n\r\nasync function nightVisionEffect(player:Player) {\r\n    player.addEffect(\"night_vision\", TicksPerSecond * 60, {\r\n        amplifier: 10,\r\n        showParticles: false\r\n    });\r\n}\r\n\r\nasync function fireResistanceEffectReset(player:Player) {\r\n    player.removeEffect(\"fire_resistance\");\r\n}\r\n\r\nasync function waterBreathingEffectReset(player:Player) {\r\n    player.removeEffect(\"water_breathing\");\r\n}\r\n\r\nasync function resistanceEffectReset(player:Player) {\r\n    player.removeEffect(\"resistance\");\r\n}\r\n\r\nasync function nightVisionEffectReset(player:Player) {\r\n    player.removeEffect(\"night_vision\");\r\n}\r\n","import { Player, ItemStack, EntityComponentTypes, EntityEquippableComponent, EquipmentSlot, system, world, TicksPerSecond} from \"@minecraft/server\";\r\n\r\ninterface MagicChestObject {\r\n    itemName:string,\r\n    func: any,\r\n    delay: number,\r\n    removeFunc: any\r\n}\r\n\r\nconst MagicChestObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:fire_magic_chestplate\",\r\n        func: fireAttackUp,\r\n        delay: TicksPerSecond,\r\n        removeFunc: fireAttackReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:water_magic_chestplate\",\r\n        func: waterHealthUp,\r\n        delay: TicksPerSecond * 5,\r\n        removeFunc: waterHealthReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:ice_magic_chestplate\",\r\n        func: lavaFreeze,\r\n        delay: 10,\r\n        removeFunc: lavaFreezeReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:nether_fire_magic_chestplate\",\r\n        func: fireAttackUp,\r\n        delay: TicksPerSecond,\r\n        removeFunc: fireAttackReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:nether_water_magic_chestplate\",\r\n        func: waterHealthUp,\r\n        delay: TicksPerSecond * 5,\r\n        removeFunc: waterHealthReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:nether_ice_magic_chestplate\",\r\n        func: lavaFreeze,\r\n        delay: 10,\r\n        removeFunc: lavaFreezeReset\r\n    }\r\n\r\n]);\r\n\r\n/**\r\n * 胴装備状態チェック監視クラス\r\n */\r\nexport class MagicChestSurveillance {\r\n    player: Player;\r\n    itemStack:ItemStack;\r\n\r\n    constructor(player: Player, itemStack:ItemStack) {\r\n        this.player = player;\r\n        this.itemStack = itemStack;\r\n    }\r\n\r\n    /**\r\n     * 胴装備状態チェック\r\n     */\r\n    checkMagicChestTick() {\r\n        this.checkJob();\r\n    };\r\n\r\n    private async checkJob() {\r\n\r\n        let equItem = MagicChestObjects.find(obj => obj.itemName == this.itemStack.typeId) as MagicChestObject;\r\n        let equ = this.player.getComponent(EntityComponentTypes.Equippable) as EntityEquippableComponent;\r\n        let chest = equ.getEquipment(EquipmentSlot.Chest) as ItemStack;\r\n\r\n        if (chest != null && chest.typeId == equItem.itemName) {\r\n            this.player.setDynamicProperty(\"magic_chest_equ\", true);\r\n            equItem.func(this.player);\r\n            system.runTimeout(() => {\r\n                system.run(this.checkJob.bind(this));\r\n            }, equItem.delay);\r\n        } else {\r\n            equItem.removeFunc(this.player);\r\n            this.player.setDynamicProperty(\"magic_Chest_equ\", false);\r\n        }\r\n    };\r\n}\r\n\r\nasync function fireAttackUp(player:Player) {\r\n    player.runCommand(\"/event entity @s kurokumaft:attack20_up\");\r\n}\r\n\r\nasync function waterHealthUp(player:Player) {\r\n    player.runCommand(\"/event entity @s kurokumaft:health40_up\");\r\n}\r\n\r\nasync function lavaFreeze(player:Player) {\r\n    player.runCommand(\"/execute as @s if block ^1^1^ lava run setblock ^1^1^ air\");\r\n    player.runCommand(\"/execute as @s if block ^-1^1^ lava run setblock ^-1^1^ air\");\r\n    player.runCommand(\"/execute as @s if block ^^1^1 lava run setblock ^^1^1 air\");\r\n    player.runCommand(\"/execute as @s if block ^^1^-1 lava run setblock ^^1^-1 air\");\r\n    player.runCommand(\"/execute as @s if block ^^1^-1 lava run setblock ^^1^-1 air\");\r\n    player.runCommand(\"/execute as @s if block ^-1^2^ lava run setblock ^-1^2^ air\");\r\n    player.runCommand(\"/execute as @s if block ^^2^1 lava run setblock ^^2^1 air\");\r\n    player.runCommand(\"/execute as @s if block ^^2^-1 lava run setblock ^^2^-1 air\");\r\n    player.runCommand(\"/execute as @s if block ^^3^ lava run setblock ^^3^ air\");\r\n}\r\n\r\nasync function fireAttackReset(player:Player) {\r\n    player.runCommand(\"/event entity @s kurokumaft:attack_down\");\r\n}\r\n\r\nasync function waterHealthReset(player:Player) {\r\n    player.runCommand(\"/event entity @s kurokumaft:health_down\");\r\n}\r\n\r\nasync function lavaFreezeReset(player:Player) {\r\n}","import { Player, ItemStack, EntityComponentTypes, EntityEquippableComponent, EquipmentSlot, system, world, TicksPerSecond} from \"@minecraft/server\";\r\n\r\ninterface MagicLeggingsObject {\r\n    itemName:string,\r\n    func: any,\r\n    delay: number,\r\n    removeFunc: any\r\n}\r\n\r\nconst MagicLeggingsObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:fire_magic_leggings\",\r\n        func: jumpBoostEffect,\r\n        delay: TicksPerSecond * 10,\r\n        removeFunc: jumpBoostEffectReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:water_magic_leggings\",\r\n        func: waterRegenerationEffect,\r\n        delay: TicksPerSecond * 10,\r\n        removeFunc: waterRegenerationEffectReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:ice_magic_leggings\",\r\n        func: iceResistanceEffect,\r\n        delay: TicksPerSecond * 10,\r\n        removeFunc: iceResistanceEffectReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:nether_fire_magic_leggings\",\r\n        func: jumpBoostEffect,\r\n        delay: TicksPerSecond * 10,\r\n        removeFunc: jumpBoostEffectReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:nether_water_magic_leggings\",\r\n        func: waterRegenerationEffect,\r\n        delay: TicksPerSecond * 10,\r\n        removeFunc: waterRegenerationEffectReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:nether_ice_magic_leggings\",\r\n        func: iceResistanceEffect,\r\n        delay: TicksPerSecond * 10,\r\n        removeFunc: iceResistanceEffectReset\r\n    }\r\n\r\n]);\r\n\r\n/**\r\n * 胴装備状態チェック監視クラス\r\n */\r\nexport class MagicLeggingsSurveillance {\r\n    player: Player;\r\n    itemStack:ItemStack;\r\n\r\n    constructor(player: Player, itemStack:ItemStack) {\r\n        this.player = player;\r\n        this.itemStack = itemStack;\r\n    }\r\n\r\n    /**\r\n     * 胴装備状態チェック\r\n     */\r\n    checkMagicLeggingsTick() {\r\n        this.checkJob();\r\n    };\r\n\r\n    private async checkJob() {\r\n\r\n        let equItem = MagicLeggingsObjects.find(obj => obj.itemName == this.itemStack.typeId) as MagicLeggingsObject;\r\n        let equ = this.player.getComponent(EntityComponentTypes.Equippable) as EntityEquippableComponent;\r\n        let leg = equ.getEquipment(EquipmentSlot.Legs) as ItemStack;\r\n\r\n        if (leg != null && leg.typeId == equItem.itemName) {\r\n            this.player.setDynamicProperty(\"magic_leg_equ\", true);\r\n            equItem.func(this.player);\r\n            system.runTimeout(() => {\r\n                system.run(this.checkJob.bind(this));\r\n            }, equItem.delay);\r\n        } else {\r\n            equItem.removeFunc(this.player);\r\n            this.player.setDynamicProperty(\"magic_leg_equ\", false);\r\n        }\r\n    };\r\n}\r\n\r\nasync function jumpBoostEffect(player:Player) {\r\n    player.addEffect(\"jump_boost\", TicksPerSecond * 60, {\r\n        amplifier: 1,\r\n        showParticles: false\r\n    });\r\n}\r\n\r\nasync function waterRegenerationEffect(player:Player) {\r\n    player.addEffect(\"regeneration\", TicksPerSecond * 60, {\r\n        amplifier: 2,\r\n        showParticles: false\r\n    });\r\n}\r\n\r\nasync function iceResistanceEffect(player:Player) {\r\n    player.addEffect(\"fire_resistance\", TicksPerSecond * 60, {\r\n        amplifier: 5,\r\n        showParticles: false\r\n    });\r\n}\r\n\r\nasync function jumpBoostEffectReset(player:Player) {\r\n    player.removeEffect(\"jump_boost\");\r\n}\r\n\r\nasync function waterRegenerationEffectReset(player:Player) {\r\n    player.removeEffect(\"regeneration\");\r\n}\r\nasync function iceResistanceEffectReset(player:Player) {\r\n    player.removeEffect(\"fire_resistance\");\r\n}\r\n","import { Player, ItemStack, EntityComponentTypes, EntityEquippableComponent, EquipmentSlot, system, world, TicksPerSecond} from \"@minecraft/server\";\r\n\r\ninterface MagicBootsObject {\r\n    itemName:string,\r\n    func: any,\r\n    delay: number,\r\n    removeFunc: any\r\n}\r\n\r\nconst MagicBootsObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:fire_magic_boots\",\r\n        func: lavaWalker,\r\n        delay: 1,\r\n        removeFunc: lavaWalkerReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:water_magic_boots\",\r\n        func: waterSpeedUp,\r\n        delay: TicksPerSecond * 1,\r\n        removeFunc: waterSpeedReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:wind_magic_boots\",\r\n        func: windSpeedUp,\r\n        delay: TicksPerSecond * 1,\r\n        removeFunc: windSpeedReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:lightning_magic_boots\",\r\n        func: lightningSpeedUp,\r\n        delay: TicksPerSecond * 1,\r\n        removeFunc: lightningSpeedReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:ice_magic_boots\",\r\n        func: iceWalker,\r\n        delay: 5,\r\n        removeFunc: iceWalkerReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:nether_fire_magic_boots\",\r\n        func: lavaWalker,\r\n        delay: 1,\r\n        removeFunc: lavaWalkerReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:nether_water_magic_boots\",\r\n        func: waterSpeedUp,\r\n        delay: TicksPerSecond * 1,\r\n        removeFunc: waterSpeedReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:nether_wind_magic_boots\",\r\n        func: windSpeedUp,\r\n        delay: TicksPerSecond * 1,\r\n        removeFunc: windSpeedReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:nether_lightning_magic_boots\",\r\n        func: lightningSpeedUp,\r\n        delay: TicksPerSecond * 1,\r\n        removeFunc: lightningSpeedReset\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:nether_ice_magic_boots\",\r\n        func: iceWalker,\r\n        delay: 5,\r\n        removeFunc: iceWalkerReset\r\n    }\r\n\r\n]);\r\n\r\n/**\r\n * 胴装備状態チェック監視クラス\r\n */\r\nexport class MagicBootsSurveillance {\r\n    player: Player;\r\n    itemStack:ItemStack;\r\n\r\n    constructor(player: Player, itemStack:ItemStack) {\r\n        this.player = player;\r\n        this.itemStack = itemStack;\r\n    }\r\n\r\n    /**\r\n     * 胴装備状態チェック\r\n     */\r\n    checkMagicBootsTick() {\r\n        this.checkJob();\r\n    };\r\n\r\n    private async checkJob() {\r\n\r\n        let equItem = MagicBootsObjects.find(obj => obj.itemName == this.itemStack.typeId) as MagicBootsObject;\r\n        let equ = this.player.getComponent(EntityComponentTypes.Equippable) as EntityEquippableComponent;\r\n        let boot = equ.getEquipment(EquipmentSlot.Feet) as ItemStack;\r\n\r\n        if (boot != null && boot.typeId == equItem.itemName) {\r\n            this.player.setDynamicProperty(\"magic_boot_equ\", true);\r\n            equItem.func(this.player);\r\n            system.runTimeout(() => {\r\n                system.run(this.checkJob.bind(this));\r\n            }, equItem.delay);\r\n        } else {\r\n            equItem.removeFunc(this.player);\r\n            this.player.setDynamicProperty(\"magic_boot_equ\", false);\r\n        }\r\n    };\r\n}\r\n\r\nasync function lavaWalker(player:Player) {\r\n    player.runCommand(\"/execute as @s if block ~~-1~ lava run setblock ~~-1~ magma\");\r\n    player.runCommand(\"/execute as @s if block ~~-1~ flowing_lava run setblock ~~-1~ magma\");\r\n}\r\n\r\nasync function waterSpeedUp(player:Player) {\r\n    if (player.isInWater) {\r\n        player.runCommand(\"/event entity @s kurokumaft:water_speed_walker_up\");\r\n    } else {\r\n        player.runCommand(\"/event entity @s kurokumaft:water_speed_walker_down\");\r\n    }\r\n}\r\n\r\nasync function windSpeedUp(player:Player) {\r\n    if (!player.isInWater) {\r\n        player.runCommand(\"/event entity @s kurokumaft:speed_walker_up\");\r\n    } else {\r\n        player.runCommand(\"/event entity @s kurokumaft:speed_walker_down\");\r\n    }\r\n}\r\n\r\nasync function lightningSpeedUp(player:Player) {\r\n    player.runCommand(\"/event entity @s kurokumaft:speed_walker_up4\");\r\n}\r\n\r\nasync function iceWalker(player:Player) {\r\n    player.runCommand(\"/execute as @s if block ~~-1~ water run setblock ~~-1~ packed_ice\");\r\n    player.runCommand(\"/execute as @s if block ~~-1~ flowing_water run setblock ~~-1~ packed_ice\");\r\n}\r\n\r\nasync function lavaWalkerReset(player:Player) {\r\n}\r\n\r\nasync function waterSpeedReset(player:Player) {\r\n    player.runCommand(\"/event entity @s kurokumaft:water_speed_walker_down\");\r\n}\r\n\r\nasync function windSpeedReset(player:Player) {\r\n    player.runCommand(\"/event entity @s kurokumaft:speed_walker_down\");\r\n}\r\n\r\nasync function lightningSpeedReset(player:Player) {\r\n    player.runCommand(\"/event entity @s kurokumaft:speed_walker_down\");\r\n}\r\n\r\nasync function iceWalkerReset(player:Player) {\r\n}\r\n","import { Entity, EquipmentSlot, GameMode, ItemComponent, ItemComponentHitEntityEvent, ItemComponentTypes, ItemComponentUseEvent, ItemComponentUseOnEvent, ItemCooldownComponent, ItemCustomComponent, ItemStack, Player, system, world } from \"@minecraft/server\";\r\nimport { shooting, throwing } from \"../../../custom/ShooterMagicEvent\";\r\nimport { print, getRandomInRange, clamp } from \"../../../common/commonUtil\";\r\nimport { ItemDurabilityDamage } from \"../../../common/ItemDurabilityDamage\";\r\nimport { aquaShot, tidalWave } from \"./WaterCurrentMagic\";\r\nimport { atmosphere } from \"./AtmosphereMagic\";\r\nimport { gravityField } from \"./EarthMagic\";\r\nimport { lightningStrike } from \"./LightningStrikeMagic\";\r\nimport { blackHole } from \"./JetBlackMagic\";\r\nimport { hollyField } from \"./SparkleMagic\";\r\n\r\ninterface StickMagicObject {\r\n    itemName:string,\r\n    event:string\r\n    sendMsg:string,\r\n    addition:number,\r\n    func: any\r\n}\r\n\r\nconst StickHitObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:blaze_stick\",\r\n        event: \"fire/flame_shock\",\r\n        sendMsg: \"§cフレイムショック\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:watercurrent_stick\",\r\n        event: \"water/splash\",\r\n        sendMsg: \"§bスプラッシュ\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:atmosphere_stick\",\r\n        event: \"wind/storm_shock\",\r\n        sendMsg: \"§aストームショック\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:earth_stick\",\r\n        event: \"stone/earth_shock\",\r\n        sendMsg: \"§7アースショック\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:lightningstrike_stick\",\r\n        event: \"lightning/spark_shock\",\r\n        sendMsg: \"§6スパークショック\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:blockice_stick\",\r\n        event: \"ice/powdered_snow\",\r\n        sendMsg: \"§fアイスショック\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:jetblack_stick\",\r\n        event: \"dark/jetblack_shock\",\r\n        sendMsg: \"§8ジェットブラック\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:sparkle_stick\",\r\n        event: \"light/sparkle_light\",\r\n        sendMsg: \"§eスパークルライト\"\r\n    }\r\n\r\n]);\r\n\r\nconst StickShotMagicObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:blaze_stick\",\r\n        event: \"kurokumaft:valleleflairmagic\",\r\n        sendMsg: \"§cヴァルフレア\",\r\n        addition: 2\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:atmosphere_stick\",\r\n        event: \"kurokumaft:storm_cutter_magic\",\r\n        sendMsg: \"§aストームカッター\",\r\n        addition: 5\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:earth_stick\",\r\n        event: \"kurokumaft:stone_edge_magic\",\r\n        sendMsg: \"§7ストーンエッジ\",\r\n        addition: 2\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:lightningstrike_stick\",\r\n        event: \"kurokumaft:thunder_lance_magic\",\r\n        sendMsg: \"§6サンダーランス\",\r\n        addition: 6\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:blockice_stick\",\r\n        event: \"kurokumaft:ice_lance_magic\",\r\n        sendMsg: \"§fアイスランス\",\r\n        addition: 4\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:jetblack_stick\",\r\n        event: \"kurokumaft:dark_lance_magic\",\r\n        sendMsg: \"§8ダークランス\",\r\n        addition: 4\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:sparkle_stick\",\r\n        event: \"kurokumaft:holly_lance_magic\",\r\n        sendMsg: \"§eホーリーランス\",\r\n        addition: 4\r\n    }\r\n\r\n]);\r\n\r\nconst StickRightOneMagicObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:watercurrent_stick\",\r\n        func: aquaShot,\r\n        sendMsg: \"§bアクアショット\"\r\n    }\r\n\r\n]);\r\n\r\nconst StickRightEventMagicObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:blaze_stick\",\r\n        event: \"fire/blastbomb\",\r\n        sendMsg: \"§cブラストボム\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:blockice_stick\",\r\n        event: \"ice/ice_block\",\r\n        sendMsg: \"§fアイスブロック\"\r\n    }\r\n\r\n]);\r\n\r\nconst StickRightFuncMagicObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:watercurrent_stick\",\r\n        func: tidalWave,\r\n        sendMsg: \"§bタイダルウェイブ\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:atmosphere_stick\",\r\n        func: atmosphere,\r\n        sendMsg: \"§aアトモスフィア\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:earth_stick\",\r\n        func: gravityField,\r\n        sendMsg: \"§7グラビティフィールド\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:lightningstrike_stick\",\r\n        func: lightningStrike,\r\n        sendMsg: \"§6ライトニングストライク\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:jetblack_stick\",\r\n        func: blackHole,\r\n        sendMsg: \"§8ブラックホール\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:sparkle_stick\",\r\n        func: hollyField,\r\n        sendMsg: \"§eホーリーフィールド\"\r\n    }\r\n\r\n]);\r\n\r\n/**\r\n * スティック系魔法\r\n */\r\nexport class StickWeaponMagic implements ItemCustomComponent {\r\n\r\n    // 通常攻撃\r\n    onHitEntity(event:ItemComponentHitEntityEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let attackEntity = event.attackingEntity as Entity;\r\n        let hitEntity = event.hitEntity as Entity;\r\n        let effect = event.hadEffect as boolean;\r\n\r\n        if (!itemStack || (hitEntity instanceof Player && !world.gameRules.pvp)) {\r\n            return;\r\n        }\r\n        let wandMagicObject = StickHitObjects.find(obj => obj.itemName == itemStack.typeId) as StickMagicObject;\r\n        attackEntity.runCommand(\"/function magic/\" + wandMagicObject.event);\r\n        attackEntity.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + wandMagicObject.sendMsg + \"\\\"}]}\");\r\n\r\n    }\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n\r\n        // pvp用\r\n        if (world.gameRules.pvp) {\r\n            if (player.isSneaking) {\r\n                let stickEventMagicObject = StickRightEventMagicObjects.find(obj => obj.itemName == itemStack.typeId) as StickMagicObject;\r\n                if (stickEventMagicObject) {\r\n                    player.runCommand(\"/function magic/\" + stickEventMagicObject.event);\r\n                    player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + stickEventMagicObject.sendMsg + \"\\\"}]}\");\r\n                }\r\n                let stickFuncMagicObject = StickRightFuncMagicObjects.find(obj => obj.itemName == itemStack.typeId) as StickMagicObject;\r\n                if (stickFuncMagicObject) {\r\n                    player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + stickFuncMagicObject.sendMsg + \"\\\"}]}\");\r\n                    stickFuncMagicObject.func(player);\r\n                }\r\n            } else {\r\n                let stickShotMagicObject = StickShotMagicObjects.find(obj => obj.itemName == itemStack.typeId) as StickMagicObject;\r\n                if (stickShotMagicObject) {\r\n                    let xran = parseFloat(getRandomInRange(-0.1, 0.5).toFixed(3));\r\n                    let yran = parseFloat(getRandomInRange(-0.1, 0.1).toFixed(3));\r\n                    let zran = parseFloat(getRandomInRange(-0.1, 0.1).toFixed(3));\r\n\r\n                    if (itemStack.typeId == \"kurokumaft:atmosphere_stick\") {\r\n                        let intervalNum = system.runInterval(() => {\r\n                            xran = parseFloat(getRandomInRange(-0.5, 0.5).toFixed(3));\r\n                            yran = parseFloat(getRandomInRange(-0.5, 0.5).toFixed(3));\r\n                            zran = parseFloat(getRandomInRange(-0.5, 0.5).toFixed(3));\r\n        \r\n                            shooting(player, stickShotMagicObject.event, {x:xran,y:yran,z:zran}, stickShotMagicObject.addition, undefined);\r\n                        }, 4);\r\n                        system.runTimeout(() => {\r\n                            system.clearRun(intervalNum);\r\n                        }, 16);\r\n                    } else {\r\n                        shooting(player, stickShotMagicObject.event, {x:xran,y:yran,z:zran}, stickShotMagicObject.addition, undefined);\r\n                    }\r\n                    player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + stickShotMagicObject.sendMsg + \"\\\"}]}\");\r\n                }\r\n                let stickRightOneMagicObject = StickRightOneMagicObjects.find(obj => obj.itemName == itemStack.typeId) as StickMagicObject;\r\n                if (stickRightOneMagicObject) {\r\n                    player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + stickRightOneMagicObject.sendMsg + \"\\\"}]}\");\r\n                    stickRightOneMagicObject.func(player);\r\n                }\r\n            }\r\n        } else {\r\n        }\r\n\r\n        if (player.getGameMode() != GameMode.creative) {\r\n            ItemDurabilityDamage(player, itemStack, EquipmentSlot.Mainhand);\r\n        }\r\n\r\n        let cool = itemStack.getComponent(ItemComponentTypes.Cooldown) as ItemCooldownComponent;\r\n        cool.startCooldown(player);\r\n\r\n    }\r\n\r\n    // ブロッククリック\r\n    onUseOn(event:ItemComponentUseOnEvent) {\r\n    }\r\n}","import { EffectType, EntityDamageCause, Player, system, world } from \"@minecraft/server\";\r\n\r\n/**\r\n * アクアショット\r\n */\r\nexport async function aquaShot(player:Player) {\r\n    player.addTag(\"aqua_shot_self\");\r\n    let dimension = player.dimension;\r\n    let targets = dimension.getEntities({\r\n        excludeTags: [\r\n            \"aqua_shot_self\"\r\n        ],\r\n        excludeFamilies: [\r\n            \"inanimate\", \"player\", \"familiar\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        location: player.location,\r\n        closest: 4,\r\n        maxDistance: 10\r\n    });\r\n    let intervalNum = system.runInterval(() => {\r\n        targets.forEach(en => {\r\n            en.runCommand(\"/particle kurokumaft:aqua_shot_particle ~~~\")\r\n            en.addEffect(\"slowness\", 5, {\r\n                amplifier: 5\r\n            });\r\n            en.applyDamage(2, {\r\n                cause: EntityDamageCause.drowning\r\n            });\r\n        })\r\n    }, 4);\r\n    system.runTimeout(() => {\r\n        system.clearRun(intervalNum);\r\n    }, 40);\r\n    player.removeTag(\"aqua_shot_self\");\r\n\r\n}\r\n\r\n/**\r\n * タイダルウェイブ\r\n */\r\nexport async function tidalWave(player:Player) {\r\n    player.addTag(\"tidal_wave_self\");\r\n    let dimension = player.dimension;\r\n    let targets = dimension.getEntities({\r\n        excludeTags: [\r\n            \"tidal_wave_self\"\r\n        ],\r\n        excludeFamilies: [\r\n            \"inanimate\", \"player\", \"familiar\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        location: player.location,\r\n        maxDistance: 15\r\n    });\r\n    let intervalNum = system.runInterval(() => {\r\n        targets.forEach(en => {\r\n            en.runCommand(\"/particle kurokumaft:tidal_wave_particle ~~~\")\r\n            en.addEffect(\"slowness\", 1, {\r\n                amplifier: 10\r\n            });\r\n            en.applyDamage(3, {\r\n                cause: EntityDamageCause.drowning\r\n            });\r\n        })\r\n    }, 4);\r\n    system.runTimeout(() => {\r\n        system.clearRun(intervalNum);\r\n    }, 100);\r\n    player.removeTag(\"tidal_wave_self\");\r\n\r\n}\r\n","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\n\r\n/**\r\n * アトモスフィア\r\n */\r\nexport async function atmosphere(player:Player) {\r\n    player.addTag(\"atmosphere_self\");\r\n    let intervalNum = system.runInterval(() => {\r\n        player.runCommand(\"/particle kurokumaft:atmosphere_particle ~~~\");\r\n        let targets = player.dimension.getEntities({\r\n            excludeTags: [\r\n                \"atmosphere_self\"\r\n            ],\r\n            excludeFamilies: [\r\n                \"inanimate\", \"player\", \"familiar\"\r\n            ],\r\n            excludeTypes: [\r\n                \"item\"\r\n            ],\r\n            location: player.location,\r\n            maxDistance: 10\r\n        });\r\n        targets.forEach(en => {\r\n            en.runCommand(\"/particle kurokumaft:wind_particle ~~~\");\r\n            en.runCommand(\"/particle kurokumaft:storm1_particle ~~1~\");\r\n            en.runCommand(\"/particle kurokumaft:storm2_particle ~~0~\");\r\n            en.runCommand(\"/particle kurokumaft:storm3_particle ~~1.5~\");\r\n            en.runCommand(\"/particle kurokumaft:storm4_particle ~~0.5~\");\r\n            en.addEffect(\"slowness\", 1, {\r\n                amplifier: 10\r\n            });\r\n            en.applyDamage(3, {\r\n                cause: EntityDamageCause.fallingBlock\r\n            });\r\n        })\r\n    }, 4);\r\n    system.runTimeout(() => {\r\n        system.clearRun(intervalNum);\r\n        player.removeTag(\"atmosphere_self\");\r\n    }, 100);\r\n}","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\n\r\n/**\r\n * グラビティフィールド\r\n */\r\nexport async function gravityField(player:Player) {\r\n    player.addTag(\"gravity_field_self\");\r\n    let intervalNum = system.runInterval(() => {\r\n        player.runCommand(\"/particle kurokumaft:gravity_field_particle ~~~\");\r\n        let targets = player.dimension.getEntities({\r\n            excludeTags: [\r\n                \"atmosphere_self\"\r\n            ],\r\n            excludeFamilies: [\r\n                \"inanimate\", \"player\", \"familiar\"\r\n            ],\r\n            excludeTypes: [\r\n                \"item\"\r\n            ],\r\n            location: player.location,\r\n            maxDistance: 15\r\n        });\r\n        targets.forEach(en => {\r\n            en.runCommand(\"/particle kurokumaft:gravity_particle ~~~\");\r\n            en.addEffect(\"slowness\", 1, {\r\n                amplifier: 10\r\n            });\r\n            en.applyDamage(3, {\r\n                cause: EntityDamageCause.fallingBlock\r\n            });\r\n        })\r\n    }, 4);\r\n    system.runTimeout(() => {\r\n        system.clearRun(intervalNum);\r\n        player.removeTag(\"gravity_field_self\");\r\n    }, 100);\r\n}","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\n\r\n/**\r\n * ライトニングストライク\r\n */\r\nexport async function lightningStrike(player:Player) {\r\n    player.addTag(\"lightningstrike_self\");\r\n    let intervalNum = system.runInterval(() => {\r\n        player.runCommand(\"/particle kurokumaft:thunder_sword_particle ~~~\");\r\n        let targets = player.dimension.getEntities({\r\n            excludeTags: [\r\n                \"lightningstrike_self\"\r\n            ],\r\n            excludeFamilies: [\r\n                \"inanimate\", \"player\", \"familiar\"\r\n            ],\r\n            excludeTypes: [\r\n                \"item\"\r\n            ],\r\n            location: player.location,\r\n            maxDistance: 10\r\n        });\r\n        targets.forEach(en => {\r\n            en.runCommand(\"/particle kurokumaft:spark_particle ~~~\");\r\n            en.addEffect(\"slowness\", 1, {\r\n                amplifier: 1\r\n            });\r\n            en.applyDamage(6, {\r\n                cause: EntityDamageCause.lightning\r\n            });\r\n        })\r\n    }, 4);\r\n    system.runTimeout(() => {\r\n        system.clearRun(intervalNum);\r\n        player.removeTag(\"lightningstrike_self\");\r\n    }, 100);\r\n}","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\n\r\n/**\r\n * ブラックホール\r\n */\r\nexport async function blackHole(player:Player) {\r\n    player.addTag(\"black_hole_self\");\r\n    let black_hole = player.dimension.spawnEntity(\"kurokumaft:black_hole\", \r\n        {\r\n            x:player.location.x,\r\n            y:player.location.y + 8,\r\n            z:player.location.z\r\n        }\r\n    );\r\n    let holeLo = black_hole.location;\r\n    let intervalNum = system.runInterval(() => {\r\n        black_hole.teleport({x:holeLo.x, y:holeLo.y+0.1, z:holeLo.z});\r\n        black_hole.runCommand(\"/particle kurokumaft:black_hole_particle ~~~\");\r\n        black_hole.runCommand(\"/particle kurokumaft:black_hole_outer_particle ~~~\");\r\n        let targets = player.dimension.getEntities({\r\n            excludeTags: [\r\n                \"black_hole_self\"\r\n            ],\r\n            excludeFamilies: [\r\n                \"inanimate\", \"player\", \"familiar\"\r\n            ],\r\n            excludeTypes: [\r\n                \"item\"\r\n            ],\r\n            location: holeLo,\r\n            maxDistance: 18\r\n        });\r\n        targets.forEach(en => {\r\n            en.teleport(holeLo);\r\n            en.applyDamage(10, {\r\n                cause: EntityDamageCause.wither\r\n            });\r\n        })\r\n    }, 10);\r\n    system.runTimeout(() => {\r\n        system.clearRun(intervalNum);\r\n        player.removeTag(\"black_hole_self\");\r\n        black_hole.remove();\r\n    }, 100);\r\n}","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\n\r\n/**\r\n * ホーリーフィールド\r\n */\r\nexport async function hollyField(player:Player) {\r\n    let holly_field = player.dimension.spawnEntity(\"kurokumaft:holly_field\", \r\n        {\r\n            x:player.location.x,\r\n            y:player.location.y,\r\n            z:player.location.z\r\n        }\r\n    );\r\n    let holeLo = holly_field.location;\r\n    let intervalNum = system.runInterval(() => {\r\n        holly_field.runCommand(\"/particle kurokumaft:holly_field_particle ~~~\");\r\n        holly_field.runCommand(\"/particle kurokumaft:holly_field_outer_particle ~~~\");\r\n        let targets = player.dimension.getEntities({\r\n            excludeTags: [\r\n                \"black_hole_self\"\r\n            ],\r\n            excludeFamilies: [\r\n                \"inanimate\"\r\n            ],\r\n            excludeTypes: [\r\n                \"item\"\r\n            ],\r\n            location: holeLo,\r\n            maxDistance: 15\r\n        });\r\n        targets.forEach(en => {\r\n            en.addEffect(\"instant_health\", 2, {\r\n                amplifier: 10\r\n            });\r\n        })\r\n    }, 10);\r\n    system.runTimeout(() => {\r\n        system.clearRun(intervalNum);\r\n        holly_field.remove();\r\n    }, 100);\r\n}","import { Entity, EquipmentSlot, GameMode, ItemComponent, ItemComponentHitEntityEvent, ItemComponentTypes, ItemComponentUseEvent, ItemComponentUseOnEvent, ItemCooldownComponent, ItemCustomComponent, ItemStack, Player, system, world } from \"@minecraft/server\";\r\nimport { shooting, throwing } from \"../../../custom/ShooterMagicEvent\";\r\nimport { print, getRandomInRange, clamp } from \"../../../common/commonUtil\";\r\nimport { ItemDurabilityDamage } from \"../../../common/ItemDurabilityDamage\";\r\nimport { burstflare, flarecircle } from \"./FlameMagic\";\r\nimport { waterjail, waterwave } from \"./WaterWaveMagic\";\r\nimport { aerobomb, storm } from \"./StormMagic\";\r\nimport { greybomb, rockbreak } from \"./RockMagic\";\r\nimport { thunderclap, thunderjail } from \"./ThunderclapMagic\";\r\nimport { freezConclusion } from \"./FreezeMagic\";\r\nimport { brushash, summonSkeleton } from \"./DarknessMagic\";\r\nimport { areaheel, summonGolem } from \"./BrightnessMagic\";\r\n\r\ninterface RodMagicObject {\r\n    itemName:string,\r\n    event:string\r\n    sendMsg:string,\r\n    addition:number,\r\n    func: any\r\n}\r\n\r\nconst RodHitObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:flame_rod\",\r\n        event: \"fire/bumrod\",\r\n        sendMsg: \"§cバムロッド\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:waterwave_rod\",\r\n        event: \"water/watercutter\",\r\n        sendMsg: \"§bウォータカッター\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:storm_rod\",\r\n        event: \"wind/storm_bread\",\r\n        sendMsg: \"§aストームブレード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:rock_rod\",\r\n        event: \"stone/stone_bread\",\r\n        sendMsg: \"§7ストーンブレード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:thunderclap_rod\",\r\n        event: \"lightning/lightning_bread\",\r\n        sendMsg: \"§6ライトニングブレード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:freeze_rod\",\r\n        event: \"ice/ice_bread\",\r\n        sendMsg: \"§fアイスブレード\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:darkness_rod\",\r\n        event: \"dark/dark_fang\",\r\n        sendMsg: \"§8ダークファング\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:brightness_rod\",\r\n        event: \"light/light_fang\",\r\n        sendMsg: \"§eライトファング\"\r\n    }\r\n\r\n]);\r\n\r\nconst RodShotMagicObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:freeze_rod\",\r\n        event: \"kurokumaft:ice_barrette_magic\",\r\n        sendMsg: \"§fアイスバレット\",\r\n        addition: 4\r\n    }\r\n\r\n]);\r\n\r\nconst RodRightOneMagicObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:flame_rod\",\r\n        func: flarecircle,\r\n        sendMsg: \"§cフレイムサークル\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:waterwave_rod\",\r\n        func: waterwave,\r\n        sendMsg: \"§bウォーターウェーブ\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:storm_rod\",\r\n        func: storm,\r\n        sendMsg: \"§aストーム\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:rock_rod\",\r\n        func: rockbreak,\r\n        sendMsg: \"§7ロックブレイク\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:thunderclap_rod\",\r\n        func: thunderclap,\r\n        sendMsg: \"§6サンダークラップ\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:darkness_rod\",\r\n        func: brushash,\r\n        sendMsg: \"§8ブラストアッシュ\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:brightness_rod\",\r\n        func: areaheel,\r\n        sendMsg: \"§eエリアヒール\"\r\n    }\r\n\r\n]);\r\n\r\nconst RodRightFuncMagicObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:flame_rod\",\r\n        func: burstflare,\r\n        sendMsg: \"§cバーストフレア\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:waterwave_rod\",\r\n        func: waterjail,\r\n        sendMsg: \"§bウォータジェイル\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:storm_rod\",\r\n        func: aerobomb,\r\n        sendMsg: \"§aエアロボム\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:rock_rod\",\r\n        func: greybomb,\r\n        sendMsg: \"§7グレイボム\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:thunderclap_rod\",\r\n        func: thunderjail,\r\n        sendMsg: \"§6サンダージェイル\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:freeze_rod\",\r\n        func: freezConclusion,\r\n        sendMsg: \"§fフリーズコフィン\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:darkness_rod\",\r\n        func: summonSkeleton,\r\n        sendMsg: \"§8ダークスケルトン召喚\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:brightness_rod\",\r\n        func: summonGolem,\r\n        sendMsg: \"§eブライトゴーレム召喚\"\r\n    }\r\n\r\n]);\r\n\r\n/**\r\n * ロッド系魔法\r\n */\r\nexport class RodWeaponMagic implements ItemCustomComponent {\r\n\r\n    // 通常攻撃\r\n    onHitEntity(event:ItemComponentHitEntityEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let attackEntity = event.attackingEntity as Entity;\r\n        let hitEntity = event.hitEntity as Entity;\r\n        let effect = event.hadEffect as boolean;\r\n\r\n        if (!itemStack || (hitEntity instanceof Player && !world.gameRules.pvp)) {\r\n            return;\r\n        }\r\n        let wandMagicObject = RodHitObjects.find(obj => obj.itemName == itemStack.typeId) as RodMagicObject;\r\n        attackEntity.runCommand(\"/function magic/\" + wandMagicObject.event);\r\n        attackEntity.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + wandMagicObject.sendMsg + \"\\\"}]}\");\r\n\r\n    }\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n\r\n        // pvp用\r\n        if (world.gameRules.pvp) {\r\n            if (player.isSneaking) {\r\n                let rodFuncMagicObject = RodRightFuncMagicObjects.find(obj => obj.itemName == itemStack.typeId) as RodMagicObject;\r\n                if (rodFuncMagicObject) {\r\n                    player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + rodFuncMagicObject.sendMsg + \"\\\"}]}\");\r\n                    rodFuncMagicObject.func(player);\r\n                }\r\n            } else {\r\n                let rodShotMagicObject = RodShotMagicObjects.find(obj => obj.itemName == itemStack.typeId) as RodMagicObject;\r\n                if (rodShotMagicObject) {\r\n                    let xran = parseFloat(getRandomInRange(-0.1, 0.5).toFixed(3));\r\n                    let yran = parseFloat(getRandomInRange(-0.1, 0.1).toFixed(3));\r\n                    let zran = parseFloat(getRandomInRange(-0.1, 0.1).toFixed(3));\r\n\r\n                    shooting(player, rodShotMagicObject.event, {x:xran,y:yran,z:zran}, rodShotMagicObject.addition, undefined);\r\n                    player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + rodShotMagicObject.sendMsg + \"\\\"}]}\");\r\n                }\r\n                let rodRightOneMagicObject = RodRightOneMagicObjects.find(obj => obj.itemName == itemStack.typeId) as RodMagicObject;\r\n                if (rodRightOneMagicObject) {\r\n                    player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + rodRightOneMagicObject.sendMsg + \"\\\"}]}\");\r\n                    rodRightOneMagicObject.func(player);\r\n                }\r\n            }\r\n        } else {\r\n        }\r\n\r\n        if (player.getGameMode() != GameMode.creative) {\r\n            ItemDurabilityDamage(player, itemStack, EquipmentSlot.Mainhand);\r\n        }\r\n\r\n        let cool = itemStack.getComponent(ItemComponentTypes.Cooldown) as ItemCooldownComponent;\r\n        cool.startCooldown(player);\r\n\r\n    }\r\n\r\n    // ブロッククリック\r\n    onUseOn(event:ItemComponentUseOnEvent) {\r\n    }\r\n}","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\n\r\n/**\r\n * フレイムサークル\r\n */\r\nexport async function flarecircle(player:Player) {\r\n    player.addTag(\"flamecircle_self\");\r\n    let intervalNum = system.runInterval(() => {\r\n        let targets = player.dimension.getEntities({\r\n            excludeTags: [\r\n                \"flamecircle_self\"\r\n            ],\r\n            excludeFamilies: [\r\n                \"inanimate\", \"player\", \"familiar\"\r\n            ],\r\n            excludeTypes: [\r\n                \"item\"\r\n            ],\r\n            location: player.location,\r\n            maxDistance: 20,\r\n            closest: 3\r\n        });\r\n        targets.forEach(en => {\r\n            en.runCommand(\"/particle kurokumaft:firestome1_particle ~~~\");\r\n            en.applyDamage(5, {\r\n                cause: EntityDamageCause.fire\r\n            });\r\n        })\r\n    }, 2);\r\n    system.runTimeout(() => {\r\n        system.clearRun(intervalNum);\r\n        player.removeTag(\"flamecircle_self\");\r\n    }, 60);\r\n}\r\n\r\n/**\r\n * バーストフレア\r\n */\r\nexport async function burstflare(player:Player) {\r\n    player.addTag(\"burstflare_self\");\r\n    let targets = player.dimension.getEntities({\r\n        excludeTags: [\r\n            \"burstflare_self\"\r\n        ],\r\n        excludeFamilies: [\r\n            \"inanimate\", \"player\", \"familiar\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        location: player.location,\r\n        maxDistance: 20,\r\n        closest: 3\r\n    });\r\n    targets.forEach(en => {\r\n        en.runCommand(\"/particle kurokumaft:burstflare_particle ~~~\");\r\n        en.dimension.spawnEntity(\"kurokumaft:burstflaremagic<minecraft:explode>\", en.location);\r\n        en.applyDamage(10, {\r\n            cause: EntityDamageCause.fire\r\n        });\r\n    })\r\n    player.removeTag(\"burstflare_self\");\r\n}","import { Player } from \"@minecraft/server\";\r\nimport { getAdjacentSphericalPoints } from \"../../../common/ShooterPoints\";\r\n\r\n/**\r\n * ウォーターウェーブ\r\n */\r\nexport async function waterwave(player:Player) {\r\n\r\n    let {xapply, yapply, zapply, xlocation, ylocation, zlocation} = getAdjacentSphericalPoints(player.getRotation(), player.location);\r\n\r\n    let wave = player.dimension.spawnEntity(\"kurokumaft:waterwavemagic\", {x:xlocation!,y:player.location.y,z:zlocation!});\r\n    wave.applyImpulse({x:xapply!,y:0,z:zapply!});\r\n\r\n}\r\n\r\n/**\r\n * ウォータジェイル\r\n */\r\nexport async function waterjail(player:Player) {\r\n    player.addTag(\"waterjail_self\");\r\n    let targets = player.dimension.getEntities({\r\n        excludeTags: [\r\n            \"waterjail_self\"\r\n        ],\r\n        excludeFamilies: [\r\n            \"inanimate\", \"player\", \"familiar\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        location: player.location,\r\n        maxDistance: 20,\r\n        closest: 2\r\n    });\r\n    targets.forEach(en => {\r\n        en.runCommand(\"/particle kurokumaft:waterjail_particle ~~~\");\r\n        en.addEffect(\"slowness\", 10, {\r\n            amplifier: 50\r\n        });\r\n    })\r\n    player.removeTag(\"waterjail_self\");\r\n}","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\n\r\n/**\r\n * ストーム\r\n */\r\nexport async function storm(player:Player) {\r\n    player.addTag(\"storm_self\");\r\n    let targets = player.dimension.getEntities({\r\n        excludeTags: [\r\n            \"storm_self\"\r\n        ],\r\n        excludeFamilies: [\r\n            \"inanimate\", \"player\", \"familiar\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        location: player.location,\r\n        maxDistance: 20,\r\n        closest: 3\r\n    });\r\n    targets.forEach(en => {\r\n        en.runCommand(\"/particle kurokumaft:storm1_particle ~~~\");\r\n        en.runCommand(\"/particle kurokumaft:storm2_particle ~~1~\");\r\n        en.runCommand(\"/particle kurokumaft:storm3_particle ~~2~\");\r\n        en.runCommand(\"/particle kurokumaft:storm4_particle ~~3~\");\r\n        en.addEffect(\"levitation\", 1, {\r\n            amplifier: 15\r\n        });\r\n        en.applyDamage(2, {\r\n            cause: EntityDamageCause.fall\r\n        });\r\n    })\r\n    player.removeTag(\"storm_self\");\r\n}\r\n\r\n/**\r\n * エアロボム\r\n */\r\nexport async function aerobomb(player:Player) {\r\n    player.addTag(\"aero_bomb_self\");\r\n    let targets = player.dimension.getEntities({\r\n        excludeTags: [\r\n            \"aero_bomb_self\"\r\n        ],\r\n        excludeFamilies: [\r\n            \"inanimate\", \"player\", \"familiar\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        location: player.location,\r\n        maxDistance: 20,\r\n        closest: 3\r\n    });\r\n    targets.forEach(en => {\r\n        en.runCommand(\"/particle kurokumaft:aero_bomb_particle ~~~\");\r\n        en.applyDamage(10, {\r\n            cause: EntityDamageCause.fall\r\n        });\r\n        let bust = en.dimension.spawnEntity(\"kurokumaft:burstflaremagic\", en.location);\r\n        bust.triggerEvent(\"minecraft:explode\");\r\n    })\r\n    player.removeTag(\"aero_bomb_self\");\r\n}","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\n\r\n/**\r\n * ロックブレイク\r\n */\r\nexport async function rockbreak(player:Player) {\r\n    player.addTag(\"rock_break_self\");\r\n    let targets = player.dimension.getEntities({\r\n        excludeTags: [\r\n            \"rock_break_self\"\r\n        ],\r\n        excludeFamilies: [\r\n            \"inanimate\", \"player\", \"familiar\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        location: player.location,\r\n        maxDistance: 20,\r\n        closest: 3\r\n    });\r\n    targets.forEach(en => {\r\n        en.addEffect(\"nausea\", 5, {\r\n            amplifier: 10\r\n        });\r\n        let rock = en.dimension.spawnEntity(\"kurokumaft:burstflaremagic\", {x:en.location.x,y:en.location.y + 10, z:en.location.z});\r\n    })\r\n    player.removeTag(\"rock_break_self\");\r\n}\r\n\r\n/**\r\n * グレイボム\r\n */\r\nexport async function greybomb(player:Player) {\r\n    player.addTag(\"grey_bomb_self\");\r\n    let targets = player.dimension.getEntities({\r\n        excludeTags: [\r\n            \"grey_bomb_self\"\r\n        ],\r\n        excludeFamilies: [\r\n            \"inanimate\", \"player\", \"familiar\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        location: player.location,\r\n        maxDistance: 20,\r\n        closest: 3\r\n    });\r\n    targets.forEach(en => {\r\n        en.runCommand(\"/particle kurokumaft:grey_bomb_particle ~~~\");\r\n        en.applyDamage(10, {\r\n            cause: EntityDamageCause.fallingBlock\r\n        });\r\n        let bust = en.dimension.spawnEntity(\"kurokumaft:burstflaremagic\", en.location);\r\n        bust.triggerEvent(\"minecraft:explode\");\r\n    })\r\n    player.removeTag(\"grey_bomb_self\");\r\n}","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\n\r\n/**\r\n * サンダークラップ\r\n */\r\nexport async function thunderclap(player:Player) {\r\n    player.addTag(\"thunderclap_self\");\r\n    let targets = player.dimension.getEntities({\r\n        excludeTags: [\r\n            \"thunderclap_self\"\r\n        ],\r\n        excludeFamilies: [\r\n            \"inanimate\", \"player\", \"familiar\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        location: player.location,\r\n        maxDistance: 20,\r\n        closest: 3\r\n    });\r\n    targets.forEach(en => {\r\n        en.runCommand(\"/particle kurokumaft:lightningbolt_particle ~~~\");\r\n        en.dimension.spawnEntity(\"Lightning_Bolt\", en.location);\r\n        en.applyDamage(10, {\r\n            cause: EntityDamageCause.lightning\r\n        });\r\n    })\r\n    player.removeTag(\"thunderclap_self\");\r\n}\r\n\r\n/**\r\n * サンダージェイル\r\n */\r\nexport async function thunderjail(player:Player) {\r\n    player.addTag(\"thunder_jail_self\");\r\n    let targets = player.dimension.getEntities({\r\n        excludeTags: [\r\n            \"thunder_jail_self\"\r\n        ],\r\n        excludeFamilies: [\r\n            \"inanimate\", \"player\", \"familiar\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        location: player.location,\r\n        maxDistance: 8\r\n    });\r\n    targets.forEach(en => {\r\n        en.runCommand(\"/particle kurokumaft:thunder_jail_particle ~~~\");\r\n        en.addEffect(\"slowness\", 2, {\r\n            amplifier: 30\r\n        });\r\n        en.applyDamage(4, {\r\n            cause: EntityDamageCause.lightning\r\n        });\r\n    })\r\n    player.removeTag(\"thunder_jail_self\");\r\n}","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\n\r\n/**\r\n * フリーズコフィン\r\n */\r\nexport async function freezConclusion(player:Player) {\r\n    player.addTag(\"freez_conclusion_self\");\r\n    let targets = player.dimension.getEntities({\r\n        excludeTags: [\r\n            \"freez_conclusion_self\"\r\n        ],\r\n        excludeFamilies: [\r\n            \"inanimate\", \"player\", \"familiar\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        location: player.location,\r\n        maxDistance: 15,\r\n        closest: 2\r\n    });\r\n    targets.forEach(en => {\r\n        en.runCommand(\"/particle kurokumaft:freezingconclusion_particle ~~~\");\r\n        en.runCommand(\"/fill ~-1 ~ ~-1 ~1 ~1 ~1 packed_ice\");\r\n        en.addEffect(\"weakness\", 20, {\r\n            amplifier: 3\r\n        });\r\n    })\r\n    player.removeTag(\"freez_conclusion_self\");\r\n}","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\n\r\n/**\r\n * ブラストアッシュ\r\n */\r\nexport async function brushash(player:Player) {\r\n    player.addTag(\"brushash_self\");\r\n    let targets = player.dimension.getEntities({\r\n        excludeTags: [\r\n            \"brushash_self\"\r\n        ],\r\n        excludeFamilies: [\r\n            \"inanimate\", \"player\", \"familiar\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        location: player.location,\r\n        maxDistance: 10,\r\n        closest: 3\r\n    });\r\n    targets.forEach(en => {\r\n        en.runCommand(\"/particle kurokumaft:dark_brushash_particle ~~~\");\r\n        en.applyDamage(6, {\r\n            cause: EntityDamageCause.wither\r\n        });\r\n    })\r\n    player.removeTag(\"brushash_self\");\r\n}\r\n\r\n/**\r\n * ダークスケルトン召喚\r\n */\r\nexport async function summonSkeleton(player:Player) {\r\n    player.dimension.spawnEntity(\"kurokumaft:dark_skeleton\", {x:player.location.x+3,y:player.location.y,z:player.location.z}).nameTag = \"ダークスケルトン\";\r\n    player.dimension.spawnEntity(\"kurokumaft:dark_skeleton\", {x:player.location.x-3,y:player.location.y,z:player.location.z}).nameTag = \"ダークスケルトン\";\r\n    player.dimension.spawnEntity(\"kurokumaft:dark_skeleton\", {x:player.location.x,y:player.location.y,z:player.location.z+3}).nameTag = \"ダークスケルトン\";\r\n}","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\n\r\n/**\r\n * エリアヒール\r\n */\r\nexport async function areaheel(player:Player) {\r\n    let targets = player.dimension.getEntities({\r\n        excludeFamilies: [\r\n            \"inanimate\", \"magic\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        families: [\r\n            \"player\", \"familiar\", \"undead\"\r\n        ],\r\n        location: player.location,\r\n        maxDistance: 10\r\n    });\r\n    player.runCommand(\"/particle kurokumaft:areaheel_particle ~~~\");\r\n    targets.forEach(en => {\r\n        en.addEffect(\"instant_health\", 30, {\r\n            amplifier: 5,\r\n            showParticles: true\r\n        });\r\n    })\r\n}\r\n\r\n/**\r\n * ブライトゴーレム召喚\r\n */\r\nexport async function summonGolem(player:Player) {\r\n    let golem = player.dimension.spawnEntity(\"kurokumaft:brightness_golem\", {x:player.location.x,y:player.location.y,z:player.location.z+3});\r\n    golem.nameTag = \"ブライトゴーレム\";\r\n    golem.triggerEvent(\"minecraft:from_player\");\r\n}","import { Entity, EquipmentSlot, GameMode, ItemComponent, ItemComponentHitEntityEvent, ItemComponentTypes, ItemComponentUseEvent, ItemComponentUseOnEvent, ItemCooldownComponent, ItemCustomComponent, ItemStack, Player, system, world } from \"@minecraft/server\";\r\nimport { shooting, throwing } from \"../../../custom/ShooterMagicEvent\";\r\nimport { print, getRandomInRange, clamp } from \"../../../common/commonUtil\";\r\nimport { ItemDurabilityDamage } from \"../../../common/ItemDurabilityDamage\";\r\nimport { bramFang } from \"./FirestormMagic\";\r\nimport { explosion } from \"./ExplosionMagic\";\r\nimport { flameSpark } from \"./FlameSparkMagic\";\r\nimport { mailstrom } from \"./MailstromMagic\";\r\n\r\ninterface StaffMagicObject {\r\n    itemName:string,\r\n    event:string\r\n    sendMsg:string,\r\n    addition:number,\r\n    func: any\r\n}\r\n\r\nconst StaffHitObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:explosion_staff\",\r\n        event: \"fire/mega_brand\",\r\n        sendMsg: \"§7メガ・ブランド\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:firestorm_staff\",\r\n        func: bramFang,\r\n        sendMsg: \"§aブラム・ファング\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:flamespark_staff\",\r\n        event: \"lightning/dig_vault\",\r\n        sendMsg: \"§6ディグ・ヴォルト\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:mailstrom_staff\",\r\n        event: \"wind/sonic_slicer\",\r\n        sendMsg: \"§aソニックスライサー\"\r\n    }\r\n\r\n]);\r\n\r\nconst StaffRightOneMagicObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:firestorm_staff\",\r\n        func: flameSpark,\r\n        sendMsg: \"§cファイアストーム\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:explosion_staff\",\r\n        func: explosion,\r\n        sendMsg: \"§cエクスプロージョン\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:flamespark_staff\",\r\n        func: flameSpark,\r\n        sendMsg: \"§6フレイムスパーク\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:mailstrom_staff\",\r\n        func: mailstrom,\r\n        sendMsg: \"§bメイルシュトローム\"\r\n    }\r\n\r\n]);\r\n/**\r\n * スタッフ系魔法\r\n */\r\nexport class StaffWeaponMagic implements ItemCustomComponent {\r\n\r\n    // 通常攻撃\r\n    onHitEntity(event:ItemComponentHitEntityEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let attackEntity = event.attackingEntity as Entity;\r\n        let hitEntity = event.hitEntity as Entity;\r\n        let effect = event.hadEffect as boolean;\r\n\r\n        if (!itemStack || (hitEntity instanceof Player && !world.gameRules.pvp)) {\r\n            return;\r\n        }\r\n        let staffMagicObject = StaffHitObjects.find(obj => obj.itemName == itemStack.typeId) as StaffMagicObject;\r\n        if (staffMagicObject.event) {\r\n            attackEntity.runCommand(\"/function magic/\" + staffMagicObject.event);\r\n        } else {\r\n            staffMagicObject.func(attackEntity);\r\n        }\r\n        attackEntity.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + staffMagicObject.sendMsg + \"\\\"}]}\");\r\n\r\n    }\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n\r\n        // pvp用\r\n        if (world.gameRules.pvp) {\r\n            let staffRightOneMagicObject = StaffRightOneMagicObjects.find(obj => obj.itemName == itemStack.typeId) as StaffMagicObject;\r\n            if (staffRightOneMagicObject) {\r\n                player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + staffRightOneMagicObject.sendMsg + \"\\\"}]}\");\r\n                staffRightOneMagicObject.func(player);\r\n            }\r\n        } else {\r\n        }\r\n\r\n        if (player.getGameMode() != GameMode.creative) {\r\n            ItemDurabilityDamage(player, itemStack, EquipmentSlot.Mainhand);\r\n        }\r\n\r\n        let cool = itemStack.getComponent(ItemComponentTypes.Cooldown) as ItemCooldownComponent;\r\n        cool.startCooldown(player);\r\n\r\n    }\r\n\r\n    // ブロッククリック\r\n    onUseOn(event:ItemComponentUseOnEvent) {\r\n    }\r\n}","import { Dimension, Entity, EntityDamageCause, Player, system, Vector3 } from \"@minecraft/server\";\r\nimport { getLookPoints } from \"../../../common/commonUtil\";\r\n\r\n/**\r\n * ブラム・ファング\r\n */\r\nexport async function bramFang(player:Player) {\r\n    let targets = player.dimension.getEntities({\r\n        excludeTags: [\r\n            \"flamecircle_self\"\r\n        ],\r\n        excludeFamilies: [\r\n            \"inanimate\", \"player\", \"familiar\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        location: player.location,\r\n        maxDistance: 3\r\n    });\r\n    targets.forEach(en => {\r\n        en.dimension.spawnEntity(\"kurokumaft:bram_fang_magic\", en.location);\r\n    })\r\n}\r\n\r\n/**\r\n * ファイアストーム\r\n * @param {Player} player\r\n */\r\nexport async function fireStorm(player:Player) {\r\n\r\n    player.addTag(\"mailstrom_self\");\r\n\r\n    let {xlocation, ylocation, zlocation} = getLookPoints(player.getRotation(), player.location, 15);\r\n\r\n    let stand = player.dimension.spawnEntity(\"kurokumaft:firestormmagic_stand\", \r\n        {\r\n            x:xlocation!,\r\n            y:player.location.y + 0.5,\r\n            z:zlocation!\r\n        }\r\n    );\r\n    let stormLo = stand.location;\r\n    let intervalNum = system.runInterval(() => {\r\n        stand.runCommand(\"/particle kurokumaft:firestome5_particle ~~~\");\r\n        let targets = stand.dimension.getEntities({\r\n            excludeTags: [\r\n                \"firestormmagic_self\"\r\n            ],\r\n            excludeFamilies: [\r\n                \"inanimate\", \"player\", \"familiar\"\r\n            ],\r\n            excludeTypes: [\r\n                \"item\"\r\n            ],\r\n            location: stormLo,\r\n            maxDistance: 10\r\n        });\r\n        targets.forEach(en => {\r\n            en.applyDamage(5, {\r\n                cause: EntityDamageCause.fire\r\n            });\r\n        })\r\n    }, 10);\r\n    system.runTimeout(() => {\r\n        system.clearRun(intervalNum);\r\n        player.removeTag(\"firestormmagic_self\");\r\n        stand.remove();\r\n    }, 100);\r\n\r\n};\r\n\r\n","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\nimport { getLookPoints } from \"../../../common/commonUtil\";\r\n\r\n/**\r\n * エクスプロージョン\r\n */\r\nexport async function explosion(player:Player) {\r\n    let {xlocation, ylocation, zlocation} = getLookPoints(player.getRotation(), player.location, 25);\r\n    let explosion = player.dimension.spawnEntity(\"kurokumaft:explosionmagic\", \r\n        {\r\n            x:xlocation!,\r\n            y:player.location.y + 25,\r\n            z:zlocation!\r\n        }\r\n    );\r\n}","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\nimport { getAdjacentSphericalPoints } from \"../../../common/ShooterPoints\";\r\n\r\n/**\r\n * フレイムスパーク\r\n */\r\nexport async function flameSpark(player:Player) {\r\n    player.addTag(\"flamespark_self\");\r\n    let intervalNum = system.runInterval(() => {\r\n        let targets = player.dimension.getEntities({\r\n            excludeTags: [\r\n                \"flamespark_self\"\r\n            ],\r\n            excludeFamilies: [\r\n                \"inanimate\", \"player\", \"familiar\", \"magic\"\r\n            ],\r\n            excludeTypes: [\r\n                \"item\"\r\n            ],\r\n            location: player.location,\r\n            maxDistance: 30,\r\n            closest: 3\r\n        });\r\n        targets.forEach(en => {\r\n            en.runCommand(\"/particle kurokumaft:firewall_particle ~~~\");\r\n            en.applyDamage(3, {\r\n                cause: EntityDamageCause.fire\r\n            });\r\n            en.dimension.spawnEntity(\"minecraft:lightning_bolt\", en.location);\r\n            en.applyDamage(3, {\r\n                cause: EntityDamageCause.lightning\r\n            });\r\n        })\r\n    }, 10);\r\n    system.runTimeout(() => {\r\n        system.clearRun(intervalNum);\r\n        player.removeTag(\"flamespark_self\");\r\n    }, 100);\r\n}","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\nimport { getLookPoints } from \"../../../common/commonUtil\";\r\n\r\n/**\r\n * メイルシュトローム\r\n */\r\nexport async function mailstrom(player:Player) {\r\n    player.addTag(\"mailstrom_self\");\r\n\r\n    let {xlocation, ylocation, zlocation} = getLookPoints(player.getRotation(), player.location, 15);\r\n    let mailstrom_en = player.dimension.spawnEntity(\"kurokumaft:mailstrom\", \r\n        {\r\n            x:xlocation!,\r\n            y:player.location.y + 0.5,\r\n            z:zlocation!\r\n        }\r\n    );\r\n    let mailLo = mailstrom_en.location;\r\n    let intervalNum = system.runInterval(() => {\r\n        mailstrom_en.runCommand(\"/particle kurokumaft:mailstrom1_particle ~~~\");\r\n        mailstrom_en.runCommand(\"/particle kurokumaft:mailstrom1_particle ~~0.5~\");\r\n        mailstrom_en.runCommand(\"/particle kurokumaft:mailstrom2_particle ~~1~\");\r\n        mailstrom_en.runCommand(\"/particle kurokumaft:mailstrom2_particle ~~1.5~\");\r\n        mailstrom_en.runCommand(\"/particle kurokumaft:mailstrom3_particle ~~2~\");\r\n        mailstrom_en.runCommand(\"/particle kurokumaft:mailstrom3_particle ~~2.5~\");\r\n        mailstrom_en.runCommand(\"/particle kurokumaft:mailstrom4_particle ~~3~\");\r\n        mailstrom_en.runCommand(\"/particle kurokumaft:mailstrom4_particle ~~3.5~\");\r\n        mailstrom_en.runCommand(\"/particle kurokumaft:mailstrom5_particle ~~4~\");\r\n        mailstrom_en.runCommand(\"/particle kurokumaft:mailstrom5_particle ~~4.5~\");\r\n        mailstrom_en.runCommand(\"/particle kurokumaft:mailstrom6_particle ~~5~\");\r\n        mailstrom_en.runCommand(\"/particle kurokumaft:mailstrom6_particle ~~5.5~\");\r\n        let targets = mailstrom_en.dimension.getEntities({\r\n            excludeTags: [\r\n                \"mailstrom_self\"\r\n            ],\r\n            excludeFamilies: [\r\n                \"inanimate\", \"player\", \"familiar\"\r\n            ],\r\n            excludeTypes: [\r\n                \"item\"\r\n            ],\r\n            location: mailLo,\r\n            maxDistance: 10\r\n        });\r\n        targets.forEach(en => {\r\n            en.teleport(mailLo);\r\n            en.applyDamage(5, {\r\n                cause: EntityDamageCause.drowning\r\n            });\r\n        })\r\n    }, 10);\r\n    system.runTimeout(() => {\r\n        system.clearRun(intervalNum);\r\n        player.removeTag(\"mailstrom_self\");\r\n        mailstrom_en.remove();\r\n    }, 100);\r\n}","import { ItemCustomComponent, ItemComponentHitEntityEvent, ItemStack, Entity, ItemComponentUseEvent, Player, GameMode, EquipmentSlot, ItemComponentUseOnEvent, ItemComponentCompleteUseEvent, ItemComponentTypes, ItemCooldownComponent } from \"@minecraft/server\";\r\nimport { ItemDurabilityDamage } from \"../../../common/ItemDurabilityDamage\";\r\nimport { crimsonBread, flamingDesires } from \"./FireMagicBread\";\r\nimport { aquaDesires, mercurySmash } from \"./WaterMagicBread\";\r\nimport { windBarkSlash, windDesires } from \"./WindMagicBread\";\r\nimport { breakRockSlash, stoneDesires } from \"./StoneMagicBread\";\r\nimport { raizinBread, thunderDesires } from \"./ThunderMagicBread\";\r\nimport { iceDesires, syusetuBread } from \"./IceMagicBread\";\r\n\r\ninterface BreadMagicObject {\r\n    itemName:string,\r\n    sendMsg:string,\r\n    func: any\r\n}\r\n\r\nconst BreadHitObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:fire_magic_bread\",\r\n        func: flamingDesires,\r\n        sendMsg: \"§c焔裂き(ほむらざき)\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:water_magic_bread\",\r\n        func: aquaDesires,\r\n        sendMsg: \"§b蒼破斬(そうはざん)\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:wind_magic_bread\",\r\n        func: windDesires,\r\n        sendMsg: \"§a烈風刃(れっぷうじん)\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:stone_magic_bread\",\r\n        func: stoneDesires,\r\n        sendMsg: \"§7岩割刃(がんかつじん)\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:thunder_magic_bread\",\r\n        func: thunderDesires,\r\n        sendMsg: \"§6雷斬(らいきり)\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:ice_magic_bread\",\r\n        func: iceDesires,\r\n        sendMsg: \"§f斬雪(ざんせつ)\"\r\n    }\r\n]);\r\n\r\nconst BreadShotObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:fire_magic_bread\",\r\n        func: crimsonBread,\r\n        sendMsg: \"§c紅蓮剣(ぐれんけん)\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:water_magic_bread\",\r\n        func: mercurySmash,\r\n        sendMsg: \"§b水星砕き(すいせいくだき)\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:wind_magic_bread\",\r\n        func: windBarkSlash,\r\n        sendMsg: \"§a風鳴切(かなきり)\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:stone_magic_bread\",\r\n        func: breakRockSlash,\r\n        sendMsg: \"§7破岩衝(はがんしょう)\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:thunder_magic_bread\",\r\n        func: raizinBread,\r\n        sendMsg: \"§6雷神剣(らいじんけん)\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:ice_magic_bread\",\r\n        func: syusetuBread,\r\n        sendMsg: \"§f終雪氷晶(しゅうせつひょうしょう)\"\r\n    }\r\n\r\n]);\r\n\r\n/**\r\n * 刀系魔法\r\n */\r\nexport class BreadWeaponMagic implements ItemCustomComponent {\r\n\r\n    // 通常攻撃\r\n    onHitEntity(event:ItemComponentHitEntityEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let attackEntity = event.attackingEntity as Entity;\r\n        let hitEntity = event.hitEntity as Entity;\r\n        let effect = event.hadEffect as boolean;\r\n\r\n        if (!itemStack) {\r\n            return;\r\n        }\r\n        let breadMagicObject = BreadHitObjects.find(obj => obj.itemName == itemStack.typeId) as BreadMagicObject;\r\n        breadMagicObject.func(attackEntity);\r\n        attackEntity.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + breadMagicObject.sendMsg + \"\\\"}]}\");\r\n        if (attackEntity instanceof Player && attackEntity.getGameMode() != GameMode.creative) {\r\n            ItemDurabilityDamage(attackEntity, itemStack, EquipmentSlot.Mainhand);\r\n        }\r\n\r\n    }\r\n\r\n    // チャージ完了\r\n    onCompleteUse(event:ItemComponentCompleteUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n    }\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n\r\n        if (!itemStack) {\r\n            return;\r\n        }\r\n        let breadShotObject = BreadShotObjects.find(obj => obj.itemName == itemStack.typeId) as BreadMagicObject;\r\n        breadShotObject.func(player);\r\n        player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + breadShotObject.sendMsg + \"\\\"}]}\");\r\n        if (player.getGameMode() != GameMode.creative) {\r\n            ItemDurabilityDamage(player, itemStack, EquipmentSlot.Mainhand);\r\n        }\r\n        let cool = itemStack.getComponent(ItemComponentTypes.Cooldown) as ItemCooldownComponent;\r\n        cool.startCooldown(player);\r\n    }\r\n\r\n    // ブロッククリック\r\n    onUseOn(event:ItemComponentUseOnEvent) {\r\n    }\r\n}\r\n","import { EntityDamageCause, Player, system, world } from \"@minecraft/server\";\r\nimport { getLookPoints, getRandomInRange } from \"../../../common/commonUtil\";\r\nimport { shooting } from \"../../../custom/ShooterMagicEvent\";\r\n\r\n/**\r\n * 焔裂き(ほむらざき)\r\n */\r\nexport async function flamingDesires(player:Player) {\r\n    player.addTag(\"flaming_desires\");\r\n\r\n    let {xlocation, ylocation, zlocation} = getLookPoints(player.getRotation(), player.location, 2);\r\n    let targets = player.dimension.getEntities({\r\n        excludeTags: [\r\n            \"flaming_desires\"\r\n        ],\r\n        excludeFamilies: [\r\n            \"inanimate\", \"magic\", \"player\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        location: {x:xlocation!, y:player.location.y + 0.5, z:zlocation!},\r\n        maxDistance: 3,\r\n        closest: 1\r\n    });\r\n    targets.forEach(en => {\r\n\r\n        en.runCommand(\"/particle kurokumaft:flaming_desires_particle ~~~\");\r\n        en.applyDamage(5, {\r\n            cause: EntityDamageCause.fire\r\n        });\r\n    });\r\n    player.removeTag(\"flaming_desires\");\r\n}\r\n\r\n/**\r\n * 紅蓮剣(ぐれんけん)\r\n */\r\nexport async function crimsonBread(player:Player) {\r\n\r\n    let xran = parseFloat(getRandomInRange(-0.1, 0.1).toFixed(3));\r\n    let yran = parseFloat(getRandomInRange(-0.1, 0.1).toFixed(3));\r\n    let zran = parseFloat(getRandomInRange(-0.1, 0.1).toFixed(3));\r\n\r\n    shooting(player, \"kurokumaft:crimson_bread\", {x:xran,y:yran,z:zran}, 2, undefined);\r\n\r\n}","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\nimport { getLookPoints, getRandomInRange } from \"../../../common/commonUtil\";\r\nimport { shooting } from \"../../../custom/ShooterMagicEvent\";\r\n\r\n/**\r\n * 蒼破斬(そうはざん)\r\n */\r\nexport async function aquaDesires(player:Player) {\r\n    player.addTag(\"aqua_desires\");\r\n\r\n    let {xlocation, ylocation, zlocation} = getLookPoints(player.getRotation(), player.location, 2);\r\n    let targets = player.dimension.getEntities({\r\n        excludeTags: [\r\n            \"aqua_desires\"\r\n        ],\r\n        excludeFamilies: [\r\n            \"inanimate\", \"magic\", \"player\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        location: {x:xlocation!, y:player.location.y + 0.5, z:zlocation!},\r\n        maxDistance: 3,\r\n        closest: 2\r\n    });\r\n    targets.forEach(en => {\r\n        en.runCommand(\"/particle kurokumaft:aqua_desires_particle ^0.5^^\");\r\n        en.runCommand(\"/particle kurokumaft:aqua_desires_particle ^^^\");\r\n        en.runCommand(\"/particle kurokumaft:aqua_desires_particle ^-0.5^^\");\r\n        en.applyDamage(5, {\r\n            cause: EntityDamageCause.drowning\r\n        });\r\n    });\r\n    player.removeTag(\"aqua_desires\");\r\n}\r\n\r\n/**\r\n * 水星砕き(すいせいくだき)\r\n */\r\nexport async function mercurySmash(player:Player) {\r\n\r\n    let xran = 0;\r\n    let yran = 0;\r\n    let zran = 0;\r\n\r\n    shooting(player, \"kurokumaft:mercury_smash\", {x:xran,y:yran,z:zran}, 2,\"kurokumaft:projectile_1\");\r\n    shooting(player, \"kurokumaft:mercury_smash\", {x:xran,y:yran,z:zran}, 2,\"kurokumaft:projectile_2\");\r\n    shooting(player, \"kurokumaft:mercury_smash\", {x:xran,y:yran,z:zran}, 2,\"kurokumaft:projectile_3\");\r\n\r\n}","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\nimport { getLookPoints, getRandomInRange } from \"../../../common/commonUtil\";\r\nimport { shooting } from \"../../../custom/ShooterMagicEvent\";\r\n\r\n/**\r\n * 烈風刃(れっぷうじん)\r\n */\r\nexport function windDesires(player:Player) {\r\n    player.addTag(\"wind_desires\");\r\n\r\n    let {xlocation, ylocation, zlocation} = getLookPoints(player.getRotation(), player.location, 2);\r\n    let targets = player.dimension.getEntities({\r\n        excludeTags: [\r\n            \"wind_desires\"\r\n        ],\r\n        excludeFamilies: [\r\n            \"inanimate\", \"magic\", \"player\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        location: {x:xlocation!, y:player.location.y + 0.5, z:zlocation!},\r\n        maxDistance: 3,\r\n        closest: 3\r\n    });\r\n    targets.forEach(en => {\r\n        en.runCommand(\"/particle kurokumaft:wind_desires_particle ^0.5^^\");\r\n        en.runCommand(\"/particle kurokumaft:wind_desires_particle ^^^\");\r\n        en.runCommand(\"/particle kurokumaft:wind_desires_particle ^-0.5^^\");\r\n        en.applyDamage(2, {\r\n            cause: EntityDamageCause.flyIntoWall\r\n        });\r\n        en.applyDamage(2, {\r\n            cause: EntityDamageCause.flyIntoWall\r\n        });\r\n        en.applyDamage(2, {\r\n            cause: EntityDamageCause.flyIntoWall\r\n        });\r\n    });\r\n    player.removeTag(\"wind_desires\");\r\n}\r\n\r\n/**\r\n * 風鳴切(かなきり)\r\n */\r\nexport function windBarkSlash(player:Player) {\r\n\r\n    let xran = parseFloat(getRandomInRange(-0.5, 0.5).toFixed(3));\r\n    let yran = parseFloat(getRandomInRange(-0.2, 0.5).toFixed(3));\r\n    let zran = parseFloat(getRandomInRange(-0.5, 0.5).toFixed(3));\r\n\r\n    let intervalNum = system.runInterval(() => {\r\n        shooting(player, \"kurokumaft:wind_bark_slash\", {x:xran,y:yran,z:zran}, 5,\"kurokumaft:projectile_1\");\r\n        shooting(player, \"kurokumaft:wind_bark_slash\", {x:xran,y:yran,z:zran}, 5,\"kurokumaft:projectile_2\");\r\n        shooting(player, \"kurokumaft:wind_bark_slash\", {x:xran,y:yran,z:zran}, 5,\"kurokumaft:projectile_3\");\r\n    }, 5);\r\n\r\n    system.runTimeout(() => {\r\n        system.clearRun(intervalNum);\r\n    }, 60);\r\n}","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\nimport { getLookPoints, getRandomInRange } from \"../../../common/commonUtil\";\r\nimport { shooting } from \"../../../custom/ShooterMagicEvent\";\r\n\r\n/**\r\n * 岩割刃(がんかつじん)\r\n */\r\nexport async function stoneDesires(player:Player) {\r\n    player.addTag(\"stone_desires\");\r\n\r\n    let {xlocation, ylocation, zlocation} = getLookPoints(player.getRotation(), player.location, 2);\r\n    let targets = player.dimension.getEntities({\r\n        excludeTags: [\r\n            \"stone_desires\"\r\n        ],\r\n        excludeFamilies: [\r\n            \"inanimate\", \"magic\", \"player\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        location: {x:xlocation!, y:player.location.y + 0.5, z:zlocation!},\r\n        maxDistance: 3,\r\n        closest: 1\r\n    });\r\n\r\n    targets.forEach(en => {\r\n        en.runCommand(\"/particle kurokumaft:stone_desires_particle ~~~\");\r\n        en.applyDamage(5, {\r\n            cause: EntityDamageCause.piston\r\n        });\r\n    });\r\n    player.removeTag(\"stone_desires\");\r\n}\r\n\r\n/**\r\n * 破岩衝(はがんしょう)\r\n */\r\nexport async function breakRockSlash(player:Player) {\r\n\r\n    let xran = parseFloat(getRandomInRange(-0.2, 0.1).toFixed(3));\r\n    let yran = parseFloat(getRandomInRange(-0.2, 0.2).toFixed(3));\r\n    let zran = parseFloat(getRandomInRange(-0.2, 0.2).toFixed(3));\r\n\r\n    shooting(player, \"kurokumaft:break_rock_slash\", {x:xran,y:yran,z:zran}, 3, undefined);\r\n\r\n}","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\nimport { getLookPoints, getRandomInRange } from \"../../../common/commonUtil\";\r\nimport { shooting } from \"../../../custom/ShooterMagicEvent\";\r\n\r\n/**\r\n * 雷斬(らいきり)\r\n */\r\nexport async function thunderDesires(player:Player) {\r\n    player.addTag(\"thunder_desires\");\r\n\r\n    let {xlocation, ylocation, zlocation} = getLookPoints(player.getRotation(), player.location, 2);\r\n    let targets = player.dimension.getEntities({\r\n        excludeTags: [\r\n            \"thunder_desires\"\r\n        ],\r\n        excludeFamilies: [\r\n            \"inanimate\", \"magic\", \"player\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        location: {x:xlocation!, y:player.location.y + 0.5, z:zlocation!},\r\n        maxDistance: 3,\r\n        closest: 2\r\n    });\r\n\r\n    targets.forEach(en => {\r\n        en.runCommand(\"/particle kurokumaft:thunder_desires_particle ~~~\");\r\n        en.applyDamage(10, {\r\n            cause: EntityDamageCause.lightning\r\n        });\r\n    });\r\n    player.removeTag(\"thunder_desires\");\r\n}\r\n\r\n/**\r\n * 雷神剣(らいじんけん)\r\n */\r\nexport async function raizinBread(player:Player) {\r\n\r\n    let xran = parseFloat(getRandomInRange(-0.1, 0.1).toFixed(3));\r\n    let yran = parseFloat(getRandomInRange(-0.1, 0.1).toFixed(3));\r\n    let zran = parseFloat(getRandomInRange(-0.1, 0.1).toFixed(3));\r\n\r\n    shooting(player, \"kurokumaft:raizin_bread\", {x:xran,y:yran,z:zran}, 4, undefined);\r\n\r\n}","import { EntityDamageCause, Player, system } from \"@minecraft/server\";\r\nimport { getLookPoints, getRandomInRange } from \"../../../common/commonUtil\";\r\nimport { shooting } from \"../../../custom/ShooterMagicEvent\";\r\n\r\n/**\r\n * 斬雪(ざんせつ)\r\n */\r\nexport async function iceDesires(player:Player) {\r\n    player.addTag(\"ice_desires\");\r\n\r\n    let {xlocation, ylocation, zlocation} = getLookPoints(player.getRotation(), player.location, 2);\r\n    let targets = player.dimension.getEntities({\r\n        excludeTags: [\r\n            \"ice_desires\"\r\n        ],\r\n        excludeFamilies: [\r\n            \"inanimate\", \"magic\", \"player\"\r\n        ],\r\n        excludeTypes: [\r\n            \"item\"\r\n        ],\r\n        location: {x:xlocation!, y:player.location.y + 0.5, z:zlocation!},\r\n        maxDistance: 3,\r\n        closest: 1\r\n    });\r\n\r\n    targets.forEach(en => {\r\n        en.runCommand(\"/particle kurokumaft:ice_desires_particle ~~~\");\r\n        en.applyDamage(10, {\r\n            cause: EntityDamageCause.freezing\r\n        });\r\n    });\r\n    player.removeTag(\"ice_desires\");\r\n}\r\n\r\n/**\r\n * 終雪氷晶(しゅうせつひょうしょう)\r\n */\r\nexport async function syusetuBread(player:Player) {\r\n\r\n    let xran = parseFloat(getRandomInRange(-0.1, 0.1).toFixed(3));\r\n    let yran = parseFloat(getRandomInRange(-0.1, 0.1).toFixed(3));\r\n    let zran = parseFloat(getRandomInRange(-0.1, 0.1).toFixed(3));\r\n\r\n    shooting(player, \"kurokumaft:syusetu_bread\", {x:xran,y:yran,z:zran}, 4,\"kurokumaft:projectile_1\");\r\n\r\n}","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player, GameMode, EquipmentSlot, ItemComponentUseOnEvent, system, ItemComponentCompleteUseEvent } from \"@minecraft/server\";\r\nimport { getRandomInRange, clamp } from \"../../../common/commonUtil\";\r\nimport { ItemDurabilityDamage } from \"../../../common/ItemDurabilityDamage\";\r\nimport { shooting } from \"../../../custom/ShooterMagicEvent\";\r\n\r\ninterface BazookaMagicObject {\r\n    itemName:string\r\n}\r\n\r\nconst BazookaChargeObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:fire_magic_bazooka\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:water_magic_bazooka\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:wind_magic_bazooka\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:stone_magic_bazooka\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:lightning_magic_bazooka\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:ice_magic_bazooka\"\r\n    }\r\n]);\r\n\r\n\r\n/**\r\n * バズーカ系魔法\r\n */\r\nexport class BazookaShotMagic implements ItemCustomComponent {\r\n\r\n    // チャージ完了\r\n    onCompleteUse(event:ItemComponentCompleteUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n    }\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n\r\n        if (!itemStack) {\r\n            return;\r\n        }\r\n    }\r\n\r\n    // ブロッククリック\r\n    onUseOn(event:ItemComponentUseOnEvent) {\r\n    }\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player, GameMode, EquipmentSlot, ItemComponentUseOnEvent, system, ItemComponentCompleteUseEvent, MolangVariableMap, world, ScoreboardObjective } from \"@minecraft/server\";\r\nimport { getRandomInRange, clamp } from \"../../../common/commonUtil\";\r\nimport { ItemDurabilityDamage } from \"../../../common/ItemDurabilityDamage\";\r\nimport { shooting } from \"../../../custom/ShooterMagicEvent\";\r\n\r\ninterface GunMagicObject {\r\n    itemName:string,\r\n    event:string\r\n    sendMsg:string,\r\n    property:string\r\n}\r\n\r\nconst GunChargeObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:fire_magic_gun\",\r\n        event: \"kurokumaft:fire_magic_bullet\",\r\n        sendMsg: \"§cヒートハザード\",\r\n        property: \"kurokumaft:gun_charge_fire\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:water_magic_gun\",\r\n        event: \"kurokumaft:water_magic_bullet\",\r\n        sendMsg: \"§bウォーターバースト\",\r\n        property: \"kurokumaft:gun_charge_water\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:wind_magic_gun\",\r\n        event: \"kurokumaft:wind_magic_bullet\",\r\n        sendMsg: \"§aテンペストファング\",\r\n        property: \"kurokumaft:gun_charge_wind\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:stone_magic_gun\",\r\n        event: \"kurokumaft:stone_magic_bullet\",\r\n        sendMsg: \"§7クラックロアー\",\r\n        property: \"kurokumaft:gun_charge_stone\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:lightning_magic_gun\",\r\n        event: \"kurokumaft:lightning_magic_bullet\",\r\n        sendMsg: \"§6アマラガン\",\r\n        property: \"kurokumaft:gun_charge_lightning\"\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:ice_magic_gun\",\r\n        event: \"kurokumaft:ice_magic_bullet\",\r\n        sendMsg: \"§fグレイシアファング\",\r\n        property: \"kurokumaft:gun_charge_ice\"\r\n    }\r\n]);\r\n\r\n\r\n/**\r\n * 銃系魔法\r\n */\r\nexport class GunShotMagic implements ItemCustomComponent {\r\n\r\n    // チャージ完了\r\n    onCompleteUse(event:ItemComponentCompleteUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        if (!itemStack) {\r\n            return;\r\n        }\r\n\r\n        let gunMagicObject = GunChargeObjects.find(obj => obj.itemName == itemStack.typeId) as GunMagicObject;\r\n        if (gunMagicObject) {\r\n           player.setProperty(gunMagicObject.property, 1);\r\n           player.setDynamicProperty(\"gunCharge\", \"full\");\r\n        }\r\n    }\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n\r\n        if (!itemStack) {\r\n            return;\r\n        }\r\n        let gunMagicObject = GunChargeObjects.find(obj => obj.itemName == itemStack.typeId) as GunMagicObject;\r\n        if (gunMagicObject) {\r\n            if (player.getProperty(gunMagicObject.property) == 1 && player.getDynamicProperty(\"gunCharge\") == \"release\") {\r\n                magicGunShot(player, itemStack, gunMagicObject);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * チャージ後に魔弾を発射\r\n * \r\n * @param {Player} player\r\n * @param {ItemStack} itemStack\r\n * @param {GunMagicObject} gunMagicObject\r\n */\r\nasync function magicGunShot(player: Player, itemStack: ItemStack, gunMagicObject: GunMagicObject) {\r\n\r\n    if (gunMagicObject.itemName == \"kurokumaft:water_magic_gun\") {\r\n        shooting(player, gunMagicObject.event, {x:0,y:0,z:0}, 3, \"kurokumaft:projectile_1\");\r\n        shooting(player, gunMagicObject.event, {x:4,y:0,z:0}, 3, \"kurokumaft:projectile_2\");\r\n        shooting(player, gunMagicObject.event, {x:-4,y:0,z:0}, 3, \"kurokumaft:projectile_3\");\r\n        shooting(player, gunMagicObject.event, {x:0,y:4,z:0}, 3, \"kurokumaft:projectile_4\");\r\n        shooting(player, gunMagicObject.event, {x:2,y:2,z:0}, 3, \"kurokumaft:projectile_5\");\r\n        shooting(player, gunMagicObject.event, {x:-2,y:2,z:0}, 3, \"kurokumaft:projectile_6\");\r\n        shooting(player, gunMagicObject.event, {x:2,y:0,z:0}, 3, \"kurokumaft:projectile_7\");\r\n        shooting(player, gunMagicObject.event, {x:-2,y:0,z:0}, 3, \"kurokumaft:projectile_8\");\r\n    } else {\r\n        shooting(player, gunMagicObject.event, {x:0,y:0,z:0}, 3, undefined);\r\n    }\r\n    if (player.getGameMode() != GameMode.creative) {\r\n        ItemDurabilityDamage(player, itemStack, EquipmentSlot.Mainhand);\r\n    }\r\n    player.setDynamicProperty(\"gunCharge\", undefined);\r\n    player.setProperty(gunMagicObject.property, 0);\r\n\r\n}\r\n","import { Container, Entity, EntityComponentTypes, EntityInventoryComponent, EquipmentSlot, GameMode, ItemComponent, ItemComponentCompleteUseEvent, ItemComponentHitEntityEvent, ItemComponentTypes, ItemComponentUseEvent, ItemComponentUseOnEvent, ItemCooldownComponent, ItemCustomComponent, ItemDurabilityComponent, ItemStack, Player, system, world } from \"@minecraft/server\";\r\nimport { shooting, throwing } from \"../../../custom/ShooterMagicEvent\";\r\nimport { print, getRandomInRange } from \"../../../common/commonUtil\";\r\nimport { ItemDurabilityDamage, SummonGrimoireDurabilityDamage } from \"../../../common/ItemDurabilityDamage\";\r\n\r\ninterface SummonGrimoireMagicObject {\r\n    itemName:string,\r\n    particle:string\r\n    sendMsg:string\r\n}\r\n\r\nconst SummonGrimoireObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:fire_grimoire\",\r\n        particle: \"kurokumaft:fire_bread_particle\",\r\n        sendMsg: \"§c魔炎鳥\"\r\n    }\r\n\r\n]);\r\n\r\n/**\r\n * 召喚系魔導書\r\n */\r\nexport class SummonGrimoireMagic implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n\r\n        let summonMagicObject = SummonGrimoireObjects.find(obj => obj.itemName == itemStack.typeId) as SummonGrimoireMagicObject;\r\n        if (summonMagicObject) {\r\n            grimoire_summon_use(player, itemStack, summonMagicObject);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n// 魔導書（召喚）使用開始\r\n/**\r\n * @param {Player} player\r\n * @param {ItemStack} item\r\n */\r\nasync function grimoire_summon_use(player: Player, item: ItemStack, summonMagicObject: SummonGrimoireMagicObject) {\r\n\r\n    player.runCommand(\"particle \" + summonMagicObject.particle + \" ~~0.75~\");\r\n\r\n};\r\n\r\n// 魔導書（召喚）使用解放\r\n/**\r\n * @param {Player} player\r\n * @param {ItemStack} itemStack\r\n * @param {number} duration\r\n */\r\nexport async function grimoire_summon_Release(player:Player, itemStack:ItemStack, duration:number) {\r\n\r\n    player.setDynamicProperty(\"summon_grimoire\", undefined);\r\n\r\n    if (-duration >= 25) {\r\n        let summonMagicObject = SummonGrimoireObjects.find(obj => obj.itemName == itemStack.typeId) as SummonGrimoireMagicObject;\r\n\r\n        player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"text\\\":\\\"\" + summonMagicObject.sendMsg + \"\\\"}]}\");\r\n    \r\n        if (player.getGameMode() != GameMode.creative) {\r\n            SummonGrimoireDurabilityDamage(player, itemStack, EquipmentSlot.Mainhand);\r\n        }\r\n    }\r\n\r\n};\r\n","import { system, world, WorldInitializeBeforeEvent } from \"@minecraft/server\";\r\nimport { WandWeaponMagic } from \"../items/weapon/wand/WandWeaponMagic\";\r\nimport { ShieldMagic } from \"../items/weapon/shield/ShieldMagic\";\r\nimport { SwordWeaponMagic, SwordWeaponMagicMons } from \"../items/weapon/sword/SwordWeaponMagic\";\r\nimport { BowShotMagic } from \"../items/weapon/bow/BowWeaponMagic\";\r\nimport { checkPlayerEquTick } from \"../player/armorEquipment\";\r\nimport { StickWeaponMagic } from \"../items/weapon/stick/StickWeaponMagic\";\r\nimport { RodWeaponMagic } from \"../items/weapon/rod/RodWeaponMagic\";\r\nimport { StaffWeaponMagic } from \"../items/weapon/staff/StaffWeaponMagic\";\r\nimport { BreadWeaponMagic } from \"../items/weapon/bread/BreadWeaponMagic\";\r\nimport { BazookaShotMagic } from \"../items/weapon/bazooka/BazookaWeaponMagic\";\r\nimport { GunShotMagic } from \"../items/weapon/gun/GunWeaponMagic\";\r\nimport { SummonGrimoireMagic } from \"../items/weapon/grimoire/SummonGrimoireMagic\";\r\n\r\n/**\r\n * カスタムコンポーネントの登録\r\n * @param {WorldInitializeBeforeEvent} initEvent\r\n */\r\nfunction initRegisterCustom(initEvent:WorldInitializeBeforeEvent) {\r\n\r\n    // ワンド系\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:wand_magic', new WandWeaponMagic());\r\n    // ロッド系\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:rod_magic', new RodWeaponMagic());\r\n    // スティック系\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:stick_magic', new StickWeaponMagic());\r\n    // スティック系\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:staff_magic', new StaffWeaponMagic());\r\n\r\n    // ソード系\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:sword_magic', new SwordWeaponMagic());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:sword_magic_monster', new SwordWeaponMagicMons());\r\n\r\n    // 刀系\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:bread_magic', new BreadWeaponMagic());\r\n\r\n    // シールド\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:shield_magic', new ShieldMagic());\r\n\r\n    // 弓\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:bow_magic', new BowShotMagic());\r\n    // 銃\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:gun_magic', new GunShotMagic());\r\n    // バズーカ\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:bazooka_magic', new BazookaShotMagic());\r\n\r\n    // 魔導書\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:summon_grimoire', new SummonGrimoireMagic());\r\n\r\n}\r\n\r\n/**\r\n * 監視スレッドの登録\r\n * @param {WorldInitializeBeforeEvent} initEvent\r\n */\r\nfunction initStateChangeMonitor(initEvent:WorldInitializeBeforeEvent) {\r\n    checkPlayerEquTick();\r\n}\r\n\r\nexport {initRegisterCustom, initStateChangeMonitor}"],"mappings":"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","names":["world","system","EntityComponentTypes","ItemComponentTypes","EquipmentSlot","EntityComponentTypes","EquipmentSlot","ItemComponentTypes","EntityComponentTypes","EquipmentSlot","system","world","system","EntityComponentTypes","ItemComponentTypes","ItemStack","ItemComponentTypes","EntityComponentTypes","EntityComponentTypes","ItemComponentTypes","ItemStack","world","ItemComponentTypes","system","system","system","world","EntityComponentTypes","ItemStack","EquipmentSlot","system","system","EntityComponentTypes","EquipmentSlot","EquipmentSlot","ItemComponentTypes","Player","world","Player","world","EquipmentSlot","ItemComponentTypes","Player","GameMode","EquipmentSlot","Player","GameMode","EquipmentSlot","GameMode","EquipmentSlot","system","system","GameMode","EquipmentSlot","EntityComponentTypes","EquipmentSlot","system","world","EntityComponentTypes","EquipmentSlot","system","EntityComponentTypes","EquipmentSlot","system","TicksPerSecond","EntityComponentTypes","EquipmentSlot","system","TicksPerSecond","EntityComponentTypes","EquipmentSlot","system","TicksPerSecond","world","EntityComponentTypes","EquipmentSlot","system","EquipmentSlot","GameMode","ItemComponentTypes","Player","system","world","system","EntityDamageCause","system","EntityDamageCause","system","EntityDamageCause","system","EntityDamageCause","system","system","Player","world","system","GameMode","EquipmentSlot","ItemComponentTypes","EquipmentSlot","GameMode","ItemComponentTypes","Player","world","EntityDamageCause","system","EntityDamageCause","EntityDamageCause","EntityDamageCause","EntityDamageCause","Player","world","GameMode","EquipmentSlot","ItemComponentTypes","EquipmentSlot","GameMode","ItemComponentTypes","Player","world","EntityDamageCause","system","explosion","EntityDamageCause","system","EntityDamageCause","system","system","EntityDamageCause","Player","world","GameMode","EquipmentSlot","ItemComponentTypes","Player","GameMode","EquipmentSlot","ItemComponentTypes","EntityDamageCause","EntityDamageCause","EntityDamageCause","EntityDamageCause","EntityDamageCause","system","EntityDamageCause","system","EntityDamageCause","EntityDamageCause","EntityDamageCause","EntityDamageCause","EntityDamageCause","EntityDamageCause","Player","GameMode","EquipmentSlot","ItemComponentTypes","GameMode","EquipmentSlot","GameMode","EquipmentSlot","EquipmentSlot","GameMode","GameMode","EquipmentSlot","world"],"file":"../scripts/magic_script.js"}