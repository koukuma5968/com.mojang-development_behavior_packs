{
	"namespace": "ice_machine",

	"ice_machine_arrow_empty_image": {
		"type": "image",
		"layer": 1,
		"texture": "textures/ui/arrow_inactive",
		"anchor_from": "top_left",
		"anchor_to": "top_left",
		"size": [ 22, 15 ]
	},
	"ice_machine_arrow_full_image": {
		"type": "image",
		"layer": 3,
		"texture": "textures/ui/arrow_active",
		"anchor_from": "top_left",
		"anchor_to": "top_left",
		"size": [ 22, 15 ],
		"clip_direction": "left",
		"bindings": [
		  {
			"binding_name": "#ice_machine_arrow_ratio",
			"binding_name_override": "#clip_ratio",
			"binding_condition": "always"
		  }
		]
	},
	
	"ice_empty_image": {
		"type": "image",
		"texture": "textures/kurokumaft/ui/ice_empty_image",
		"layer": 2
	},
	
	"ice_full_image": {
		"type": "image",
		"texture": "textures/kurokumaft/ui/ice_full_image",
		"layer": 3,
		"clip_direction": "down",
		"bindings": [
		  {
			"binding_name": "#ice_machine_ice_ratio",
			"binding_name_override": "#clip_ratio",
			"binding_condition": "always"
		  }
		]
	},

	"ice_panel": {
		"type": "panel",
		"size": [ 13, 13 ],
		"offset": [ -21, 0 ],
		"controls": [
		  {
			"ice_empty_image@ice_machine.ice_empty_image": {}
		  },
		  {
			"ice_full_image@ice_machine.ice_full_image": {}
		  }
		]
	},

	"input_grid_panel": {
		"type": "panel",
		"grid_position": [0, 0],
		"ignored": false
	},
	"custom_crafting_grid": {
		"type": "grid",
		"size": [60, 60],
		"anchor_from": "center",
		"anchor_to": "center",
		"grid_dimensions": [2, 2],
		"collection_name": "crafting_input_items",

		"controls": [
			{
				"input_item_left@input_grid_panel": {
					"grid_position": [0, 0],
					"ignored": false,
					"controls": [{
						"center_top@crafting.crafting_input_grid_item": {
							"offset": [-60, -40]
						}
					}]
				}
			},
			{
				"input_item_right@input_grid_panel": {
					"grid_position": [0, 1],
					"ignored": false,
					"controls": [{
						"center_middle@crafting.crafting_input_grid_item": {
							"offset": [-60, -30]
						}
					}]
				}
			}
		]
	},

	"custom_work_bench_panel": {
		"type": "panel",
		"anchor_to": "top_left",
		"anchor_from": "top_left",
		"controls": [
			{
				"crafting_label_0@crafting.crafting_label": {
					"offset": [55, 5]
				}
			},
			{
				"inventory_label@crafting.inventory_label": {
					"offset": [-10, 70]
				}
			},
			{
				"crafting_grid@custom_crafting_grid": {
					"offset": [20, 40]
				}
			},
			{
				"ice_panel@ice_panel": {
					"offset": [-55, 5]
				}
			},
			{
				"ice_machine_arrow_empty_image@ice_machine_arrow_empty_image": {
					"offset": [55, 35]
				}
			},
			{
				"work_bench_output_grid@crafting.output_grid_3x3": {
					"offset": [90, 30]
				}
			}
		]
	},

	"custom_crafting_panel_top_half": {
		"type": "panel",
		"size": ["100%", "50%"],
		"anchor_from": "top_left",
		"anchor_to": "top_left",
		"controls": [{
			"crafting_panel@custom_work_bench_panel": {
				"offset": [27, 0]
			}
		}]
	},

	"custom_player_inventory@common.root_panel": {
		"layer": 1,
		"size": [180, 160],
		"controls": [

			{
				"kurokumaft@ice_machine": {
					"layer": 5,
					"size": ["90%", 90],
					"offset": [0, -37.5]
				}
			},
			{
				"common_panel@common.common_panel": {
					"offset": [0, 0],
					"$show_close_button": true
				}
			},
			{
				"inventory_panel_top_half@$top_half_variant": {
					"layer": 2
				}
			},
			{
				"inventory_panel_bottom_half@common.inventory_panel_bottom_half": {
					"layer": 2,
					"$button_ref": "crafting.inventory_container_slot_button",
					"$background_images": "crafting.container_cell_images"

				}
			},
			{
				"hotbar_grid@common.hotbar_grid_template": {
					"layer": 2,
					"$button_ref": "crafting.inventory_container_slot_button",
					"$background_images": "crafting.container_cell_images"

				}
			}
		]
	},

	"item_control": {
		"type": "panel",
		"controls": [

			{
				"inventory_take_progress_icon_button@common.inventory_take_progress_icon_button": {}
			},
			{
				"inventory_selected_icon_button@common.inventory_selected_icon_button": {}
			},
			{
				"hold_icon@common.inventory_take_progress_icon_button": {}
			},
			{
				"controller_gamepad_helpers_stack_panel": {
					"type": "stack_panel",
					"anchor_from": "bottom_middle",
					"anchor_to": "bottom_middle",
					"controls": [{
							"container_gamepad_helpers_second_row@crafting.container_gamepad_helpers_second_row": {}
						},
						{
							"container_gamepad_helpers@common.container_gamepad_helpers": {
								"$helper_x_control": "crafting.inventory_x_gamepad_helper",
								"$helper_y_control": "crafting.inventory_y_gamepad_helper",
								"$helper_a_control": "crafting.inventory_a_gamepad_helper"
							}
						}
					],
					"bindings": [{
						"binding_name": "#gamepad_helper_visible",
						"binding_name_override": "#visible"
					}]
				}
			},
			{
				"flying_item_renderer@common.flying_item_renderer": {
					"layer": 13
				}
			},
			{
				"game_tip@game_tip.game_tip_panel": {
					"layer": 100,
					"$offset|default": [0, 110],
					"variables": [{
						"requires": "$game_pad",
						"$offset": [0, "38%"]
					}],
					"offset": "$offset"
				}
			},
			{
				"selected_item_details_factory@common.selected_item_details_factory": {}
			},
			{
				"item_lock_notification_factory@common.item_lock_notification_factory": {}
			}
		]
	},


	"final_panel": {
		"type": "panel",
		"$top_half_variant": "custom_crafting_panel_top_half",
		"controls": [
			{
				"cpi@custom_player_inventory": {}
			},
			{
				"icontrol@item_control": {}
			}
		],
		"bindings": [{
				"binding_name": "#crafting_label_text"
			},
			{
				"binding_type": "view",
				"source_property_name": "(#crafting_label_text = tile.kurokumaft:ice_machine.name)",
				"target_property_name": "#visible"
			}
		]
	}
}